(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,302944,e=>{e.v(JSON.parse('[{"type":"constructor","inputs":[{"name":"_feeWallet","type":"address","internalType":"address"},{"name":"_burnWallet","type":"address","internalType":"address"},{"name":"_sellerBurnFeeRate","type":"uint256","internalType":"uint256"},{"name":"_buyerBurnFeeRate","type":"uint256","internalType":"uint256"},{"name":"_admin","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"DEFAULT_ADMIN_ROLE","inputs":[],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"OPERATOR_ROLE","inputs":[],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"addOperator","inputs":[{"name":"newOperator","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"burnWallet","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"buyerBurnFeeRate","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"certSigner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"changeBurnWallet","inputs":[{"name":"newWallet","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"changeBuyerBurnFee","inputs":[{"name":"newRate","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"changeCertSigner","inputs":[{"name":"newSigner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"changeFeeWallet","inputs":[{"name":"newWallet","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"changeSellerBurnFee","inputs":[{"name":"newRate","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"delist","inputs":[{"name":"listingID","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"feeWallet","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"getRoleAdmin","inputs":[{"name":"role","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"grantRole","inputs":[{"name":"role","type":"bytes32","internalType":"bytes32"},{"name":"account","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"hasRole","inputs":[{"name":"role","type":"bytes32","internalType":"bytes32"},{"name":"account","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"isOperator","inputs":[{"name":"operator","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"list","inputs":[{"name":"listingID","type":"uint256","internalType":"uint256"},{"name":"seller","type":"address","internalType":"address"},{"name":"payToken","type":"address","internalType":"address"},{"name":"price","type":"uint256","internalType":"uint256"},{"name":"settlementInstructions","type":"string","internalType":"string"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"listings","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"listingID","type":"uint256","internalType":"uint256"},{"name":"settlementInstructions","type":"string","internalType":"string"},{"name":"state","type":"uint8","internalType":"enum State"},{"name":"correlationId","type":"bytes16","internalType":"bytes16"},{"name":"buyer","type":"address","internalType":"address"},{"name":"seller","type":"address","internalType":"address"},{"name":"payToken","type":"address","internalType":"address"},{"name":"price","type":"uint256","internalType":"uint256"},{"name":"sellerBurnFeeRate","type":"uint256","internalType":"uint256"},{"name":"buyerBurnFeeRate","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"removeOperator","inputs":[{"name":"operator","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"renounceRole","inputs":[{"name":"role","type":"bytes32","internalType":"bytes32"},{"name":"callerConfirmation","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"revertSettlement","inputs":[{"name":"listingID","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"revokeRole","inputs":[{"name":"role","type":"bytes32","internalType":"bytes32"},{"name":"account","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"sellerBurnFeeRate","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"settle","inputs":[{"name":"listingID","type":"uint256","internalType":"uint256"},{"name":"feeRate","type":"uint256","internalType":"uint256"},{"name":"royaltyFeeRate","type":"uint256","internalType":"uint256"},{"name":"royaltyWallet","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"settlements","inputs":[{"name":"","type":"bytes16","internalType":"bytes16"}],"outputs":[{"name":"listingID","type":"uint256","internalType":"uint256"},{"name":"buyer","type":"address","internalType":"address"},{"name":"seller","type":"address","internalType":"address"},{"name":"correlationId","type":"bytes16","internalType":"bytes16"}],"stateMutability":"view"},{"type":"function","name":"startSettlement","inputs":[{"name":"cert","type":"tuple","internalType":"struct StartSettlementCert","components":[{"name":"listingId","type":"uint256","internalType":"uint256"},{"name":"correlationId","type":"bytes16","internalType":"bytes16"},{"name":"buyer","type":"address","internalType":"address"}]},{"name":"signature","type":"bytes","internalType":"bytes"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"supportsInterface","inputs":[{"name":"interfaceId","type":"bytes4","internalType":"bytes4"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"BurnFeePaid","inputs":[{"name":"listingID","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"wallet","type":"address","indexed":false,"internalType":"address"},{"name":"fee","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"BuyerBurnRateChanged","inputs":[{"name":"oldRate","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"newRate","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"FeePaid","inputs":[{"name":"listingID","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"wallet","type":"address","indexed":false,"internalType":"address"},{"name":"fee","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ListingCreated","inputs":[{"name":"listingID","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"operator","type":"address","indexed":true,"internalType":"address"},{"name":"settlementInstructions","type":"string","indexed":true,"internalType":"string"},{"name":"seller","type":"address","indexed":false,"internalType":"address"},{"name":"payToken","type":"address","indexed":false,"internalType":"address"},{"name":"price","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ListingDelisted","inputs":[{"name":"listingID","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"operator","type":"address","indexed":false,"internalType":"address"}],"anonymous":false},{"type":"event","name":"ListingPaid","inputs":[{"name":"listingId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"buyer","type":"address","indexed":true,"internalType":"address"},{"name":"price","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"payToken","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"RoleAdminChanged","inputs":[{"name":"role","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"previousAdminRole","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"newAdminRole","type":"bytes32","indexed":true,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"RoleGranted","inputs":[{"name":"role","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"sender","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"RoleRevoked","inputs":[{"name":"role","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"sender","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"SellerBurnRateChanged","inputs":[{"name":"oldRate","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"newRate","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SettlementCompleted","inputs":[{"name":"correlationId","type":"bytes16","indexed":true,"internalType":"bytes16"},{"name":"listingID","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"netAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SettlementReverted","inputs":[{"name":"correlationId","type":"bytes16","indexed":true,"internalType":"bytes16"},{"name":"listingID","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"refundAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SettlementStarted","inputs":[{"name":"listingID","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"buyer","type":"address","indexed":false,"internalType":"address"},{"name":"seller","type":"address","indexed":false,"internalType":"address"},{"name":"correlationId","type":"bytes16","indexed":false,"internalType":"bytes16"}],"anonymous":false},{"type":"error","name":"AccessControlBadConfirmation","inputs":[]},{"type":"error","name":"AccessControlUnauthorizedAccount","inputs":[{"name":"account","type":"address","internalType":"address"},{"name":"neededRole","type":"bytes32","internalType":"bytes32"}]},{"type":"error","name":"AlreadyListed","inputs":[]},{"type":"error","name":"CannotDelist","inputs":[]},{"type":"error","name":"CannotRevertNotSettling","inputs":[]},{"type":"error","name":"CannotSettleNotListed","inputs":[]},{"type":"error","name":"CannotSettleNotSettling","inputs":[]},{"type":"error","name":"CertInvalidSender","inputs":[]},{"type":"error","name":"CertInvalidSignature","inputs":[]},{"type":"error","name":"ECDSAInvalidSignature","inputs":[]},{"type":"error","name":"ECDSAInvalidSignatureLength","inputs":[{"name":"length","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ECDSAInvalidSignatureS","inputs":[{"name":"s","type":"bytes32","internalType":"bytes32"}]},{"type":"error","name":"SettlementAlreadyExists","inputs":[]},{"type":"error","name":"UnknownListing","inputs":[]},{"type":"error","name":"UnknownSettlement","inputs":[]}]'))},341494,e=>{"use strict";var t=e.i(553298),n=e.i(307529),r=e.i(639271),i=e.i(963849);e.s([],573296),e.i(573296),e.s(["AbiCoder",()=>n.AbiCoder,"ConstructorFragment",()=>t.ConstructorFragment,"ErrorFragment",()=>t.ErrorFragment,"EventFragment",()=>t.EventFragment,"FormatTypes",()=>t.FormatTypes,"Fragment",()=>t.Fragment,"FunctionFragment",()=>t.FunctionFragment,"Indexed",()=>i.Indexed,"Interface",()=>i.Interface,"LogDescription",()=>i.LogDescription,"ParamType",()=>t.ParamType,"TransactionDescription",()=>i.TransactionDescription,"checkResultErrors",()=>r.checkResultErrors,"defaultAbiCoder",()=>n.defaultAbiCoder],341494)},741899,e=>{"use strict";var t=e.i(6248),n=e.i(770631),r=e.i(500046),i=e.i(854579);e.s([],744450),e.i(744450),e.s(["_TypedDataEncoder",()=>i.TypedDataEncoder,"dnsEncode",()=>n.dnsEncode,"ensNormalize",()=>n.ensNormalize,"hashMessage",()=>r.hashMessage,"id",()=>t.id,"isValidName",()=>n.isValidName,"messagePrefix",()=>r.messagePrefix,"namehash",()=>n.namehash],741899)},94653,e=>{"use strict";var t=e.i(10170),n=e.i(172782),r=e.i(656321),i=e.i(754692);e.s(["decryptCrowdsale",()=>n.decrypt,"decryptJsonWallet",()=>t.decryptJsonWallet,"decryptJsonWalletSync",()=>t.decryptJsonWalletSync,"decryptKeystore",()=>i.decrypt,"decryptKeystoreSync",()=>i.decryptSync,"encryptKeystore",()=>i.encrypt,"getJsonWalletAddress",()=>r.getJsonWalletAddress,"isCrowdsaleWallet",()=>r.isCrowdsaleWallet,"isKeystoreWallet",()=>r.isKeystoreWallet])},245075,e=>{"use strict";var t=e.i(551328),n=e.i(901693);e.s([],53290),e.i(53290),e.s(["SupportedAlgorithm",()=>n.SupportedAlgorithm,"computeHmac",()=>t.computeHmac,"ripemd160",()=>t.ripemd160,"sha256",()=>t.sha256,"sha512",()=>t.sha512],245075)},29326,e=>{"use strict";e.s([],343522),e.i(343522);var t=e.i(561858),n=e.i(5479);e.s(["randomBytes",()=>t.randomBytes,"shuffled",()=>n.shuffled],29326)},567246,e=>{"use strict";var t=e.i(402629),n=e.i(929195),r=e.i(934424);e.s([],772955),e.i(772955),e.s(["UnicodeNormalizationForm",()=>r.UnicodeNormalizationForm,"Utf8ErrorFuncs",()=>r.Utf8ErrorFuncs,"Utf8ErrorReason",()=>r.Utf8ErrorReason,"_toEscapedUtf8String",()=>r._toEscapedUtf8String,"formatBytes32String",()=>t.formatBytes32String,"nameprep",()=>n.nameprep,"parseBytes32String",()=>t.parseBytes32String,"toUtf8Bytes",()=>r.toUtf8Bytes,"toUtf8CodePoints",()=>r.toUtf8CodePoints,"toUtf8String",()=>r.toUtf8String],567246)},701248,(e,t,n)=>{"use strict";var r=e.e&&e.e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.formatBytes32String=n.Utf8ErrorFuncs=n.toUtf8String=n.toUtf8CodePoints=n.toUtf8Bytes=n._toEscapedUtf8String=n.nameprep=n.hexDataSlice=n.hexDataLength=n.hexZeroPad=n.hexValue=n.hexStripZeros=n.hexConcat=n.isHexString=n.hexlify=n.base64=n.base58=n.TransactionDescription=n.LogDescription=n.Interface=n.SigningKey=n.HDNode=n.defaultPath=n.isBytesLike=n.isBytes=n.zeroPad=n.stripZeros=n.concat=n.arrayify=n.shallowCopy=n.resolveProperties=n.getStatic=n.defineReadOnly=n.deepCopy=n.checkProperties=n.poll=n.fetchJson=n._fetchData=n.RLP=n.Logger=n.checkResultErrors=n.FormatTypes=n.ParamType=n.FunctionFragment=n.EventFragment=n.ErrorFragment=n.ConstructorFragment=n.Fragment=n.defaultAbiCoder=n.AbiCoder=void 0,n.Indexed=n.Utf8ErrorReason=n.UnicodeNormalizationForm=n.SupportedAlgorithm=n.mnemonicToSeed=n.isValidMnemonic=n.entropyToMnemonic=n.mnemonicToEntropy=n.getAccountPath=n.verifyTypedData=n.verifyMessage=n.recoverPublicKey=n.computePublicKey=n.recoverAddress=n.computeAddress=n.getJsonWalletAddress=n.TransactionTypes=n.serializeTransaction=n.parseTransaction=n.accessListify=n.joinSignature=n.splitSignature=n.soliditySha256=n.solidityKeccak256=n.solidityPack=n.shuffled=n.randomBytes=n.sha512=n.sha256=n.ripemd160=n.keccak256=n.computeHmac=n.commify=n.parseUnits=n.formatUnits=n.parseEther=n.formatEther=n.isAddress=n.getCreate2Address=n.getContractAddress=n.getIcapAddress=n.getAddress=n._TypedDataEncoder=n.id=n.isValidName=n.namehash=n.hashMessage=n.dnsEncode=n.parseBytes32String=void 0;var s=e.r(341494);Object.defineProperty(n,"AbiCoder",{enumerable:!0,get:function(){return s.AbiCoder}}),Object.defineProperty(n,"checkResultErrors",{enumerable:!0,get:function(){return s.checkResultErrors}}),Object.defineProperty(n,"ConstructorFragment",{enumerable:!0,get:function(){return s.ConstructorFragment}}),Object.defineProperty(n,"defaultAbiCoder",{enumerable:!0,get:function(){return s.defaultAbiCoder}}),Object.defineProperty(n,"ErrorFragment",{enumerable:!0,get:function(){return s.ErrorFragment}}),Object.defineProperty(n,"EventFragment",{enumerable:!0,get:function(){return s.EventFragment}}),Object.defineProperty(n,"FormatTypes",{enumerable:!0,get:function(){return s.FormatTypes}}),Object.defineProperty(n,"Fragment",{enumerable:!0,get:function(){return s.Fragment}}),Object.defineProperty(n,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}}),Object.defineProperty(n,"Indexed",{enumerable:!0,get:function(){return s.Indexed}}),Object.defineProperty(n,"Interface",{enumerable:!0,get:function(){return s.Interface}}),Object.defineProperty(n,"LogDescription",{enumerable:!0,get:function(){return s.LogDescription}}),Object.defineProperty(n,"ParamType",{enumerable:!0,get:function(){return s.ParamType}}),Object.defineProperty(n,"TransactionDescription",{enumerable:!0,get:function(){return s.TransactionDescription}});var l=e.r(574662);Object.defineProperty(n,"getAddress",{enumerable:!0,get:function(){return l.getAddress}}),Object.defineProperty(n,"getCreate2Address",{enumerable:!0,get:function(){return l.getCreate2Address}}),Object.defineProperty(n,"getContractAddress",{enumerable:!0,get:function(){return l.getContractAddress}}),Object.defineProperty(n,"getIcapAddress",{enumerable:!0,get:function(){return l.getIcapAddress}}),Object.defineProperty(n,"isAddress",{enumerable:!0,get:function(){return l.isAddress}}),n.base64=a(e.r(692153));var o=e.r(286106);Object.defineProperty(n,"base58",{enumerable:!0,get:function(){return o.Base58}});var u=e.r(910440);Object.defineProperty(n,"arrayify",{enumerable:!0,get:function(){return u.arrayify}}),Object.defineProperty(n,"concat",{enumerable:!0,get:function(){return u.concat}}),Object.defineProperty(n,"hexConcat",{enumerable:!0,get:function(){return u.hexConcat}}),Object.defineProperty(n,"hexDataSlice",{enumerable:!0,get:function(){return u.hexDataSlice}}),Object.defineProperty(n,"hexDataLength",{enumerable:!0,get:function(){return u.hexDataLength}}),Object.defineProperty(n,"hexlify",{enumerable:!0,get:function(){return u.hexlify}}),Object.defineProperty(n,"hexStripZeros",{enumerable:!0,get:function(){return u.hexStripZeros}}),Object.defineProperty(n,"hexValue",{enumerable:!0,get:function(){return u.hexValue}}),Object.defineProperty(n,"hexZeroPad",{enumerable:!0,get:function(){return u.hexZeroPad}}),Object.defineProperty(n,"isBytes",{enumerable:!0,get:function(){return u.isBytes}}),Object.defineProperty(n,"isBytesLike",{enumerable:!0,get:function(){return u.isBytesLike}}),Object.defineProperty(n,"isHexString",{enumerable:!0,get:function(){return u.isHexString}}),Object.defineProperty(n,"joinSignature",{enumerable:!0,get:function(){return u.joinSignature}}),Object.defineProperty(n,"zeroPad",{enumerable:!0,get:function(){return u.zeroPad}}),Object.defineProperty(n,"splitSignature",{enumerable:!0,get:function(){return u.splitSignature}}),Object.defineProperty(n,"stripZeros",{enumerable:!0,get:function(){return u.stripZeros}});var c=e.r(741899);Object.defineProperty(n,"_TypedDataEncoder",{enumerable:!0,get:function(){return c._TypedDataEncoder}}),Object.defineProperty(n,"dnsEncode",{enumerable:!0,get:function(){return c.dnsEncode}}),Object.defineProperty(n,"hashMessage",{enumerable:!0,get:function(){return c.hashMessage}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return c.id}}),Object.defineProperty(n,"isValidName",{enumerable:!0,get:function(){return c.isValidName}}),Object.defineProperty(n,"namehash",{enumerable:!0,get:function(){return c.namehash}});var d=e.r(403068);Object.defineProperty(n,"defaultPath",{enumerable:!0,get:function(){return d.defaultPath}}),Object.defineProperty(n,"entropyToMnemonic",{enumerable:!0,get:function(){return d.entropyToMnemonic}}),Object.defineProperty(n,"getAccountPath",{enumerable:!0,get:function(){return d.getAccountPath}}),Object.defineProperty(n,"HDNode",{enumerable:!0,get:function(){return d.HDNode}}),Object.defineProperty(n,"isValidMnemonic",{enumerable:!0,get:function(){return d.isValidMnemonic}}),Object.defineProperty(n,"mnemonicToEntropy",{enumerable:!0,get:function(){return d.mnemonicToEntropy}}),Object.defineProperty(n,"mnemonicToSeed",{enumerable:!0,get:function(){return d.mnemonicToSeed}});var p=e.r(94653);Object.defineProperty(n,"getJsonWalletAddress",{enumerable:!0,get:function(){return p.getJsonWalletAddress}});var m=e.r(511782);Object.defineProperty(n,"keccak256",{enumerable:!0,get:function(){return m.keccak256}});var y=e.r(504242);Object.defineProperty(n,"Logger",{enumerable:!0,get:function(){return y.Logger}});var f=e.r(245075);Object.defineProperty(n,"computeHmac",{enumerable:!0,get:function(){return f.computeHmac}}),Object.defineProperty(n,"ripemd160",{enumerable:!0,get:function(){return f.ripemd160}}),Object.defineProperty(n,"sha256",{enumerable:!0,get:function(){return f.sha256}}),Object.defineProperty(n,"sha512",{enumerable:!0,get:function(){return f.sha512}});var x=e.r(912132);Object.defineProperty(n,"solidityKeccak256",{enumerable:!0,get:function(){return x.keccak256}}),Object.defineProperty(n,"solidityPack",{enumerable:!0,get:function(){return x.pack}}),Object.defineProperty(n,"soliditySha256",{enumerable:!0,get:function(){return x.sha256}});var g=e.r(29326);Object.defineProperty(n,"randomBytes",{enumerable:!0,get:function(){return g.randomBytes}}),Object.defineProperty(n,"shuffled",{enumerable:!0,get:function(){return g.shuffled}});var b=e.r(816246);Object.defineProperty(n,"checkProperties",{enumerable:!0,get:function(){return b.checkProperties}}),Object.defineProperty(n,"deepCopy",{enumerable:!0,get:function(){return b.deepCopy}}),Object.defineProperty(n,"defineReadOnly",{enumerable:!0,get:function(){return b.defineReadOnly}}),Object.defineProperty(n,"getStatic",{enumerable:!0,get:function(){return b.getStatic}}),Object.defineProperty(n,"resolveProperties",{enumerable:!0,get:function(){return b.resolveProperties}}),Object.defineProperty(n,"shallowCopy",{enumerable:!0,get:function(){return b.shallowCopy}}),n.RLP=a(e.r(540247));var h=e.r(655171);Object.defineProperty(n,"computePublicKey",{enumerable:!0,get:function(){return h.computePublicKey}}),Object.defineProperty(n,"recoverPublicKey",{enumerable:!0,get:function(){return h.recoverPublicKey}}),Object.defineProperty(n,"SigningKey",{enumerable:!0,get:function(){return h.SigningKey}});var v=e.r(567246);Object.defineProperty(n,"formatBytes32String",{enumerable:!0,get:function(){return v.formatBytes32String}}),Object.defineProperty(n,"nameprep",{enumerable:!0,get:function(){return v.nameprep}}),Object.defineProperty(n,"parseBytes32String",{enumerable:!0,get:function(){return v.parseBytes32String}}),Object.defineProperty(n,"_toEscapedUtf8String",{enumerable:!0,get:function(){return v._toEscapedUtf8String}}),Object.defineProperty(n,"toUtf8Bytes",{enumerable:!0,get:function(){return v.toUtf8Bytes}}),Object.defineProperty(n,"toUtf8CodePoints",{enumerable:!0,get:function(){return v.toUtf8CodePoints}}),Object.defineProperty(n,"toUtf8String",{enumerable:!0,get:function(){return v.toUtf8String}}),Object.defineProperty(n,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return v.Utf8ErrorFuncs}});var C=e.r(525486);Object.defineProperty(n,"accessListify",{enumerable:!0,get:function(){return C.accessListify}}),Object.defineProperty(n,"computeAddress",{enumerable:!0,get:function(){return C.computeAddress}}),Object.defineProperty(n,"parseTransaction",{enumerable:!0,get:function(){return C.parse}}),Object.defineProperty(n,"recoverAddress",{enumerable:!0,get:function(){return C.recoverAddress}}),Object.defineProperty(n,"serializeTransaction",{enumerable:!0,get:function(){return C.serialize}}),Object.defineProperty(n,"TransactionTypes",{enumerable:!0,get:function(){return C.TransactionTypes}});var j=e.r(927588);Object.defineProperty(n,"commify",{enumerable:!0,get:function(){return j.commify}}),Object.defineProperty(n,"formatEther",{enumerable:!0,get:function(){return j.formatEther}}),Object.defineProperty(n,"parseEther",{enumerable:!0,get:function(){return j.parseEther}}),Object.defineProperty(n,"formatUnits",{enumerable:!0,get:function(){return j.formatUnits}}),Object.defineProperty(n,"parseUnits",{enumerable:!0,get:function(){return j.parseUnits}});var N=e.r(855383);Object.defineProperty(n,"verifyMessage",{enumerable:!0,get:function(){return N.verifyMessage}}),Object.defineProperty(n,"verifyTypedData",{enumerable:!0,get:function(){return N.verifyTypedData}});var T=e.r(801444);Object.defineProperty(n,"_fetchData",{enumerable:!0,get:function(){return T._fetchData}}),Object.defineProperty(n,"fetchJson",{enumerable:!0,get:function(){return T.fetchJson}}),Object.defineProperty(n,"poll",{enumerable:!0,get:function(){return T.poll}});var w=e.r(245075);Object.defineProperty(n,"SupportedAlgorithm",{enumerable:!0,get:function(){return w.SupportedAlgorithm}});var P=e.r(567246);Object.defineProperty(n,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return P.UnicodeNormalizationForm}}),Object.defineProperty(n,"Utf8ErrorReason",{enumerable:!0,get:function(){return P.Utf8ErrorReason}})},882858,e=>{"use strict";var t=e.i(167207),n=e.i(793037),r=e.i(506960),i=e.i(807805),a=e.i(711746),s=e.i(854769);e.i(293965);var l=e.i(459425),o=e.i(497339),u=e.i(208196),c=e.i(813568),d=e.i(853854);e.i(961);var p=e.i(699033),m=e.i(302747),y=e.i(647751),f=e.i(426370),x=e.i(136397),g=e.i(618011),b=e.i(358623);let h=({title:e,children:n,headerClassName:r,contentClassName:i})=>{let a=(0,o.useTranslations)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.DialogHeader,{className:r,children:(0,t.jsx)(p.DialogTitle,{children:a(e)})}),(0,t.jsx)(p.DialogContentWrapper,{className:i,children:n})]})};h.CollectibleImage=({edition:e})=>{let{data:n,imageUrl:r}=(0,g.useGetNftInfo)(),i=(0,d.getReadableRarity)(n?.rarity),a=x.rarityGradientMap[i];return(0,t.jsxs)("div",{className:"pb-4",children:[(0,t.jsx)("div",{className:"absolute h-[120px] w-full lg:h-[200px]",children:(0,t.jsx)(c.default,{priority:!0,src:r??"",alt:"NFT Image",className:"absolute size-full opacity-35 blur-3xl",fill:!0})}),(0,t.jsxs)("div",{className:"relative mx-auto w-1/2 overflow-hidden rounded-lg p-[2px]",children:[(0,t.jsx)("span",{className:(0,s.twJoin)("absolute inset-[-1000%] animate-[spin_7s_linear_infinite] opacity-50",a)}),(0,t.jsxs)("div",{className:"relative z-10 flex items-center justify-center overflow-hidden rounded-t-lg border-0 bg-main backdrop-blur-md max-lg:max-h-[180px] lg:max-h-[200px]",children:[(0,t.jsx)(c.default,{priority:!0,src:r??"",alt:"NFT Image",className:"z-20 rounded-lg object-contain p-2 max-md:max-h-[120px] md:max-h-[200px]",width:200,height:200}),(0,t.jsx)(c.default,{priority:!0,src:r??"",alt:"NFT Image",className:"bg-cover opacity-50 blur-xl",fill:!0})]}),(0,t.jsxs)("div",{style:{borderRadius:"0 0 8px 8px"},className:"relative z-10 flex flex-col overflow-hidden bg-main p-2 text-lg",children:[(0,t.jsx)(f.Typography,{className:"truncate text-nowrap",children:n?.name}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex max-h-[20px] items-center",children:(0,t.jsx)(u.RarityBadge,{size:"xs",rarity:(0,d.getReadableRarity)(n?.rarity)})}),(0,t.jsxs)(f.Typography,{variant:"sm",gray:!0,children:["#",e]})]})]})]})]})},h.ModalPriceDisplay=({title:e,usdPrice:n,omiPrice:r,addIndicator:i=!1,typography:a,isLoading:s})=>{if((0,o.useTranslations)(),s)return(0,t.jsx)(m.Skeleton,{className:"h-[45px] w-full"});let l=r&&0>Number(r);return(0,t.jsxs)("div",{className:"flex justify-between gap-5",children:[(0,t.jsx)(f.Typography,{...a?.omi,children:e}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)(f.Typography,{...a?.omi,children:[i&&(0,t.jsx)("span",{children:"+"}),n?(0,t.jsx)(y.OmiUsdConverter,{usdPrice:Number(n)}):(0,b.formatNumber)(Number(r),0)," ","OMI"]}),(0,t.jsxs)(f.Typography,{...a?.usd,variant:"sm",gray:!0,children:["= ",l?"-$":"$",r?(0,t.jsx)(y.OmiUsdConverter,{omiPrice:Math.abs(Number(r))}):(0,b.formatNumber)(Math.abs(Number(n)),2)]})]})]})};var v=e.i(546526);let C=()=>{let{goMain:e}=(0,v.useMarketplace)(),n=(0,o.useTranslations)();return(0,t.jsx)(h,{title:"Different buy initiated",children:(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,t.jsx)("svg",{width:"80",height:"71",viewBox:"0 0 80 71",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M78.4817 58.9551L47.0508 4.37681C46.3289 3.14935 45.2989 2.13172 44.0629 1.42468C42.8268 0.717635 41.4275 0.345703 40.0035 0.345703C38.5795 0.345703 37.1801 0.717635 35.9441 1.42468C34.708 2.13172 33.678 3.14935 32.9561 4.37681L1.52519 58.9551C0.833344 60.1394 0.46875 61.4863 0.46875 62.8579C0.46875 64.2295 0.833344 65.5764 1.52519 66.7607C2.23744 67.9968 3.26606 69.0209 4.50528 69.7276C5.7445 70.4344 7.14961 70.7984 8.57612 70.7821H71.4308C72.8561 70.7971 74.2597 70.4325 75.4976 69.7258C76.7354 69.0191 77.7629 67.9957 78.4746 66.7607C79.1675 65.577 79.5333 64.2305 79.5346 62.8589C79.5358 61.4873 79.1725 60.14 78.4817 58.9551ZM74.7406 64.6009C74.4048 65.1784 73.9211 65.6559 73.3393 65.9844C72.7576 66.3129 72.0988 66.4803 71.4308 66.4696H8.57612C7.90813 66.4803 7.24936 66.3129 6.6676 65.9844C6.08585 65.6559 5.60215 65.1784 5.26628 64.6009C4.95211 64.0725 4.78629 63.4691 4.78629 62.8543C4.78629 62.2395 4.95211 61.6362 5.26628 61.1077L36.6936 6.52946C37.0372 5.95872 37.5225 5.48651 38.1025 5.15871C38.6824 4.8309 39.3373 4.65864 40.0035 4.65864C40.6696 4.65864 41.3245 4.8309 41.9045 5.15871C42.4844 5.48651 42.9697 5.95872 43.3133 6.52946L74.7442 61.1077C75.0579 61.6365 75.2231 62.24 75.2224 62.8548C75.2218 63.4696 75.0554 64.0728 74.7406 64.6009ZM37.8472 42.7509V28.3759C37.8472 27.804 38.0744 27.2555 38.4788 26.8512C38.8831 26.4468 39.4316 26.2196 40.0035 26.2196C40.5753 26.2196 41.1238 26.4468 41.5282 26.8512C41.9325 27.2555 42.1597 27.804 42.1597 28.3759V42.7509C42.1597 43.3227 41.9325 43.8712 41.5282 44.2756C41.1238 44.6799 40.5753 44.9071 40.0035 44.9071C39.4316 44.9071 38.8831 44.6799 38.4788 44.2756C38.0744 43.8712 37.8472 43.3227 37.8472 42.7509ZM43.5972 55.6884C43.5972 56.3991 43.3864 57.094 42.9916 57.685C42.5967 58.2759 42.0354 58.7366 41.3787 59.0086C40.7221 59.2806 39.9995 59.3517 39.3024 59.2131C38.6052 59.0744 37.9649 58.7321 37.4623 58.2295C36.9597 57.7269 36.6174 57.0866 36.4788 56.3895C36.3401 55.6924 36.4113 54.9698 36.6833 54.3131C36.9553 53.6564 37.4159 53.0952 38.0069 52.7003C38.5979 52.3054 39.2927 52.0946 40.0035 52.0946C40.9566 52.0946 41.8707 52.4732 42.5446 53.1472C43.2186 53.8212 43.5972 54.7352 43.5972 55.6884Z",fill:"white"})}),(0,t.jsx)("p",{className:"text-center",children:n("You can only initiate one buy process at a time, Please wait for finishing the previous buy process,")}),(0,t.jsx)(l.Button,{variant:"blue",onClick:e,className:"h-12 w-full text-base",children:n("Close Window")})]})})})};function j(e){return(0,t.jsxs)("svg",{...e,width:"176",height:"52",viewBox:"0 0 176 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsxs)("g",{clipPath:"url(#clip0_10965_8055)",children:[(0,t.jsx)("path",{d:"M158.161 10.3702C152.18 10.3702 148.842 16.3727 147.512 21.449C151.483 20.8279 155.963 20.215 159.51 18.173C161.118 17.1972 162.209 15.7736 162.209 13.8387C162.209 13.0031 161.886 12.2171 161.245 11.4778C160.603 10.7385 159.573 10.3702 158.161 10.3702ZM173.964 40.8501C174.366 41.342 174.402 42.0429 174.016 42.5486C168.848 49.3454 159.51 51.6981 152.62 51.6981C147.198 51.6981 141.283 49.8237 137.441 45.9182C133.518 41.7818 131.852 36.1641 131.852 30.5518C131.852 25.3848 132.986 20.259 135.272 15.6196C137.458 11.2497 140.708 7.33592 144.763 4.59026C148.969 1.78688 153.975 0.302734 159.025 0.302734C163.434 0.302734 168 1.51753 171.359 4.49407C173.893 6.6818 175.696 9.85622 175.696 13.2615C175.696 15.5427 175.248 17.6288 174.347 19.5224C173.447 21.3858 171.874 23.0541 169.624 24.5327C167.408 26.0086 164.406 27.262 160.614 28.2899C156.855 29.3178 152.119 30.1203 146.399 30.6975C145.777 36.1641 148.641 40.523 154.977 40.523C158.739 40.523 161.303 39.366 163.588 37.6922C166.251 35.7435 169.919 35.8837 172.001 38.4425L173.961 40.8501H173.964Z",fill:"white"}),(0,t.jsx)("path",{d:"M98.8694 48.1086C96.391 35.8727 91.4232 14.0723 87.8327 1.69618C87.6314 0.998083 88.1521 0.302734 88.879 0.302734H94.3724C99.4089 0.302734 103.806 3.75749 104.82 8.68266C106.621 17.4309 107.745 24.8323 109.182 32.8C115.32 19.2201 117.239 13.8689 121.425 5.86553C123.237 2.39703 126.883 0.302734 130.801 0.302734H138.581C139.39 0.302734 139.916 1.15475 139.55 1.87758L115.736 48.7106C115.315 49.5378 114.56 50.1397 113.64 50.2799C112.321 50.4778 110.096 50.7141 106.973 50.7141C104.333 50.7141 102.421 50.5437 101.163 50.3734C99.9737 50.2112 99.1063 49.285 98.8664 48.1086H98.8694Z",fill:"white"}),(0,t.jsx)("path",{d:"M102.604 49.0541C101.986 50.6317 100.323 50.2496 99.7232 49.678C99.2964 49.274 98.9962 48.7243 98.8721 48.1086C96.3936 35.8699 91.4264 14.0668 87.8323 1.69343C87.6316 0.998083 88.1548 0.302734 88.8817 0.302734H94.4661C99.4917 0.302734 103.824 3.8317 104.834 8.74584C106.627 17.4666 107.747 24.8516 109.185 32.8L102.604 49.0513V49.0541Z",fill:"white"}),(0,t.jsx)("path",{d:"M102.604 49.0541C101.986 50.6317 100.323 50.2496 99.7232 49.678C99.2964 49.274 98.9962 48.7243 98.8721 48.1086C96.3936 35.8699 91.4264 14.0668 87.8323 1.69343C87.6316 0.998083 88.1548 0.302734 88.8817 0.302734H94.4661C99.4917 0.302734 103.824 3.8317 104.834 8.74584C106.627 17.4666 107.747 24.8516 109.185 32.8L102.604 49.0513V49.0541Z",fill:"url(#paint0_linear_10965_8055)"}),(0,t.jsx)("path",{d:"M70.6759 10.3702C64.6949 10.3702 61.3576 16.3727 60.0276 21.449C63.9982 20.8279 68.4789 20.215 72.0255 18.173C73.6336 17.1972 74.7239 15.7736 74.7239 13.8387C74.7239 13.0031 74.4021 12.2171 73.7602 11.4778C73.1188 10.7385 72.0888 10.3702 70.6759 10.3702ZM86.4798 40.8501C86.8818 41.342 86.918 42.0429 86.5322 42.5486C81.3631 49.3454 72.0255 51.6981 65.1355 51.6981C59.7137 51.6981 53.7987 49.8237 49.9572 45.9182C46.0332 41.7818 44.3672 36.1641 44.3672 30.5518C44.3672 25.3848 45.5017 20.259 47.7873 15.6196C49.9738 11.2497 53.2231 7.33592 57.2794 4.59026C61.4842 1.78688 66.4905 0.302734 71.5409 0.302734C75.9493 0.302734 80.5151 1.51753 83.8747 4.49407C86.408 6.6818 88.212 9.85622 88.212 13.2615C88.212 15.5427 87.763 17.6288 86.8625 19.5224C85.962 21.3858 84.3895 23.0541 82.14 24.5327C79.9232 26.0086 76.9215 27.262 73.1297 28.2899C69.371 29.3178 64.6347 30.1203 58.9151 30.6975C58.2927 36.1641 61.1569 40.523 67.4929 40.523C71.2546 40.523 73.818 39.366 76.1036 37.6922C78.7665 35.7435 82.4348 35.8837 84.5166 38.4425L86.4774 40.8501H86.4798Z",fill:"white"}),(0,t.jsx)("path",{d:"M11.3851 48.1086C8.90674 35.8727 3.93905 14.0723 0.348202 1.69618C0.14718 0.998083 0.667641 0.302734 1.39462 0.302734H6.88829C11.9248 0.302734 16.3226 3.75749 17.3359 8.68266C19.1369 17.4309 20.2604 24.8323 21.6978 32.8C27.8358 19.2201 29.7552 13.8689 33.9409 5.86553C35.7528 2.39703 39.3987 0.302734 43.3173 0.302734H51.0965C51.9061 0.302734 52.4321 1.15475 52.0659 1.87758L28.2517 48.7106C27.8304 49.5378 27.0759 50.1397 26.1561 50.2799C24.837 50.4778 22.612 50.7141 19.4893 50.7141C16.8485 50.7141 14.9374 50.5437 13.679 50.3734C12.4894 50.2112 11.622 49.285 11.3824 48.1086H11.3851Z",fill:"white"}),(0,t.jsx)("path",{d:"M15.119 49.0541C14.5022 50.6317 12.8389 50.2496 12.2386 49.678C11.8118 49.274 11.5116 48.7243 11.3877 48.1086C8.90934 35.8699 3.94164 14.0668 0.348042 1.69343C0.147021 0.998083 0.670225 0.302734 1.39721 0.302734H6.98178C12.0073 0.302734 16.3389 3.8317 17.3495 8.74584C19.1422 17.4666 20.2629 24.8516 21.7004 32.8L15.119 49.0513V49.0541Z",fill:"white"}),(0,t.jsx)("path",{d:"M15.119 49.0541C14.5022 50.6317 12.8389 50.2496 12.2386 49.678C11.8118 49.274 11.5116 48.7243 11.3877 48.1086C8.90934 35.8699 3.94164 14.0668 0.348042 1.69343C0.147021 0.998083 0.670225 0.302734 1.39721 0.302734H6.98178C12.0073 0.302734 16.3389 3.8317 17.3495 8.74584C19.1422 17.4666 20.2629 24.8516 21.7004 32.8L15.119 49.0513V49.0541Z",fill:"url(#paint1_linear_10965_8055)"})]}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"paint0_linear_10965_8055",x1:"95.4081",y1:"1.19597",x2:"104.676",y2:"41.534",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#0085FF",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#0085FF",stopOpacity:"0.2"})]}),(0,t.jsxs)("linearGradient",{id:"paint1_linear_10965_8055",x1:"7.9235",y1:"1.19597",x2:"17.1916",y2:"41.534",gradientUnits:"userSpaceOnUse",children:[(0,t.jsx)("stop",{stopColor:"#0085FF",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#0085FF",stopOpacity:"0.2"})]}),(0,t.jsx)("clipPath",{id:"clip0_10965_8055",children:(0,t.jsx)("rect",{width:"176",height:"52",fill:"white"})})]})]})}var N=e.i(309528),T=e.i(219998),w=e.i(514519);let P=()=>{let e=(0,o.useTranslations)(),{veveAuthUrl:n}=(0,N.useSetVeveSession)(),{user:r,login:i,ready:a}=(0,w.useAuth)();return(0,t.jsx)(h,{title:e("Authenticate with VeVe"),children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6",children:[(0,t.jsx)(j,{}),(0,t.jsx)("p",{className:"text-balance text-center",children:e("veveSessionTimeout")}),(0,t.jsx)(S,{isLoading:!a,children:r?(0,t.jsx)(T.Link,{href:n,className:"w-full",children:(0,t.jsx)(l.Button,{asChild:!0,variant:"blue",className:"h-12 w-full text-base",children:e("Continue")})}):(0,t.jsx)(l.Button,{variant:"blue",onClick:i,className:"text-xl",children:e("Login to purchase")})})]})})},S=({isLoading:e,children:n})=>e?(0,t.jsx)(m.Skeleton,{className:"h-[40px] w-40 rounded-lg"}):n;var O=e.i(779957),E=e.i(750306),_=e.i(501126),I=e.i(320773),L=e.i(101240),k=e.i(355481);let A=()=>{let e=(0,o.useTranslations)(),{tokenData:n,smartAccount:r}=(0,O.useWalletContext)(),{user:i,login:a}=(0,w.useAuth)(),{role:u,isLoading:c}=(0,I.useUserMetadata)(),d=u===_.USER_ROLE.VERIFIED&&!c,{data:p,isLoading:m}=L.trpc.verifiedVeve.getLatestListingsFees.useQuery(void 0),{data:x,isLoading:C}=(0,g.useGetNftInfo)(),j=!n.omi||c||m||C,{currentItemToBuy:P,goConfirmBuy:S}=(0,v.useMarketplace)(),{veveAuthUrl:A}=(0,N.useSetVeveSession)(),M=Number(n.omi?.usdPrice),F=Number(p?.buyerFee),D=Number(P?.current_price),R=Number(x?.floor_market_price)/M,B=D-R,U=B/R*100,V=(parseInt(n.omi?.balance._hex)/1e18||0)<(Number(P?.current_price)||0),W=!d||!i||V||null===P||void 0===n.omi||!M&&!F,{data:z,isLoading:H}=(0,k.useProfile)();return H||P?.seller_id?.toLowerCase()!==z?.[0]?.user_id?.toLowerCase()?(0,t.jsxs)(h,{title:"Purchase initialized",children:[(0,t.jsx)(h.CollectibleImage,{edition:Number(P?.edition??0)}),(0,t.jsx)("div",{className:"flex justify-between",children:(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)(f.Typography,{className:"flex w-full justify-between text-xl",children:[e("Listing price"),(0,t.jsxs)("span",{children:[(0,b.formatNumber)(Number(P?.current_price),0)," ",(0,t.jsx)("span",{children:"OMI"})]})]}),(0,t.jsxs)("div",{className:"flex w-full justify-between",children:[U>=100?(0,t.jsxs)(f.Typography,{variant:"sm",className:"font-medium text-red-500",children:[Math.round(U),"% ",e("above floor price")]}):(0,t.jsx)(E.LoadingSwap,{isLoading:j&&!U,height:"20px",children:(0,t.jsxs)("span",{className:"text-sm text-secondary",children:[Math.round(U),"% ",e("of veve floor price")]})}),(0,t.jsxs)("span",{className:"text-sm text-secondary",children:["= $",(0,t.jsx)(y.OmiUsdConverter,{omiPrice:Number(P?.current_price)})]})]})]})}),(0,t.jsx)("div",{className:"h-px w-full bg-gray-border"}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:j,title:"Veve Floor Price",usdPrice:Number(x?.floor_market_price)}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:j,title:"Difference",omiPrice:B,addIndicator:U>=100}),!i&&(0,t.jsx)(l.Button,{className:"text-base",variant:"blue",size:"long",onClick:a,children:e("Login to purchase")}),i&&!d&&(0,t.jsx)(l.Button,{className:"text-base",variant:"blue",href:A,asChild:!0,children:(0,t.jsx)(T.Link,{href:A,children:e("authenticateWithVeve")})}),d&&(0,t.jsx)(E.LoadingSwap,{isLoading:j,height:"48px",width:"100%",children:(0,t.jsx)(l.Button,{className:(0,s.twJoin)("h-12 w-full text-base",U>=200&&"!bg-error"),disabled:W,variant:"blue",onClick:()=>S(P),children:e(V?"Insufficient balance":"Continue")})})]}):null};var M=e.i(210634),F=e.i(546501),D=e.i(302944),R=e.i(424627),B=e.i(757458),U=e.i(64228),V=e.i(937536),W=e.i(480136),z=e.i(546780),H=e.i(649009),K=e.i(839390),Z=e.i(331118),J=e.i(932088);let G=e=>{let n=(0,o.useTranslations)(),{variant:r="blue",size:i="sm",disabled:a=!1,className:s="text-nowrap text-xs sm:text-sm md:text-lg",insufficientBalance:u}=e,{success:c,error:d,currentItemToBuy:p,goVeveRegistration:m,goBaseLoading:y,setCurrentBoughtItem:f}=(0,v.useMarketplace)(),{updateParams:x}=(0,Z.useMarketplaceParams)(),{state:b,wallet:h,smartAccount:C,tokenData:j}=(0,O.useWalletContext)(),{user:N}=(0,B.usePrivy)(),T=L.trpc.verifiedVeve.settleListing.useMutation(),{data:w}=(0,g.useGetNftInfo)(),P=Number(j.omi?.usdPrice),S=Number(w?.floor_market_price)/P,E=(Number(p?.current_price)-S)/S*100,{addForcePendingAsync:_,clearForcePendingItem:I}=(0,K.useForcePending)(),k=(0,J.getVeveSessionFromLocalStorage)(),A=(0,J.getIfVeveSessionIsValid)(k);async function M(){y();try{if(!A)return void d("Invalid token")}catch(e){if("INVALID_TOKEN"===e.message){(0,J.removeVeveSessionFromLocalStorage)(),d(n("invalidTokenError"));return}d(e.message);return}if(!p)return void d("No item to buy");if(void 0!==h){if(!k)return void d(n("veveSessionTimeout"));try{await _(p?.nft_id),f(p.nft_id);let e=crypto.randomUUID(),t=Number(p.listing_id),n=k.access_token;C?.address;let r=await T.mutateAsync({listingId:t,buyerAuthToken:n,privyId:N?.id??"",uuid:e});if("error"in r.response)return void d(r.response.error.status.message);m();let{signature:i}=r.response.payload,a=await (0,H.getSmartAccountClient)(h,b.chain);await a.writeContract({abi:V.erc20Abi,address:b.chain.contracts.omi.address,functionName:"approve",args:[W.MARKETPLACE_CONTRACT,BigInt(2e28)]});let s=("0x"+e.replace(/-/g,"")).padEnd(34,"0"),l=await a.writeContract({abi:D.default,address:W.MARKETPLACE_CONTRACT,functionName:"startSettlement",args:[{listingId:t,correlationId:s,buyer:a.account.address},i]}),o=(0,U.createPublicClient)({chain:b.chain,transport:(0,R.getRpcTransport)(b.chain.id)}),u=await o.waitForTransactionReceipt({hash:l,confirmations:1});if("success"!==u.status){f(null),d("Transaction failed"+u.status);return}u.transactionHash&&(f(null),c()),x(z.MARKETPLACE_ROUTES.RECENT_ACTIVITY,null,null,null)}catch(r){console.error("err",r),I(p?.nft_id),f(null);let e=r.message,t="";if(e.includes("FUNCTION_INVOCATION_TIMEOUT")||e.includes("timeout")||e.includes("Request timeout")||e.includes("Connection timeout"))t=n("buyTimeoutError");else if(e.includes("JSON.parse: unexpected character")||e.includes("Unexpected token")||e.includes("JSON.parse"))t=n("buyServerError");else if(e.includes("Network Error")||e.includes("Failed to fetch")||e.includes("fetch")||e.includes("network"))t=n("buyNetworkConnectionError");else if(e.includes("transaction failed")||e.includes("Transaction failed")||e.includes("revert")||e.includes("execution reverted")||e.includes("insufficient funds")||e.includes("gas"))t=n("transactionFailedError");else e.includes("INVALID_TOKEN")||e.includes("Unauthorized")||e.includes("Authentication")?((0,J.removeVeveSessionFromLocalStorage)(),t=n("invalidTokenError")):t=n("buyGenericError");d(t)}}}if(void 0!==h)return(0,t.jsx)(l.Button,{variant:E>=200?"red":r,size:i,onClick:M,className:s,disabled:a,children:u?n("insufficientFunds"):n("Buy now")})};var Y=e.i(750644),$=e.i(68195);function Q(e){return e?e*$.MARKETPLACE_BUY_OMI_BURN_RATE:0}let q=()=>{let e=L.trpc.useUtils(),r=(0,o.useTranslations)(),[i,a]=(0,n.useState)(!1),[s,u]=(0,n.useState)(!1),{data:c}=(0,g.useGetNftInfo)(),{tokenData:d}=(0,O.useWalletContext)(),{user:p,login:m}=(0,w.useAuth)(),{isInactive:y}=(0,F.useMarketplaceStatus)(),{currentItemToBuy:x,goBuy:C}=(0,v.useMarketplace)();(0,n.useEffect)(()=>{let t=Number(x?.current_price),n=async()=>{await e.publicVeve.getRecommendedNfts.prefetch({price:t})};Number.isNaN(t)||0===t||n()},[x?.current_price,e.publicVeve.getRecommendedNfts]);let j=(0,J.getVeveSessionFromLocalStorage)(),N=(0,J.getIfVeveSessionIsValid)(j),{data:P,isLoading:S}=L.trpc.verifiedVeve.getLatestListingsFees.useQuery(),E=!d.omi||S,_=Number(d.omi?.usdPrice),I=Number(P?.buyerFee),k=Number(x?.current_price)*I/1e4,A=Number(x?.current_price)+k,D=Number(c?.floor_market_price)/_,R=(A-D)/D*100,B=parseInt(d.omi?.balance._hex??"0")/1e18<A,U=y||!i||!s&&R>=15||B||null===x||void 0===d.omi||void 0!==d.omi&&!_&&!I;return(0,t.jsxs)(h,{title:"Purchase initialized",contentClassName:"p-0",children:[(0,t.jsxs)(Y.InfoBanner,{children:[(0,t.jsx)(f.Typography,{variant:"sm",className:"text-white",children:r("You are burning")}),(0,t.jsxs)(f.Typography,{variant:"4xl",className:"font-extrabold text-white",children:[(0,b.formatNumber)(Q(Number(x?.current_price)),0)," OMI"]}),(0,t.jsx)(f.Typography,{variant:"sm",className:"text-white",children:r("thisWillUpdateYourStackRLeaderboardPosition")})]}),(0,t.jsxs)("div",{className:"w-full space-y-4 p-5",children:[(0,t.jsx)(h.CollectibleImage,{edition:Number(x?.edition??0)}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:E,title:r("You pay"),omiPrice:Number(A),typography:{omi:{variant:"lg"},usd:{variant:"sm"}}}),(0,t.jsx)("div",{className:"h-px w-full bg-gray-border"}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:E,title:r("Sell price"),omiPrice:Number(x?.current_price)}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:E,title:`${r("Success Fee")} (${I/100}%)`,omiPrice:k}),(0,t.jsxs)("div",{className:"mt-4",children:[null===p&&(0,t.jsx)(l.Button,{variant:"blue",className:"h-12 w-full text-base",onClick:m,children:r("Login to purchase")}),N&&(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(M.Checkbox,{id:"checkbox2",checked:i,onCheckedChange:()=>a(!i),classNames:{label:"text-xs text-secondary"},label:(0,t.jsxs)(t.Fragment,{children:[r("acknowledgeCollectible")," ",(0,t.jsx)(T.Link,{onClick:e=>e.stopPropagation(),href:"/terms-and-conditions",target:"_blank",className:"text-white duration-300 hover:text-[#6e94e4]",children:"StackR ToU"})," ",r("and")," ",(0,t.jsx)(T.Link,{onClick:e=>e.stopPropagation(),href:"https://www.veve.me/terms-conditions",target:"_blank",className:"text-white duration-300 hover:text-[#6e94e4]",rel:"noreferrer",children:r("veveToU")})]})}),R>=15&&(0,t.jsx)(M.Checkbox,{id:"checkbox",checked:s,onCheckedChange:()=>u(!s),classNames:{label:"text-xs text-secondary"},label:(0,t.jsxs)("span",{children:[r("I acknowledge that")," ",(0,t.jsx)("span",{className:"text-white",children:r("price is more than {quote}% of VeVe floor price",{quote:R.toFixed(0)})})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{onClick:()=>C(x),variant:"outline",className:"h-12 w-full text-base text-white",children:r("cancel")}),(0,t.jsx)(G,{className:"h-12 w-full text-base",disabled:U,insufficientBalance:B})]})]})]})]})]})};var X=e.i(604829),ee=e.i(593744);let et=()=>{let{currentItemToSell:e,calculateFee:r,goSell:i,sellPrice:a,setSellPrice:u}=(0,v.useMarketplace)(),{user:c}=(0,w.useAuth)(),{data:d,isLoading:p}=L.trpc.publicVeve.getElementFees.useQuery({elementId:e?.element_id||""},{enabled:!!e?.element_id}),{data:m,isLoading:f}=(0,g.useGetNftInfo)(),{tokenData:x,smartAccount:b}=(0,O.useWalletContext)(),C=p||f,j=Number(x.omi?.usdPrice),N=Number(a),T=Number(m?.floor_market_price)/j,P=(N-T)/T*100,[S,_]=(0,n.useState)("INITIATE"),I=r(Number(d?.success_fee),Number(a)),A=""===a||0===Number(a)||I>Number(a)||!e,M=(0,o.useTranslations)(),{data:F,isLoading:D}=(0,k.useProfile)();return e&&!D&&e?.owner_id?.toLowerCase()===F?.[0]?.user_id?.toLowerCase()?(0,t.jsxs)(h,{title:M("Listing initialized"),children:[(0,t.jsx)(h.CollectibleImage,{edition:Number(e?.edition??0)}),(0,t.jsx)("div",{className:"z-20 flex justify-between rounded-xl border border-gray-border p-4",children:(0,t.jsxs)("div",{className:"w-full space-y-1",children:[(0,t.jsxs)("div",{className:"flex w-full justify-between text-xl",children:[(0,t.jsx)("input",{type:"text",inputMode:"numeric",value:(0,X.inputNumberFormat)(a.toString()),onChange:e=>{let t=e.target.value;_("INITIATE");let n=t.replace(/[^0-9]/g,""),r=n.replace(/^0+/,"")||(n.length>0?"0":"");r.length<=12&&u(r)},placeholder:"0",className:"h-min w-full rounded-lg bg-transparent text-left no-underline outline-none"}),(0,t.jsx)("span",{children:"OMI"})]}),(0,t.jsxs)("div",{className:"flex w-full justify-between",children:[(0,t.jsx)("p",{className:(0,s.twJoin)("font-medium text-sm",(0,ee.inBetween)(P,[-15,100])||0===N?"text-secondary":"text-error"),children:N>0?Math.round(P)+"% "+M("above floor price"):M("type a listing price")}),(0,t.jsxs)("span",{className:"text-sm text-secondary",children:["= $",(0,t.jsx)(y.OmiUsdConverter,{omiPrice:N})]})]})]})}),(0,t.jsx)(l.Button,{className:"max-h-6 w-fit rounded-md !p-0 text-sm text-blue",size:"sm",variant:"textWhite",onClick:function(){_("INITIATE"),N<T&&u(T.toFixed(0))},children:M("Set to Veve floor price")}),(0,t.jsx)("div",{className:"h-px w-full bg-gray-border"}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:C,title:"Veve Floor Price",usdPrice:Number(m?.floor_market_price)}),(0,t.jsx)(E.LoadingSwap,{isLoading:C,height:"48px",width:"100%",children:(0,t.jsx)(l.Button,{className:(0,s.twJoin)("h-12 w-full text-wrap text-base","BELOW_15"===S&&!(0,ee.inBetween)(P,[-15,100])&&"bg-error hover:bg-red-500"),disabled:A,variant:"blue",onClick:function(){e&&("INITIATE"===S&&P<-15?_("BELOW_15"):i(e))},children:"INITIATE"===S?M("Initiate"):P<-15?M("You are about to list the collectible {percentageDifference}% below VeVe floor are you sure",{percentageDifference:Math.abs(P).toFixed(0)}):void 0})})]}):null},en=()=>(0,t.jsxs)("svg",{className:"animate-pulse",width:"92",height:"92",viewBox:"0 0 92 92",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("g",{clipPath:"url(#clip0_10965_7920)",children:(0,t.jsx)("path",{d:"M45.919 92C71.3699 92 92 71.4067 92 46C92 20.5933 71.3699 0 45.919 0C21.7746 0 1.9688 18.5398 0 42.1323H60.9077V49.8677H0C1.9688 73.4602 21.7746 92 45.919 92Z",fill:"white"})}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_10965_7920",children:(0,t.jsx)("rect",{width:"92",height:"92",fill:"white"})})})]});var er=e.i(655537);let ei=()=>{let e=(0,o.useTranslations)(),{variantAction:n}=(0,v.useMarketplace)(),r=function(){switch(n){case"sell":default:return{title:e("Creating listing on Base"),text:e("Creating listing on Base")};case"buy":return{title:e("Purchase registrated"),text:e("Settlement registered on Base")};case"removeListing":return{title:e("Creating remove listing on Base"),text:e("Creating remove listing on Base")}}}();return(0,t.jsx)(h,{title:r.title,children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-5",children:[(0,t.jsxs)("p",{className:"text-lg",children:[r.text,"..."]}),(0,t.jsx)(en,{}),(0,t.jsx)(er.ShinyText,{className:"text-lg",text:e("Please wait")+"..."})]})})};var ea=e.i(275912),es=e.i(736998);let el=()=>{let e=(0,o.useTranslations)(),{goMain:n,fetchError:r,errorCause:i,errorModalContent:a,variantAction:s,currentItemToSell:u,currentItemToBuy:c,currentItemToRemove:d,goSell:p,goBuy:m,goRemoveListing:y}=(0,v.useMarketplace)(),{data:x}=(0,g.useGetNftInfo)(),b=function(){switch(s){case"sell":default:return{title:e("Listing failed"),text:e("We've been unabled to list your item"),data:u};case"buy":return{title:e("Transaction failed"),text:e("We've been unabled to complete your transaction"),data:c};case"removeListing":return{title:e("Remove Listing failed"),text:e("We've been unabled to remove your listing"),data:d}}}();return(0,t.jsx)(h,{title:a?.title||b.title,children:(0,t.jsx)("div",{className:"flex size-full h-auto items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,t.jsx)(es.ErrorSvg,{}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("p",{className:"text-center",children:a?.text?a.text:r?e("An error has occured while fetching data, Please try again later,"):b.text}),(0,t.jsxs)("ul",{className:"flex gap-2",children:[(0,t.jsx)("li",{className:"max-w-[200px] truncate",children:x?.name}),b.data?.edition&&(0,t.jsxs)("li",{className:"max-w-[100px] truncate",children:["#",b.data.edition]})]})]}),i&&Array.isArray(i)?(0,t.jsx)("ol",{className:"flex max-h-[150px] w-full max-w-[400px] list-decimal flex-col gap-2 overflow-auto",children:i.map((e,n)=>(0,t.jsxs)("li",{className:`list-decimal ${f.typographyVariants.sm}`,children:[n+1,". ",e]},n))}):(0,t.jsx)(f.Typography,{variant:"sm",className:"max-h-[150px] max-w-[400px] overflow-auto text-wrap opacity-85",children:i}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[i&&(0,t.jsxs)(l.Button,{variant:"outline",className:"h-12 w-full text-base uppercase text-white",onClick:function(){i&&navigator.clipboard.writeText(Array.isArray(i)?i.join("\n"):i)},children:[(0,t.jsx)(ea.CopyIcon,{className:"size-4"}),e("copy error")]}),(0,t.jsx)(l.Button,{variant:"blue",onClick:function(){"sell"===s&&u?p(u):"buy"===s&&c?m(c):"removeListing"===s&&d?y(d):n()},className:"h-12 w-full text-base uppercase",children:a?.buttonText||e("try again")})]})]})})})};var eo=e.i(964923),eu=e.i(701248),ec=e.i(211089),ed=e.i(400401),ep=e.i(729068);let em=e=>{let{variant:n="blue",size:r="long",disabled:i=!1,className:a="text-nowrap md:text-sm text-xs"}=e,s=(0,ed.useQueryClient)(),{success:u,error:c,currentItemToRemove:d,setForcePending:p}=(0,v.useMarketplace)(),{metadata:m}=(0,I.useUserMetadata)(),y=m?.veve_user_id,{refetchListings:f}=(()=>{let e=(0,ep.usePathname)(),t=(0,ep.useParams)(),n=t?.id,{user:r,ready:i}=(0,w.useAuth)(),{role:a}=(0,I.useUserMetadata)(),{authorised:s}=(0,O.useWalletContext)(),l=a===_.USER_ROLE.VERIFIED,{refetch:o}=L.trpc.publicVeve.getElementListings_v2.useQuery({elementId:n},{enabled:s&&e?.includes("collections")&&(!!r||!!l||!!i)});return{refetchListings:o}})(),x=(0,o.useTranslations)(),{addForcePendingAsync:g,clearForcePendingItem:b}=(0,K.useForcePending)();if(!d)throw Error("No listingId provided");let h=L.trpc.verifiedVeve.removeListing.useMutation(),C=h.isLoading||i,j=(0,J.getVeveSessionFromLocalStorage)(),N=(0,J.getIfVeveSessionIsValid)(j),T=async()=>{try{if(!N){(0,J.removeVeveSessionFromLocalStorage)(),c(x("veveSessionTimeout"));return}await g(d.nft_id);let e=await h.mutateAsync({listingId:Number(d.listing_id),sellerAuthToken:j.access_token});if("error"in e.response)return void c(e.response.error.status.message);"success"===e.status.message&&(p(e=>[...e,{nft_id:void 0,listing_id:d.listing_id,timestamp:Date.now()}]),u(),f(),await s.invalidateQueries({queryKey:[`getUserOwnedElementDetails/${y}`]}))}catch(n){b(d.nft_id),console.log("Caught error in handleClick:",n);let e=n.message;if("INVALID_TOKEN"===e){(0,J.removeVeveSessionFromLocalStorage)(),c(x("invalidTokenError"));return}let t="";if(e.includes("FUNCTION_INVOCATION_TIMEOUT")||e.includes("timeout")||e.includes("Request timeout")||e.includes("Connection timeout"))t=x("removeTimeoutError");else if(e.includes("JSON.parse: unexpected character")||e.includes("Unexpected token")||e.includes("JSON.parse"))t=x("removeServerError");else if(e.includes("Network Error")||e.includes("Failed to fetch")||e.includes("fetch")||e.includes("network")||e.includes("Received network error or non-101 status code")||e.includes("Authorization Violation"))t=x("removeNetworkConnectionError");else if(e.includes("Listing not listed")||e.includes("not found")||e.includes("does not exist"))t=x("listingNotFoundError");else e.includes("Unauthorized")||e.includes("Authentication")||e.includes("Invalid token")?((0,J.removeVeveSessionFromLocalStorage)(),t=x("invalidTokenError")):t=x("removeGenericError");c(t)}};return(0,t.jsx)(l.Button,{variant:n,size:r,onClick:T,className:a+" uppercase",disabled:C,children:function(e){switch(e){case!0:return(0,t.jsx)(er.ShinyText,{text:x("Removing")+"..."});case!1:return x("Confirm")}}(h.isLoading)})},ey=()=>{let e=(0,o.useTranslations)(),{veveAuthUrl:r}=(0,N.useSetVeveSession)(),{currentItemToRemove:i}=(0,v.useMarketplace)(),[a,s]=(0,n.useState)(!1),u=function(e){if("string"==typeof e)if(e.includes(".")){let t=(0,eu.parseUnits)(e,18);return Number((0,eu.formatUnits)(t))}else{let t=eo.BigNumber.from(e);return Number((0,eu.formatUnits)(t))}return Number(e)}(i?.current_price??"0"),c=(0,J.getVeveSessionFromLocalStorage)(),d=(0,J.getIfVeveSessionIsValid)(c),{data:p,isLoading:m}=(0,k.useProfile)();return i&&!m&&i?.seller_id?.toLowerCase()===p?.[0]?.user_id?.toLowerCase()?(0,t.jsxs)(h,{title:"Remove Listing",children:[(0,t.jsx)(h.CollectibleImage,{edition:Number(i?.edition??0)}),(0,t.jsx)(h.ModalPriceDisplay,{title:"Listing price",omiPrice:Number(u)}),d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Checkbox,{id:"checkbox",checked:a,onCheckedChange:()=>s(!a),classNames:{label:"text-xs text-secondary"},label:(0,t.jsxs)(f.Typography,{variant:"sm",gray:!0,children:[e("I agree to the")," ",(0,t.jsx)(T.Link,{onClick:e=>e.stopPropagation(),href:ec.APP_ROUTES.TERMS,target:"_blank",className:"text-white duration-300 hover:text-[#6e94e4]",children:"StackR Terms and Conditions"})]})}),(0,t.jsx)(em,{className:"h-12 w-full text-base",disabled:!a})]}):(0,t.jsx)(l.Button,{variant:"blue",asChild:!0,href:r,className:"h-12 w-full text-base",children:(0,t.jsx)(T.Link,{href:r,children:e("Authenticate with Veve")})})]}):null};var ef=e.i(269734),ex=e.i(313430),eg=e.i(869081);let eb={[eg.NatsErrorCode.NO_BACKEND]:"natsUnavailableError",[eg.NatsErrorCode.NO_DB]:"databaseUnavailableError",[eg.NatsErrorCode.PARSING_ERROR]:"parsingIssuesError",[eg.NatsErrorCode.NFT_EXISTS]:"nftAlreadyListedError",[eg.NatsErrorCode.DELISTED]:"nftAlreadyDelistedError",[eg.NatsErrorCode.NOT_LISTED]:"listingNotFoundError",[eg.NatsErrorCode.INVALID_AUTH_TOKEN]:"invalidTokenError",[eg.NatsErrorCode.BUYER_SAME_AS_SELLER]:"buyerSameAsSellerError",[eg.NatsErrorCode.USER_NOT_ALLOWED]:"userNotAllowedError",[eg.NatsErrorCode.OPEN_LISTING_NOT_FOUND]:"openListingNotFoundError",[eg.NatsErrorCode.ONLY_ONE_OPEN_LISTING_ALLOWED]:"onlyOneOpenListingAllowedError",[eg.NatsErrorCode.ITEM_PENDING_TRANSFER]:"itemPendingTransferError",[eg.NatsErrorCode.USER_MUST_OWN_ITEM]:"userMustOwnItemError"},eh={listing:{timeout:"listingTimeoutError",server:"listingServerError",network:"networkConnectionError",generic:"listingGenericError"},buy:{timeout:"buyTimeoutError",server:"buyServerError",network:"buyNetworkConnectionError",generic:"buyGenericError"},remove:{timeout:"removeTimeoutError",server:"removeServerError",network:"removeNetworkConnectionError",generic:"removeGenericError"}},ev=e=>{let{variant:n="blue",size:r="sm",disabled:i,children:a,className:s,price:u=0}=e,c=(0,ed.useQueryClient)(),{smartAccount:d}=(0,O.useWalletContext)(),{error:p,currentItemToSell:m,goVeveRegistration:y,goBaseLoading:f,success:x}=(0,v.useMarketplace)(),b=(0,o.useTranslations)(),{user:h}=(0,B.usePrivy)(),{data:C}=(0,g.useGetNftInfo)(),{addForcePendingAsync:j,clearForcePendingItem:N}=(0,K.useForcePending)(),T=C?.element_type,w=C&&"market_fee"in C?C.market_fee:0,{mutateAsync:P,isLoading:S}=L.trpc.verifiedVeve.initiateNewListing.useMutation({onError:e=>{p(e.message)},onSuccess:async()=>{x(),await Promise.allSettled([c.invalidateQueries({queryKey:[`getElementListings_v2/${m?.element_id}`]}),c.invalidateQueries({queryKey:[`getUserOwnedElementDetails/${h?.id}`]})])}});if(!m)throw Error("No nftId provided");async function E(){if(!m)return null;let e=(0,J.getVeveSessionFromLocalStorage)();if(!(0,J.getIfVeveSessionIsValid)(e)||!e)return void p(b("veveSessionTimeout"));try{await j(m.nft_id),f(),await new Promise(e=>setTimeout(e,1e3)),y(),await P({nfts:[{nftId:m.nft_id,type:T??"",payToken:W.chains[1].contracts.omi.address,payTokenPrice:u.toString(),currentFee:Number(w??0)}],veveUserId:m.owner_id,seller:d.address,sellerAuthToken:e.access_token,privyId:h?.id??"",privyApp:ex.env.NEXT_PUBLIC_PRIVY_APP_ID,payToken:W.chains[1].contracts.omi.address,payTokenPrice:u.toString(),providerId:"VEVE",user_timestamp:new Date().toISOString()}),x()}catch(t){N(m.nft_id);let e=t.message;if("INVALID_TOKEN"===e){(0,J.removeVeveSessionFromLocalStorage)(),p(b("veveSessionTimeout"));return}p(b(function(e,t="listing"){let n=eh[t],r=function(e){for(let[t,n]of Object.entries(eb))if(e.includes(String(t)))return n;return null}(e);return r?r:e.includes("FUNCTION_INVOCATION_TIMEOUT")||e.includes("timeout")||e.includes("Request timeout")||e.includes("Connection timeout")?n.timeout:e.includes("JSON.parse: unexpected character")||e.includes("Unexpected token")||e.includes("JSON.parse")?n.server:e.includes("Received network error or non-101 status code")||e.includes("Authorization Violation")||e.includes("Network Error")||e.includes("Failed to fetch")?n.network:n.generic}(e,"listing")))}}return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(l.Button,{variant:n,size:r,onClick:E,className:s,disabled:S||i,children:S?(0,t.jsx)(ef.LoadingSpinner,{}):a||b("listOnStackr")})})},eC=()=>{let e=(0,ep.useParams)(),r=e?.id,{veveAuthUrl:i}=(0,N.useSetVeveSession)(),[a,u]=(0,n.useState)(!1),{currentItemToSell:c,calculateFee:d,sellPrice:p,goCreateListing:m}=(0,v.useMarketplace)(),{data:y,isLoading:x}=L.trpc.publicVeve.getElementFees.useQuery({elementId:r||""}),b=Number(y?.success_fee),C=100*b,j=d(b,Number(p)),{tokenData:w}=(0,O.useWalletContext)(),P=Number(w.omi?.usdPrice),S=Number(p),{data:E,isLoading:_}=(0,g.useGetNftInfo)(),I=_||!w.omi||x,k=Number(E?.floor_market_price)/P,A=(S-k)/k*100,F=Number(p)-j,D=""===p||0===Number(p)||j>Number(p),R=(0,J.getVeveSessionFromLocalStorage)(),B=(0,J.getIfVeveSessionIsValid)(R),U=(0,o.useTranslations)();return(0,t.jsxs)(h,{title:U("Confirm listing"),children:[(0,t.jsx)(h.CollectibleImage,{edition:Number(c?.edition??0)}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:I,title:U("You get"),omiPrice:F,typography:{omi:{variant:"lg"},usd:{variant:"sm"}}}),(0,t.jsx)("div",{className:"h-px w-full bg-gray-border"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(h.ModalPriceDisplay,{isLoading:I,title:U("Listing price"),omiPrice:Number(p)}),0!==Math.round(A)?(0,t.jsx)(f.Typography,{variant:"sm",className:(0,s.twJoin)("mb-4",(0,ee.inBetween)(A,[-15,100])?"text-secondary":"text-error"),children:Math.round(A)+"% "+U(A>0?"above floor price":"below floor price")}):(0,t.jsx)("div",{className:"mb-4"}),(0,t.jsx)(h.ModalPriceDisplay,{isLoading:I,title:`${U("Success Fee")} (${C}%)`,omiPrice:j})]}),(0,t.jsx)(M.Checkbox,{checked:a,onCheckedChange:()=>u(!a),id:"terms-and-conditions",label:(0,t.jsxs)("span",{className:"text-xs text-secondary",children:[U("I agree to the")," ",(0,t.jsx)(T.Link,{className:"text-white duration-200 hover:text-blue",onClick:e=>e.stopPropagation(),href:ec.APP_ROUTES.TERMS,children:"Terms & Conditions"})," ",U("authorizeWithVeveMessage")]}),classNames:{label:"text-xs text-secondary"}}),B?(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>m(c),className:"h-[40px] flex-1 text-base font-normal text-white md:text-lg",children:U("edit")}),(0,t.jsx)(ev,{disabled:D||!a,className:"h-[40px] flex-1 text-base font-normal md:text-lg",price:Number(p),children:U("Create Listing")})]}):(0,t.jsx)(l.Button,{variant:"blue",asChild:!0,children:(0,t.jsx)(T.Link,{href:i,children:U("Authenticate with Veve")})})]})};var ej=e.i(663039),eN=e.i(42108),eT=e.i(341483);function ew({price:e}){let{data:n,isLoading:r,isError:i}=L.trpc.publicVeve.getRecommendedNfts.useQuery({price:e});return r?(0,t.jsxs)("div",{className:"flex h-[275px] gap-4 overflow-hidden",children:[(0,t.jsx)(m.Skeleton,{className:"shrink-0 basis-[70%] bg-[#1F212A]"}),(0,t.jsx)(m.Skeleton,{className:"shrink-0 basis-[70%] bg-[#1F212A]"})]}):!n||i||0===e?null:(0,t.jsx)(eT.Carousel,{children:(0,t.jsx)(eT.CarouselContent,{className:"flex h-auto max-w-xs gap-4 xs:max-w-[380px]",children:n?.map((e,n)=>(0,t.jsx)(eT.CarouselItem,{className:"basis-[70%] bg-[#1F212A] p-0 first:ml-5",children:(0,t.jsx)(eP,{...e})},n))})})}function eP(e){let n=(0,o.useTranslations)(),r="COLLECTIBLE_TYPE"===e.element_type?ec.APP_ROUTES.COLLECTIONS_COLLECTIBLE:ec.APP_ROUTES.COLLECTIONS_COMIC;return(0,t.jsxs)(eN.default,{href:`${r}/${e.element_id}`,children:[(0,t.jsxs)("div",{className:"relative size-[250px] w-full",children:[(0,t.jsx)(c.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-contain backdrop-blur-3xl"}),(0,t.jsx)(c.default,{src:e.image_url,alt:e.name,width:250,height:250,priority:!0,className:"mx-auto size-[250px] object-contain"})]}),(0,t.jsxs)("div",{className:"bg-[#1F212A] px-4 py-2 font-thin",children:[(0,t.jsx)(f.Typography,{className:"line-clamp-1",children:e.name}),(0,t.jsxs)(f.Typography,{variant:"xs",className:"flex justify-between gap-2",children:[(0,t.jsxs)("span",{children:[n("stackrFloorPrice"),":"]}),(0,t.jsxs)("span",{children:[(0,b.formatNumber)(e.price,0)," OMI"]})]})]})]})}var eS=e.i(819182);let eO=()=>{let e=(0,o.useTranslations)();(0,ep.usePathname)();let{goMain:n,variantAction:r,currentItemToBuy:i,currentItemToSell:a,currentItemToRemove:s,sellPrice:u}=(0,v.useMarketplace)(),{data:c}=(0,g.useGetNftInfo)(),d=Q(Number(i?.current_price??0)),p=(()=>{switch(r){case"createListing":case"sell":return{title:e("Listing completed"),text:e("Youve successfully listed"),data:a,tweetData:{nftName:c?.name,nftEdition:a?.edition?.toString(),price:u?.toString(),listingUrl:window.location.origin+window.location.pathname},nftSummary:(0,t.jsxs)(f.Typography,{className:"max-w-80 text-center font-semibold",children:[c?.name," #",a?.edition]})};case"buy":return{title:e("Transaction completed"),text:e("Youve successfully purchased"),data:i,tweetData:{nftName:c?.name,nftEdition:i?.edition?.toString(),burnedOmi:d.toString(),listingUrl:window.location.origin+window.location.pathname},nftSummary:(0,t.jsxs)(f.Typography,{className:"max-w-80 text-center",children:[(0,t.jsxs)("span",{className:"font-semibold",children:[c?.name," #",i?.edition]})," ",e("by")," ",i?.username]})};case"removeListing":return{title:e("Remove Listing Completed"),text:e("Youve successfully removed"),data:s,nftSummary:(0,t.jsxs)(f.Typography,{className:"max-w-80 text-center font-semibold",children:[c?.name," #",s?.edition]})};default:return{title:"",text:"",data:[]}}})();return(0,t.jsxs)(h,{title:p.title,contentClassName:"p-0 max-h-[700px] overflow-y-auto",children:[(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex w-full flex-col items-center gap-6 p-5",children:[(0,t.jsx)(es.SuccessSvg,{className:"size-18 shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)(f.Typography,{variant:"lg",className:"font-thin",children:p.text}),p.nftSummary]})]})}),"buy"===r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Y.InfoBanner,{children:[(0,t.jsx)(f.Typography,{variant:"sm",className:"text-white",children:e("You burned")}),(0,t.jsxs)(f.Typography,{variant:"4xl",className:"font-extrabold text-white",children:[(0,b.formatNumber)(d,0)," OMI"]}),(0,t.jsxs)(f.Typography,{variant:"sm",className:"text-white",children:[(0,t.jsx)(eN.default,{className:"underline underline-offset-2",href:ec.APP_ROUTES.LEADERBOARDS,children:e("check here")})," ",e("toSeeHowYourRankingChanges")]})]}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)(f.Typography,{variant:"lg",className:"mb-6",children:e("collectorsAlsoBuying")}),(0,t.jsx)(eS.ClientOnly,{children:(0,t.jsx)(ew,{price:Number(i?.current_price)})})]})]}),(0,t.jsx)("div",{className:"min-h-px w-full bg-white/50"}),(0,t.jsxs)("div",{className:"w-full space-y-4 p-5 pt-0",children:[(0,t.jsx)(l.Button,{variant:"blue",onClick:function(){n()},className:"h-12 w-full text-base",children:e("Close Window")}),p.tweetData&&(0,t.jsx)(l.Button,{variant:"outline",onClick:function(){p?.tweetData&&("buy"===r?(0,ej.shareBuyOnX)(p.tweetData):("sell"===r||"createListing"===r)&&(0,ej.shareSellOnX)(p.tweetData))},className:"h-12 w-full text-base text-white",children:e("Share on X")})]})]})},eE=()=>{let e=(0,o.useTranslations)(),{variantAction:n}=(0,v.useMarketplace)(),r=function(){switch(n){case"sell":default:return{title:e("Listing created on Veve"),text:e("Deploying listing on Veve")};case"buy":return{title:e("Purchase registration Veve"),text:e("Settlement registered on Veve")};case"removeListing":return{title:e("Remove listing"),text:e("Removing listing on Veve")}}}();return(0,t.jsx)(h,{title:r.title,children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-5",children:[(0,t.jsxs)("p",{className:"text-lg",children:[r.text,"..."]}),(0,t.jsx)(j,{}),(0,t.jsx)(er.ShinyText,{className:"text-lg",text:e("Please wait")+"..."})]})})},e_=()=>{let{goMain:e}=(0,v.useMarketplace)(),{veveAuthUrl:n,clearMismatchError:r}=(0,N.useSetVeveSession)(),i=(0,o.useTranslations)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.DialogHeader,{children:(0,t.jsx)(p.DialogContentWrapper,{children:(0,t.jsx)(p.DialogTitle,{children:i("An error has occured!")})})}),(0,t.jsx)(p.DialogContentWrapper,{children:(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,t.jsx)("svg",{width:"80",height:"71",viewBox:"0 0 80 71",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M78.4817 58.9551L47.0508 4.37681C46.3289 3.14935 45.2989 2.13172 44.0629 1.42468C42.8268 0.717635 41.4275 0.345703 40.0035 0.345703C38.5795 0.345703 37.1801 0.717635 35.9441 1.42468C34.708 2.13172 33.678 3.14935 32.9561 4.37681L1.52519 58.9551C0.833344 60.1394 0.46875 61.4863 0.46875 62.8579C0.46875 64.2295 0.833344 65.5764 1.52519 66.7607C2.23744 67.9968 3.26606 69.0209 4.50528 69.7276C5.7445 70.4344 7.14961 70.7984 8.57612 70.7821H71.4308C72.8561 70.7971 74.2597 70.4325 75.4976 69.7258C76.7354 69.0191 77.7629 67.9957 78.4746 66.7607C79.1675 65.577 79.5333 64.2305 79.5346 62.8589C79.5358 61.4873 79.1725 60.14 78.4817 58.9551ZM74.7406 64.6009C74.4048 65.1784 73.9211 65.6559 73.3393 65.9844C72.7576 66.3129 72.0988 66.4803 71.4308 66.4696H8.57612C7.90813 66.4803 7.24936 66.3129 6.6676 65.9844C6.08585 65.6559 5.60215 65.1784 5.26628 64.6009C4.95211 64.0725 4.78629 63.4691 4.78629 62.8543C4.78629 62.2395 4.95211 61.6362 5.26628 61.1077L36.6936 6.52946C37.0372 5.95872 37.5225 5.48651 38.1025 5.15871C38.6824 4.8309 39.3373 4.65864 40.0035 4.65864C40.6696 4.65864 41.3245 4.8309 41.9045 5.15871C42.4844 5.48651 42.9697 5.95872 43.3133 6.52946L74.7442 61.1077C75.0579 61.6365 75.2231 62.24 75.2224 62.8548C75.2218 63.4696 75.0554 64.0728 74.7406 64.6009ZM37.8472 42.7509V28.3759C37.8472 27.804 38.0744 27.2555 38.4788 26.8512C38.8831 26.4468 39.4316 26.2196 40.0035 26.2196C40.5753 26.2196 41.1238 26.4468 41.5282 26.8512C41.9325 27.2555 42.1597 27.804 42.1597 28.3759V42.7509C42.1597 43.3227 41.9325 43.8712 41.5282 44.2756C41.1238 44.6799 40.5753 44.9071 40.0035 44.9071C39.4316 44.9071 38.8831 44.6799 38.4788 44.2756C38.0744 43.8712 37.8472 43.3227 37.8472 42.7509ZM43.5972 55.6884C43.5972 56.3991 43.3864 57.094 42.9916 57.685C42.5967 58.2759 42.0354 58.7366 41.3787 59.0086C40.7221 59.2806 39.9995 59.3517 39.3024 59.2131C38.6052 59.0744 37.9649 58.7321 37.4623 58.2295C36.9597 57.7269 36.6174 57.0866 36.4788 56.3895C36.3401 55.6924 36.4113 54.9698 36.6833 54.3131C36.9553 53.6564 37.4159 53.0952 38.0069 52.7003C38.5979 52.3054 39.2927 52.0946 40.0035 52.0946C40.9566 52.0946 41.8707 52.4732 42.5446 53.1472C43.2186 53.8212 43.5972 54.7352 43.5972 55.6884Z",fill:"white"})}),(0,t.jsx)("p",{className:"text-center",children:i("veveAccountMismatchError")}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,t.jsx)(T.Link,{href:n,className:"w-full",onClick:()=>{r()},children:(0,t.jsx)(l.Button,{asChild:!0,variant:"blue",className:"h-12 w-full text-base",children:i("Try again")})}),(0,t.jsx)(l.Button,{variant:"outline",onClick:e,className:"h-12 w-full text-base text-white",children:i("Close Window")})]})]})})})]})},eI=()=>{let e=(0,o.useTranslations)();return(0,t.jsx)("div",{className:"flex size-full h-[490px] items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-8 p-6",children:[(0,t.jsx)("h1",{className:"",children:e("transactionSubmittedToBase")}),(0,t.jsx)(es.HourglassSvg,{className:"animate-spin-slow"}),(0,t.jsx)("div",{className:"flex h-14 w-full items-center justify-center rounded-full bg-[#9CA3B0]",children:(0,t.jsx)("p",{className:"text-xl font-semibold text-black",children:e("waitForConfirmation")})})]})})};e.s(["MarketplaceModalManager",0,()=>{let{goMain:e,isModalOpened:l,openModal:o,content:u,currentBoughtItem:c}=(0,v.useMarketplace)(),{nftId:d}=(0,Z.useMarketplaceParams)(),{data:m}=(0,g.useGetNftInfo)(),y=(0,a.useIsPresent)(),f=m?.is_listable_in_stackr,{isVeveAccountMismatch:x}=(0,N.useSetVeveSession)();(0,n.useEffect)(()=>{x&&o()},[x,o]);let b=(0,n.useMemo)(()=>!!c&&d!==c,[c,d]),h=(0,n.useMemo)(()=>({[v.MODAL_ACTION.Buy]:(0,t.jsx)(A,{}),[v.MODAL_ACTION.ConfirmBuy]:(0,t.jsx)(q,{}),[v.MODAL_ACTION.CreateListing]:(0,t.jsx)(et,{}),[v.MODAL_ACTION.Sell]:(0,t.jsx)(eC,{}),[v.MODAL_ACTION.RemoveListing]:(0,t.jsx)(ey,{}),[v.MODAL_ACTION.Success]:(0,t.jsx)(eO,{}),[v.MODAL_ACTION.Loading]:(0,t.jsx)(eI,{}),[v.MODAL_ACTION.CreatingListingOnBase]:(0,t.jsx)(ei,{}),[v.MODAL_ACTION.VeveRegistration]:(0,t.jsx)(eE,{}),[v.MODAL_ACTION.WrongVeveAccount]:(0,t.jsx)(e_,{})}),[]),j=(0,n.useCallback)(()=>{let e=(0,J.getVeveSessionFromLocalStorage)(),n=(0,J.getIfVeveSessionIsValid)(e);return f?u===v.MODAL_ACTION.Error?(0,t.jsx)(el,{}):x?(0,t.jsx)(e_,{}):n?b?(0,t.jsx)(C,{}):h[u]:(0,t.jsx)(P,{}):null},[f,b,h,u,x]);return(0,t.jsx)(p.Dialog,{open:l,onOpenChange:e,children:(0,t.jsx)(p.DialogContent,{className:(0,s.twJoin)("max-h-dvh overflow-y-auto overflow-x-hidden",y&&"no-scroll"),children:(0,t.jsx)(i.AnimatePresence,{mode:"wait",children:(0,t.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.2,ease:"easeInOut"},children:j()},u)})})})}],882858)},766286,e=>{e.n(e.i(882858))}]);