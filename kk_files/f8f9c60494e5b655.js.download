(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,402045,e=>{"use strict";let t;var r,a,n,s,i,o,l,c=e.i(674283),d=e.i(246999),p=e.i(421383),h=e.i(611643),u=e.i(11223),m=e.i(762588),C=e.i(791304),g=e.i(556064),_=e.i(881754),y=e.i(777631),f=e.i(923241),v=e.i(216503),E=e.i(478117),N=e.i(675033),w=e.i(489660);let A={UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},T={SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${"undefined"!=typeof window?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}};var b=e.i(904139),k=e.i(550338),I=e.i(971984);let O={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},R=(0,k.proxy)({providers:{...O},providerIds:{...O}}),S={state:R,subscribeKey:(e,t)=>(0,I.subscribeKey)(R,e,t),subscribe:e=>(0,k.subscribe)(R,()=>{e(R)}),subscribeProviders:e=>(0,k.subscribe)(R.providers,()=>e(R.providers)),setProvider(e,t){t&&(R.providers[e]=(0,k.ref)(t))},getProvider:e=>R.providers[e],setProviderId(e,t){t&&(R.providerIds[e]=t)},getProviderId(e){if(e)return R.providerIds[e]},reset(){R.providers={...O},R.providerIds={...O}},resetChain(e){R.providers[e]=void 0,R.providerIds[e]=void 0}};var P=e.i(665602),U=e.i(683999),x=e.i(389546);(r=s||(s={})).assertEqual=e=>e,r.assertIs=function(e){},r.assertNever=function(e){throw Error()},r.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},r.getValidEnumValues=e=>{let t=r.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),a={};for(let r of t)a[r]=e[r];return r.objectValues(a)},r.objectValues=e=>r.objectKeys(e).map(function(t){return e[t]}),r.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},r.find=(e,t)=>{for(let r of e)if(t(r))return r},r.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,r.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},r.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(i||(i={})).mergeShapes=(e,t)=>({...e,...t});let L=s.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),D=e=>{switch(typeof e){case"undefined":return L.undefined;case"string":return L.string;case"number":return isNaN(e)?L.nan:L.number;case"boolean":return L.boolean;case"function":return L.function;case"bigint":return L.bigint;case"symbol":return L.symbol;case"object":if(Array.isArray(e))return L.array;if(null===e)return L.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return L.promise;if("undefined"!=typeof Map&&e instanceof Map)return L.map;if("undefined"!=typeof Set&&e instanceof Set)return L.set;if("undefined"!=typeof Date&&e instanceof Date)return L.date;return L.object;default:return L.unknown}},M=s.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class F extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){let r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}F.create=e=>new F(e);let j=(e,t)=>{let r;switch(e.code){case M.invalid_type:r=e.received===L.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case M.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,s.jsonStringifyReplacer)}`;break;case M.unrecognized_keys:r=`Unrecognized key(s) in object: ${s.joinValues(e.keys,", ")}`;break;case M.invalid_union:r="Invalid input";break;case M.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${s.joinValues(e.options)}`;break;case M.invalid_enum_value:r=`Invalid enum value. Expected ${s.joinValues(e.options)}, received '${e.received}'`;break;case M.invalid_arguments:r="Invalid function arguments";break;case M.invalid_return_type:r="Invalid function return type";break;case M.invalid_date:r="Invalid date";break;case M.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:s.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case M.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case M.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case M.custom:r="Invalid input";break;case M.invalid_intersection_types:r="Intersection results could not be merged";break;case M.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case M.not_finite:r="Number must be finite";break;default:r=t.defaultError,s.assertNever(e)}return{message:r}},W=j;function Z(){return W}let H=e=>{let{data:t,path:r,errorMaps:a,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s},o="";for(let e of a.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:n.message||o}};function B(e,t){let r=H({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Z(),j].filter(e=>!!e)});e.common.issues.push(r)}class V{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return K;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t)r.push({key:await e.key,value:await e.value});return V.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return K;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let K=Object.freeze({status:"aborted"}),$=e=>({status:"dirty",value:e}),q=e=>({status:"valid",value:e}),Y=e=>"aborted"===e.status,z=e=>"dirty"===e.status,G=e=>"valid"===e.status,J=e=>"undefined"!=typeof Promise&&e instanceof Promise;(a=o||(o={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},a.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class Q{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let X=(e,t)=>{if(G(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new F(e.common.issues);return this._error=t,this._error}}};function ee(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=a?a:t.defaultError}:{message:null!=r?r:t.defaultError},description:n}}class et{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return D(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:D(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new V,ctx:{common:e.parent.common,data:e.data,parsedType:D(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(J(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let a={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:D(e)},n=this._parseSync({data:e,path:a.path,parent:a});return X(a,n)}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:D(e)},a=this._parse({data:e,path:r.path,parent:r});return X(r,await (J(a)?a:Promise.resolve(a)))}refine(e,t){return this._refinement((r,a)=>{let n=e(r),s=()=>a.addIssue({code:M.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new ej({schema:this,typeName:l.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return eW.create(this,this._def)}nullable(){return eZ.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eN.create(this,this._def)}promise(){return eF.create(this,this._def)}or(e){return eA.create([this,e],this._def)}and(e){return ek.create(this,e,this._def)}transform(e){return new ej({...ee(this._def),schema:this,typeName:l.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eH({...ee(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:l.ZodDefault})}brand(){return new e$({typeName:l.ZodBranded,type:this,...ee(this._def)})}catch(e){return new eB({...ee(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:l.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eq.create(this,e)}readonly(){return eY.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let er=/^c[^\s-]{8,}$/i,ea=/^[a-z][a-z0-9]*$/,en=/^[0-9A-HJKMNP-TV-Z]{26}$/,es=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ei=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eo=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,el=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ec=e=>{if(e.precision)if(e.offset)return RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`);else return RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`);if(0===e.precision)if(e.offset)return RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$");else return RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$");return e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")};class ed extends et{_parse(e){let r;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==L.string){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.string,received:t.parsedType}),K}let a=new V;for(let o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(B(r=this._getOrReturnCtx(e,r),{code:M.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if("max"===o.kind)e.data.length>o.value&&(B(r=this._getOrReturnCtx(e,r),{code:M.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),a.dirty());else if("length"===o.kind){let t=e.data.length>o.value,n=e.data.length<o.value;(t||n)&&(r=this._getOrReturnCtx(e,r),t?B(r,{code:M.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):n&&B(r,{code:M.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),a.dirty())}else if("email"===o.kind)ei.test(e.data)||(B(r=this._getOrReturnCtx(e,r),{validation:"email",code:M.invalid_string,message:o.message}),a.dirty());else if("emoji"===o.kind)t||(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t.test(e.data)||(B(r=this._getOrReturnCtx(e,r),{validation:"emoji",code:M.invalid_string,message:o.message}),a.dirty());else if("uuid"===o.kind)es.test(e.data)||(B(r=this._getOrReturnCtx(e,r),{validation:"uuid",code:M.invalid_string,message:o.message}),a.dirty());else if("cuid"===o.kind)er.test(e.data)||(B(r=this._getOrReturnCtx(e,r),{validation:"cuid",code:M.invalid_string,message:o.message}),a.dirty());else if("cuid2"===o.kind)ea.test(e.data)||(B(r=this._getOrReturnCtx(e,r),{validation:"cuid2",code:M.invalid_string,message:o.message}),a.dirty());else if("ulid"===o.kind)en.test(e.data)||(B(r=this._getOrReturnCtx(e,r),{validation:"ulid",code:M.invalid_string,message:o.message}),a.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(t){B(r=this._getOrReturnCtx(e,r),{validation:"url",code:M.invalid_string,message:o.message}),a.dirty()}else if("regex"===o.kind)o.regex.lastIndex=0,o.regex.test(e.data)||(B(r=this._getOrReturnCtx(e,r),{validation:"regex",code:M.invalid_string,message:o.message}),a.dirty());else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(B(r=this._getOrReturnCtx(e,r),{code:M.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),a.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(B(r=this._getOrReturnCtx(e,r),{code:M.invalid_string,validation:{startsWith:o.value},message:o.message}),a.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(B(r=this._getOrReturnCtx(e,r),{code:M.invalid_string,validation:{endsWith:o.value},message:o.message}),a.dirty());else if("datetime"===o.kind)ec(o).test(e.data)||(B(r=this._getOrReturnCtx(e,r),{code:M.invalid_string,validation:"datetime",message:o.message}),a.dirty());else if("ip"===o.kind){var n,i;n=e.data,!(("v4"===(i=o.version)||!i)&&eo.test(n)||("v6"===i||!i)&&el.test(n))&&1&&(B(r=this._getOrReturnCtx(e,r),{validation:"ip",code:M.invalid_string,message:o.message}),a.dirty())}else s.assertNever(o);return{status:a.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:M.invalid_string,...o.errToObj(r)})}_addCheck(e){return new ed({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...o.errToObj(e)})}url(e){return this._addCheck({kind:"url",...o.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...o.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...o.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...o.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...o.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...o.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...o.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,...o.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...o.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...o.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...o.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...o.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...o.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...o.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...o.errToObj(t)})}nonempty(e){return this.min(1,o.errToObj(e))}trim(){return new ed({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ed({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ed({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ed.create=e=>{var t;return new ed({checks:[],typeName:l.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...ee(e)})};class ep extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==L.number){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.number,received:t.parsedType}),K}let r=new V;for(let a of this._def.checks)"int"===a.kind?s.isInteger(e.data)||(B(t=this._getOrReturnCtx(e,t),{code:M.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:M.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:M.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}(e.data,a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:M.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(B(t=this._getOrReturnCtx(e,t),{code:M.not_finite,message:a.message}),r.dirty()):s.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,r,a){return new ep({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.toString(a)}]})}_addCheck(e){return new ep({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:o.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:o.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:o.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:o.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&s.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}ep.create=e=>new ep({checks:[],typeName:l.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...ee(e)});class eh extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==L.bigint){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.bigint,received:t.parsedType}),K}let r=new V;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:M.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(B(t=this._getOrReturnCtx(e,t),{code:M.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(B(t=this._getOrReturnCtx(e,t),{code:M.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):s.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,r,a){return new eh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.toString(a)}]})}_addCheck(e){return new eh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eh.create=e=>{var t;return new eh({checks:[],typeName:l.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...ee(e)})};class eu extends et{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==L.boolean){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.boolean,received:t.parsedType}),K}return q(e.data)}}eu.create=e=>new eu({typeName:l.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...ee(e)});class em extends et{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==L.date){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.date,received:t.parsedType}),K}if(isNaN(e.data.getTime()))return B(this._getOrReturnCtx(e),{code:M.invalid_date}),K;let r=new V;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(B(t=this._getOrReturnCtx(e,t),{code:M.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(B(t=this._getOrReturnCtx(e,t),{code:M.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):s.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new em({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:o.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:o.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}em.create=e=>new em({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:l.ZodDate,...ee(e)});class eC extends et{_parse(e){if(this._getType(e)!==L.symbol){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.symbol,received:t.parsedType}),K}return q(e.data)}}eC.create=e=>new eC({typeName:l.ZodSymbol,...ee(e)});class eg extends et{_parse(e){if(this._getType(e)!==L.undefined){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.undefined,received:t.parsedType}),K}return q(e.data)}}eg.create=e=>new eg({typeName:l.ZodUndefined,...ee(e)});class e_ extends et{_parse(e){if(this._getType(e)!==L.null){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.null,received:t.parsedType}),K}return q(e.data)}}e_.create=e=>new e_({typeName:l.ZodNull,...ee(e)});class ey extends et{constructor(){super(...arguments),this._any=!0}_parse(e){return q(e.data)}}ey.create=e=>new ey({typeName:l.ZodAny,...ee(e)});class ef extends et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return q(e.data)}}ef.create=e=>new ef({typeName:l.ZodUnknown,...ee(e)});class ev extends et{_parse(e){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.never,received:t.parsedType}),K}}ev.create=e=>new ev({typeName:l.ZodNever,...ee(e)});class eE extends et{_parse(e){if(this._getType(e)!==L.undefined){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.void,received:t.parsedType}),K}return q(e.data)}}eE.create=e=>new eE({typeName:l.ZodVoid,...ee(e)});class eN extends et{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==L.array)return B(t,{code:M.invalid_type,expected:L.array,received:t.parsedType}),K;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(e||n)&&(B(t,{code:e?M.too_big:M.too_small,minimum:n?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(B(t,{code:M.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(B(t,{code:M.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new Q(t,e,t.path,r)))).then(e=>V.mergeArray(r,e));let n=[...t.data].map((e,r)=>a.type._parseSync(new Q(t,e,t.path,r)));return V.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new eN({...this._def,minLength:{value:e,message:o.toString(t)}})}max(e,t){return new eN({...this._def,maxLength:{value:e,message:o.toString(t)}})}length(e,t){return new eN({...this._def,exactLength:{value:e,message:o.toString(t)}})}nonempty(e){return this.min(1,e)}}eN.create=(e,t)=>new eN({type:e,minLength:null,maxLength:null,exactLength:null,typeName:l.ZodArray,...ee(t)});class ew extends et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=s.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==L.object){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.object,received:t.parsedType}),K}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof ev&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||s.push(e);let i=[];for(let e of n){let t=a[e],n=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new Q(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ev){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(B(r,{code:M.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let a=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new Q(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e}).then(e=>V.mergeObjectSync(t,e)):V.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return o.errToObj,new ew({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var a,n,s,i;let l=null!=(s=null==(n=(a=this._def).errorMap)?void 0:n.call(a,t,r).message)?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!=(i=o.errToObj(e).message)?i:l}:{message:l}}}:{}})}strip(){return new ew({...this._def,unknownKeys:"strip"})}passthrough(){return new ew({...this._def,unknownKeys:"passthrough"})}extend(e){return new ew({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ew({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:l.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ew({...this._def,catchall:e})}pick(e){let t={};return s.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new ew({...this._def,shape:()=>t})}omit(e){let t={};return s.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new ew({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof ew){let r={};for(let a in t.shape){let n=t.shape[a];r[a]=eW.create(e(n))}return new ew({...t._def,shape:()=>r})}if(t instanceof eN)return new eN({...t._def,type:e(t.element)});if(t instanceof eW)return eW.create(e(t.unwrap()));if(t instanceof eZ)return eZ.create(e(t.unwrap()));if(t instanceof eI)return eI.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};return s.objectKeys(this.shape).forEach(r=>{let a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}),new ew({...this._def,shape:()=>t})}required(e){let t={};return s.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof eW;)e=e._def.innerType;t[r]=e}}),new ew({...this._def,shape:()=>t})}keyof(){return eL(s.objectKeys(this.shape))}}ew.create=(e,t)=>new ew({shape:()=>e,unknownKeys:"strip",catchall:ev.create(),typeName:l.ZodObject,...ee(t)}),ew.strictCreate=(e,t)=>new ew({shape:()=>e,unknownKeys:"strict",catchall:ev.create(),typeName:l.ZodObject,...ee(t)}),ew.lazycreate=(e,t)=>new ew({shape:e,unknownKeys:"strip",catchall:ev.create(),typeName:l.ZodObject,...ee(t)});class eA extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new F(e.ctx.common.issues));return B(t,{code:M.invalid_union,unionErrors:r}),K});{let e,a=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=a.map(e=>new F(e));return B(t,{code:M.invalid_union,unionErrors:n}),K}}get options(){return this._def.options}}eA.create=(e,t)=>new eA({options:e,typeName:l.ZodUnion,...ee(t)});let eT=e=>{if(e instanceof eU)return eT(e.schema);if(e instanceof ej)return eT(e.innerType());if(e instanceof ex)return[e.value];if(e instanceof eD)return e.options;if(e instanceof eM)return Object.keys(e.enum);else if(e instanceof eH)return eT(e._def.innerType);else if(e instanceof eg)return[void 0];else if(e instanceof e_)return[null];else return null};class eb extends et{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==L.object)return B(t,{code:M.invalid_type,expected:L.object,received:t.parsedType}),K;let r=this.discriminator,a=t.data[r],n=this.optionsMap.get(a);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(B(t,{code:M.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),K)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=eT(r.shape[e]);if(!t)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(a.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new eb({typeName:l.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...ee(r)})}}class ek extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if(Y(e)||Y(a))return K;let n=function e(t,r){let a=D(t),n=D(r);if(t===r)return{valid:!0,data:t};if(a===L.object&&n===L.object){let a=s.objectKeys(r),n=s.objectKeys(t).filter(e=>-1!==a.indexOf(e)),i={...t,...r};for(let a of n){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};i[a]=n.data}return{valid:!0,data:i}}if(a===L.array&&n===L.array){if(t.length!==r.length)return{valid:!1};let a=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};a.push(s.data)}return{valid:!0,data:a}}if(a===L.date&&n===L.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,a.value);return n.valid?((z(e)||z(a))&&t.dirty(),{status:t.value,value:n.data}):(B(r,{code:M.invalid_intersection_types}),K)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ek.create=(e,t,r)=>new ek({left:e,right:t,typeName:l.ZodIntersection,...ee(r)});class eI extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.array)return B(r,{code:M.invalid_type,expected:L.array,received:r.parsedType}),K;if(r.data.length<this._def.items.length)return B(r,{code:M.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),K;!this._def.rest&&r.data.length>this._def.items.length&&(B(r,{code:M.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new Q(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>V.mergeArray(t,e)):V.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new eI({...this._def,rest:e})}}eI.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eI({items:e,typeName:l.ZodTuple,rest:null,...ee(t)})};class eO extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.object)return B(r,{code:M.invalid_type,expected:L.object,received:r.parsedType}),K;let a=[],n=this._def.keyType,s=this._def.valueType;for(let e in r.data)a.push({key:n._parse(new Q(r,e,r.path,e)),value:s._parse(new Q(r,r.data[e],r.path,e))});return r.common.async?V.mergeObjectAsync(t,a):V.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new eO(t instanceof et?{keyType:e,valueType:t,typeName:l.ZodRecord,...ee(r)}:{keyType:ed.create(),valueType:e,typeName:l.ZodRecord,...ee(t)})}}class eR extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.map)return B(r,{code:M.invalid_type,expected:L.map,received:r.parsedType}),K;let a=this._def.keyType,n=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new Q(r,e,r.path,[s,"key"])),value:n._parse(new Q(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return K;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return K;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}}eR.create=(e,t,r)=>new eR({valueType:t,keyType:e,typeName:l.ZodMap,...ee(r)});class eS extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==L.set)return B(r,{code:M.invalid_type,expected:L.set,received:r.parsedType}),K;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(B(r,{code:M.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(B(r,{code:M.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let n=this._def.valueType;function s(e){let r=new Set;for(let a of e){if("aborted"===a.status)return K;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>n._parse(new Q(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new eS({...this._def,minSize:{value:e,message:o.toString(t)}})}max(e,t){return new eS({...this._def,maxSize:{value:e,message:o.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eS.create=(e,t)=>new eS({valueType:e,minSize:null,maxSize:null,typeName:l.ZodSet,...ee(t)});class eP extends et{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==L.function)return B(t,{code:M.invalid_type,expected:L.function,received:t.parsedType}),K;function r(e,r){return H({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Z(),j].filter(e=>!!e),issueData:{code:M.invalid_arguments,argumentsError:r}})}function a(e,r){return H({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Z(),j].filter(e=>!!e),issueData:{code:M.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof eF){let e=this;return q(async function(...t){let i=new F([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,n).catch(e=>{throw i.addIssue(a(l,e)),i})})}{let e=this;return q(function(...t){let i=e._def.args.safeParse(t,n);if(!i.success)throw new F([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,n);if(!l.success)throw new F([a(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eP({...this._def,args:eI.create(e).rest(ef.create())})}returns(e){return new eP({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new eP({args:e||eI.create([]).rest(ef.create()),returns:t||ef.create(),typeName:l.ZodFunction,...ee(r)})}}class eU extends et{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eU.create=(e,t)=>new eU({getter:e,typeName:l.ZodLazy,...ee(t)});class ex extends et{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return B(t,{received:t.data,code:M.invalid_literal,expected:this._def.value}),K}return{status:"valid",value:e.data}}get value(){return this._def.value}}function eL(e,t){return new eD({values:e,typeName:l.ZodEnum,...ee(t)})}ex.create=(e,t)=>new ex({value:e,typeName:l.ZodLiteral,...ee(t)});class eD extends et{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return B(t,{expected:s.joinValues(r),received:t.parsedType,code:M.invalid_type}),K}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return B(t,{received:t.data,code:M.invalid_enum_value,options:r}),K}return q(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return eD.create(e)}exclude(e){return eD.create(this.options.filter(t=>!e.includes(t)))}}eD.create=eL;class eM extends et{_parse(e){let t=s.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==L.string&&r.parsedType!==L.number){let e=s.objectValues(t);return B(r,{expected:s.joinValues(e),received:r.parsedType,code:M.invalid_type}),K}if(-1===t.indexOf(e.data)){let e=s.objectValues(t);return B(r,{received:r.data,code:M.invalid_enum_value,options:e}),K}return q(e.data)}get enum(){return this._def.values}}eM.create=(e,t)=>new eM({values:e,typeName:l.ZodNativeEnum,...ee(t)});class eF extends et{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==L.promise&&!1===t.common.async?(B(t,{code:M.invalid_type,expected:L.promise,received:t.parsedType}),K):q((t.parsedType===L.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eF.create=(e,t)=>new eF({type:e,typeName:l.ZodPromise,...ee(t)});class ej extends et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===l.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:e=>{B(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===a.type){let e=a.transform(r.data,n);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r})):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?K:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?K:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}}if("transform"===a.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>G(e)?Promise.resolve(a.transform(e.value,n)).then(e=>({status:t.value,value:e})):e);else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!G(e))return e;let s=a.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}s.assertNever(a)}}ej.create=(e,t,r)=>new ej({schema:e,typeName:l.ZodEffects,effect:t,...ee(r)}),ej.createWithPreprocess=(e,t,r)=>new ej({schema:t,effect:{type:"preprocess",transform:e},typeName:l.ZodEffects,...ee(r)});class eW extends et{_parse(e){return this._getType(e)===L.undefined?q(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eW.create=(e,t)=>new eW({innerType:e,typeName:l.ZodOptional,...ee(t)});class eZ extends et{_parse(e){return this._getType(e)===L.null?q(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eZ.create=(e,t)=>new eZ({innerType:e,typeName:l.ZodNullable,...ee(t)});class eH extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===L.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eH.create=(e,t)=>new eH({innerType:e,typeName:l.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ee(t)});class eB extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return J(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new F(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new F(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}eB.create=(e,t)=>new eB({innerType:e,typeName:l.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ee(t)});class eV extends et{_parse(e){if(this._getType(e)!==L.nan){let t=this._getOrReturnCtx(e);return B(t,{code:M.invalid_type,expected:L.nan,received:t.parsedType}),K}return{status:"valid",value:e.data}}}eV.create=e=>new eV({typeName:l.ZodNaN,...ee(e)});let eK=Symbol("zod_brand");class e$ extends et{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eq extends et{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?K:"dirty"===e.status?(t.dirty(),$(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?K:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eq({in:e,out:t,typeName:l.ZodPipeline})}}class eY extends et{_parse(e){let t=this._def.innerType._parse(e);return G(t)&&(t.value=Object.freeze(t.value)),t}}eY.create=(e,t)=>new eY({innerType:e,typeName:l.ZodReadonly,...ee(t)});let ez=(e,t={},r)=>e?ey.create().superRefine((a,n)=>{var s,i;if(!e(a)){let e="function"==typeof t?t(a):"string"==typeof t?{message:t}:t,o=null==(i=null!=(s=e.fatal)?s:r)||i,l="string"==typeof e?{message:e}:e;n.addIssue({code:"custom",...l,fatal:o})}}):ey.create(),eG={object:ew.lazycreate};(n=l||(l={})).ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly";let eJ=ed.create,eQ=ep.create,eX=eV.create,e0=eh.create,e1=eu.create,e3=em.create,e5=eC.create,e4=eg.create,e2=e_.create,e9=ey.create,e6=ef.create,e8=ev.create,e7=eE.create,te=eN.create,tt=ew.create,tr=ew.strictCreate,ta=eA.create,tn=eb.create,ts=ek.create,ti=eI.create,to=eO.create,tl=eR.create,tc=eS.create,td=eP.create,tp=eU.create,th=ex.create,tu=eD.create,tm=eM.create,tC=eF.create,tg=ej.create,t_=eW.create,ty=eZ.create,tf=ej.createWithPreprocess,tv=eq.create;var tE=Object.freeze({__proto__:null,defaultErrorMap:j,setErrorMap:function(e){W=e},getErrorMap:Z,makeIssue:H,EMPTY_PATH:[],addIssueToContext:B,ParseStatus:V,INVALID:K,DIRTY:$,OK:q,isAborted:Y,isDirty:z,isValid:G,isAsync:J,get util(){return s},get objectUtil(){return i},ZodParsedType:L,getParsedType:D,ZodType:et,ZodString:ed,ZodNumber:ep,ZodBigInt:eh,ZodBoolean:eu,ZodDate:em,ZodSymbol:eC,ZodUndefined:eg,ZodNull:e_,ZodAny:ey,ZodUnknown:ef,ZodNever:ev,ZodVoid:eE,ZodArray:eN,ZodObject:ew,ZodUnion:eA,ZodDiscriminatedUnion:eb,ZodIntersection:ek,ZodTuple:eI,ZodRecord:eO,ZodMap:eR,ZodSet:eS,ZodFunction:eP,ZodLazy:eU,ZodLiteral:ex,ZodEnum:eD,ZodNativeEnum:eM,ZodPromise:eF,ZodEffects:ej,ZodTransformer:ej,ZodOptional:eW,ZodNullable:eZ,ZodDefault:eH,ZodCatch:eB,ZodNaN:eV,BRAND:eK,ZodBranded:e$,ZodPipeline:eq,ZodReadonly:eY,custom:ez,Schema:et,ZodSchema:et,late:eG,get ZodFirstPartyTypeKind(){return l},coerce:{string:e=>ed.create({...e,coerce:!0}),number:e=>ep.create({...e,coerce:!0}),boolean:e=>eu.create({...e,coerce:!0}),bigint:e=>eh.create({...e,coerce:!0}),date:e=>em.create({...e,coerce:!0})},any:e9,array:te,bigint:e0,boolean:e1,date:e3,discriminatedUnion:tn,effect:tg,enum:tu,function:td,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ez(t=>t instanceof e,t),intersection:ts,lazy:tp,literal:th,map:tl,nan:eX,nativeEnum:tm,never:e8,null:e2,nullable:ty,number:eQ,object:tt,oboolean:()=>e1().optional(),onumber:()=>eQ().optional(),optional:t_,ostring:()=>eJ().optional(),pipeline:tv,preprocess:tf,promise:tC,record:to,set:tc,strictObject:tr,string:eJ,symbol:e5,transformer:tg,tuple:ti,undefined:e4,union:ta,unknown:e6,void:e7,NEVER:K,ZodIssueCode:M,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:F});let tN=tE.object({message:tE.string()});function tw(e){return tE.literal(x.W3mFrameConstants[e])}tE.object({accessList:tE.array(tE.string()),blockHash:tE.string().nullable(),blockNumber:tE.string().nullable(),chainId:tE.string().or(tE.number()),from:tE.string(),gas:tE.string(),hash:tE.string(),input:tE.string().nullable(),maxFeePerGas:tE.string(),maxPriorityFeePerGas:tE.string(),nonce:tE.string(),r:tE.string(),s:tE.string(),to:tE.string(),transactionIndex:tE.string().nullable(),type:tE.string(),v:tE.string(),value:tE.string()});let tA=tE.object({chainId:tE.string().or(tE.number())}),tT=tE.object({email:tE.string().email()}),tb=tE.object({otp:tE.string()}),tk=tE.object({uri:tE.string()}),tI=tE.object({chainId:tE.optional(tE.string().or(tE.number())),preferredAccountType:tE.optional(tE.string())}),tO=tE.object({provider:tE.enum(["google","github","apple","facebook","x","discord"])}),tR=tE.object({email:tE.string().email()}),tS=tE.object({otp:tE.string()}),tP=tE.object({otp:tE.string()}),tU=tE.object({themeMode:tE.optional(tE.enum(["light","dark"])),themeVariables:tE.optional(tE.record(tE.string(),tE.string().or(tE.number()))),w3mThemeVariables:tE.optional(tE.record(tE.string(),tE.string()))}),tx=tE.object({metadata:tE.object({name:tE.string(),description:tE.string(),url:tE.string(),icons:tE.array(tE.string())}).optional(),sdkVersion:tE.string().optional(),sdkType:tE.string().optional(),projectId:tE.string()}),tL=tE.object({type:tE.string()}),tD=tE.object({action:tE.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),tM=tE.object({url:tE.string()}),tF=tE.object({userName:tE.string()}),tj=tE.object({email:tE.string().optional().nullable(),address:tE.string(),chainId:tE.string().or(tE.number()),accounts:tE.array(tE.object({address:tE.string(),type:tE.enum([x.W3mFrameRpcConstants.ACCOUNT_TYPES.EOA,x.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:tE.string().optional().nullable()}),tW=tE.object({action:tE.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),tZ=tE.object({email:tE.string().email().optional().nullable(),address:tE.string(),chainId:tE.string().or(tE.number()),smartAccountDeployed:tE.optional(tE.boolean()),accounts:tE.array(tE.object({address:tE.string(),type:tE.enum([x.W3mFrameRpcConstants.ACCOUNT_TYPES.EOA,x.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:tE.optional(tE.string())}),tH=tE.object({uri:tE.string()}),tB=tE.object({isConnected:tE.boolean()}),tV=tE.object({chainId:tE.string().or(tE.number())}),tK=tE.object({chainId:tE.string().or(tE.number())}),t$=tE.object({newEmail:tE.string().email()}),tq=tE.object({smartAccountEnabledNetworks:tE.array(tE.number())});tE.object({address:tE.string(),isDeployed:tE.boolean()});let tY=tE.object({version:tE.string().optional()}),tz=tE.object({type:tE.string(),address:tE.string()}),tG=tE.any(),tJ=tE.object({method:tE.literal("eth_accounts")}),tQ=tE.object({method:tE.literal("eth_blockNumber")}),tX=tE.object({method:tE.literal("eth_call"),params:tE.array(tE.any())}),t0=tE.object({method:tE.literal("eth_chainId")}),t1=tE.object({method:tE.literal("eth_estimateGas"),params:tE.array(tE.any())}),t3=tE.object({method:tE.literal("eth_feeHistory"),params:tE.array(tE.any())}),t5=tE.object({method:tE.literal("eth_gasPrice")}),t4=tE.object({method:tE.literal("eth_getAccount"),params:tE.array(tE.any())}),t2=tE.object({method:tE.literal("eth_getBalance"),params:tE.array(tE.any())}),t9=tE.object({method:tE.literal("eth_getBlockByHash"),params:tE.array(tE.any())}),t6=tE.object({method:tE.literal("eth_getBlockByNumber"),params:tE.array(tE.any())}),t8=tE.object({method:tE.literal("eth_getBlockReceipts"),params:tE.array(tE.any())}),t7=tE.object({method:tE.literal("eth_getBlockTransactionCountByHash"),params:tE.array(tE.any())}),re=tE.object({method:tE.literal("eth_getBlockTransactionCountByNumber"),params:tE.array(tE.any())}),rt=tE.object({method:tE.literal("eth_getCode"),params:tE.array(tE.any())}),rr=tE.object({method:tE.literal("eth_getFilterChanges"),params:tE.array(tE.any())}),ra=tE.object({method:tE.literal("eth_getFilterLogs"),params:tE.array(tE.any())}),rn=tE.object({method:tE.literal("eth_getLogs"),params:tE.array(tE.any())}),rs=tE.object({method:tE.literal("eth_getProof"),params:tE.array(tE.any())}),ri=tE.object({method:tE.literal("eth_getStorageAt"),params:tE.array(tE.any())}),ro=tE.object({method:tE.literal("eth_getTransactionByBlockHashAndIndex"),params:tE.array(tE.any())}),rl=tE.object({method:tE.literal("eth_getTransactionByBlockNumberAndIndex"),params:tE.array(tE.any())}),rc=tE.object({method:tE.literal("eth_getTransactionByHash"),params:tE.array(tE.any())}),rd=tE.object({method:tE.literal("eth_getTransactionCount"),params:tE.array(tE.any())}),rp=tE.object({method:tE.literal("eth_getTransactionReceipt"),params:tE.array(tE.any())}),rh=tE.object({method:tE.literal("eth_getUncleCountByBlockHash"),params:tE.array(tE.any())}),ru=tE.object({method:tE.literal("eth_getUncleCountByBlockNumber"),params:tE.array(tE.any())}),rm=tE.object({method:tE.literal("eth_maxPriorityFeePerGas")}),rC=tE.object({method:tE.literal("eth_newBlockFilter")}),rg=tE.object({method:tE.literal("eth_newFilter"),params:tE.array(tE.any())}),r_=tE.object({method:tE.literal("eth_newPendingTransactionFilter")}),ry=tE.object({method:tE.literal("eth_sendRawTransaction"),params:tE.array(tE.any())}),rf=tE.object({method:tE.literal("eth_syncing"),params:tE.array(tE.any())}),rv=tE.object({method:tE.literal("eth_uninstallFilter"),params:tE.array(tE.any())}),rE=tE.object({method:tE.literal("personal_sign"),params:tE.array(tE.any())}),rN=tE.object({method:tE.literal("eth_signTypedData_v4"),params:tE.array(tE.any())}),rw=tE.object({method:tE.literal("eth_sendTransaction"),params:tE.array(tE.any())}),rA=tE.object({method:tE.literal("solana_signMessage"),params:tE.object({message:tE.string(),pubkey:tE.string()})}),rT=tE.object({method:tE.literal("solana_signTransaction"),params:tE.object({transaction:tE.string()})}),rb=tE.object({method:tE.literal("solana_signAllTransactions"),params:tE.object({transactions:tE.array(tE.string())})}),rk=tE.object({method:tE.literal("solana_signAndSendTransaction"),params:tE.object({transaction:tE.string(),options:tE.object({skipPreflight:tE.boolean().optional(),preflightCommitment:tE.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:tE.number().optional(),minContextSlot:tE.number().optional()}).optional()})}),rI=tE.object({method:tE.literal("wallet_sendCalls"),params:tE.array(tE.object({chainId:tE.string().or(tE.number()).optional(),from:tE.string().optional(),version:tE.string().optional(),capabilities:tE.any().optional(),calls:tE.array(tE.object({to:tE.string().startsWith("0x"),data:tE.string().startsWith("0x").optional(),value:tE.string().optional()}))}))}),rO=tE.object({method:tE.literal("wallet_getCallsStatus"),params:tE.array(tE.string())}),rR=tE.object({method:tE.literal("wallet_getCapabilities")}),rS=tE.object({method:tE.literal("wallet_grantPermissions"),params:tE.array(tE.any())}),rP=tE.object({method:tE.literal("wallet_revokePermissions"),params:tE.any()}),rU=tE.object({method:tE.literal("wallet_getAssets"),params:tE.any()}),rx=tE.object({token:tE.string()}),rL=tE.object({id:tE.string().optional()}),rD={appEvent:rL.extend({type:tw("APP_SWITCH_NETWORK"),payload:tA}).or(rL.extend({type:tw("APP_CONNECT_EMAIL"),payload:tT})).or(rL.extend({type:tw("APP_CONNECT_DEVICE")})).or(rL.extend({type:tw("APP_CONNECT_OTP"),payload:tb})).or(rL.extend({type:tw("APP_CONNECT_SOCIAL"),payload:tk})).or(rL.extend({type:tw("APP_GET_FARCASTER_URI")})).or(rL.extend({type:tw("APP_CONNECT_FARCASTER")})).or(rL.extend({type:tw("APP_GET_USER"),payload:tE.optional(tI)})).or(rL.extend({type:tw("APP_GET_SOCIAL_REDIRECT_URI"),payload:tO})).or(rL.extend({type:tw("APP_SIGN_OUT")})).or(rL.extend({type:tw("APP_IS_CONNECTED"),payload:tE.optional(rx)})).or(rL.extend({type:tw("APP_GET_CHAIN_ID")})).or(rL.extend({type:tw("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(rL.extend({type:tw("APP_INIT_SMART_ACCOUNT")})).or(rL.extend({type:tw("APP_SET_PREFERRED_ACCOUNT"),payload:tL})).or(rL.extend({type:tw("APP_RPC_REQUEST"),payload:rE.or(rU).or(tJ).or(tQ).or(tX).or(t0).or(t1).or(t3).or(t5).or(t4).or(t2).or(t9).or(t6).or(t8).or(t7).or(re).or(rt).or(rr).or(ra).or(rn).or(rs).or(ri).or(ro).or(rl).or(rc).or(rd).or(rp).or(rh).or(ru).or(rm).or(rC).or(rg).or(r_).or(ry).or(rf).or(rv).or(rE).or(rN).or(rw).or(rA).or(rT).or(rb).or(rk).or(rO).or(rI).or(rR).or(rS).or(rP)})).or(rL.extend({type:tw("APP_UPDATE_EMAIL"),payload:tR})).or(rL.extend({type:tw("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:tS})).or(rL.extend({type:tw("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:tP})).or(rL.extend({type:tw("APP_SYNC_THEME"),payload:tU})).or(rL.extend({type:tw("APP_SYNC_DAPP_DATA"),payload:tx})).or(rL.extend({type:tw("APP_RELOAD")})),frameEvent:rL.extend({type:tw("FRAME_SWITCH_NETWORK_ERROR"),payload:tN}).or(rL.extend({type:tw("FRAME_SWITCH_NETWORK_SUCCESS"),payload:tK})).or(rL.extend({type:tw("FRAME_CONNECT_EMAIL_SUCCESS"),payload:tD})).or(rL.extend({type:tw("FRAME_CONNECT_EMAIL_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:tM})).or(rL.extend({type:tw("FRAME_GET_FARCASTER_URI_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:tF})).or(rL.extend({type:tw("FRAME_CONNECT_FARCASTER_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_CONNECT_OTP_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_CONNECT_OTP_SUCCESS")})).or(rL.extend({type:tw("FRAME_CONNECT_DEVICE_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_CONNECT_DEVICE_SUCCESS")})).or(rL.extend({type:tw("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:tj})).or(rL.extend({type:tw("FRAME_CONNECT_SOCIAL_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_GET_USER_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_GET_USER_SUCCESS"),payload:tZ})).or(rL.extend({type:tw("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:tH})).or(rL.extend({type:tw("FRAME_SIGN_OUT_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_SIGN_OUT_SUCCESS")})).or(rL.extend({type:tw("FRAME_IS_CONNECTED_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_IS_CONNECTED_SUCCESS"),payload:tB})).or(rL.extend({type:tw("FRAME_GET_CHAIN_ID_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_GET_CHAIN_ID_SUCCESS"),payload:tV})).or(rL.extend({type:tw("FRAME_RPC_REQUEST_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_RPC_REQUEST_SUCCESS"),payload:tG})).or(rL.extend({type:tw("FRAME_SESSION_UPDATE"),payload:rx})).or(rL.extend({type:tw("FRAME_UPDATE_EMAIL_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_UPDATE_EMAIL_SUCCESS"),payload:tW})).or(rL.extend({type:tw("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(rL.extend({type:tw("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:t$})).or(rL.extend({type:tw("FRAME_SYNC_THEME_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_SYNC_THEME_SUCCESS")})).or(rL.extend({type:tw("FRAME_SYNC_DAPP_DATA_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(rL.extend({type:tw("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:tq})).or(rL.extend({type:tw("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:tz})).or(rL.extend({type:tw("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_READY"),payload:tY})).or(rL.extend({type:tw("FRAME_RELOAD_ERROR"),payload:tN})).or(rL.extend({type:tw("FRAME_RELOAD_SUCCESS")}))};function rM(e,t={}){return"string"==typeof t?.type&&t?.type?.includes(e)}class rF{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:a=!0}){if(this.iframe=null,this.rpcUrl="https://rpc.walletconnect.org",this.initFrame=()=>{let e=document.getElementById("w3m-iframe");this.iframe&&!e&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(e,t,r)=>{function a({data:r}){if(!rM(x.W3mFrameConstants.FRAME_EVENT_KEY,r))return;let n=rD.frameEvent.parse(r);n.id===e&&(t(n),window.removeEventListener("message",a))}U.W3mFrameHelpers.isClient&&(window.addEventListener("message",a),r.addEventListener("abort",()=>{window.removeEventListener("message",a)}))},onFrameEvent:e=>{U.W3mFrameHelpers.isClient&&window.addEventListener("message",({data:t})=>{rM(x.W3mFrameConstants.FRAME_EVENT_KEY,t)&&e(rD.frameEvent.parse(t))})},onAppEvent:e=>{U.W3mFrameHelpers.isClient&&window.addEventListener("message",({data:t})=>{rM(x.W3mFrameConstants.APP_EVENT_KEY,t)&&e(rD.appEvent.parse(t))})},postAppEvent:e=>{if(U.W3mFrameHelpers.isClient){if(!this.iframe?.contentWindow)throw Error("W3mFrame: iframe is not set");rD.appEvent.parse(e),this.iframe.contentWindow.postMessage(e,"*")}},postFrameEvent:e=>{if(U.W3mFrameHelpers.isClient){if(!parent)throw Error("W3mFrame: parent is not set");rD.frameEvent.parse(e),parent.postMessage(e,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}}),t&&(this.frameLoadPromise=new Promise((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}}),U.W3mFrameHelpers.isClient)){const t=document.createElement("iframe");t.id="w3m-iframe",t.src=`${x.SECURE_SITE_SDK}?projectId=${e}&chainId=${r}&version=${x.SECURE_SITE_SDK_VERSION}&enableLogger=${a}`,t.name="w3m-secure-iframe",t.style.position="fixed",t.style.zIndex="999999",t.style.display="none",t.style.animationDelay="0s, 50ms",t.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",t.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=t,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(e=>{"@w3m-frame/READY"===e.type&&this.frameLoadPromiseResolver?.resolve(void 0)})}}get networks(){return Object.assign({},...["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(e=>({[e]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${e}&projectId=${this.projectId}`,chainId:e}})))}}var rj=e.i(687542);class rW{constructor(e){const t=(0,rj.getDefaultLoggerOptions)({level:x.DEFAULT_LOG_LEVEL}),{logger:r,chunkLoggerController:a}=(0,rj.generatePlatformLogger)({opts:t});this.logger=(0,rj.generateChildLogger)(r,this.constructor.name),this.chunkLoggerController=a,"undefined"!=typeof window&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}var rZ=e.i(883732);class rH{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:a}){this.openRpcRequests=[],r&&(this.w3mLogger=new rW(e)),this.w3mFrame=new rF({projectId:e,isAppClient:!0,chainId:t,enableLogger:r}),this.onTimeout=a,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(async t=>{t.type===x.W3mFrameConstants.FRAME_READY&&(this.initPromise=void 0,await new Promise(e=>{setTimeout(e,500)}),e())})})}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return!!rZ.W3mFrameStorage.get(x.W3mFrameConstants.EMAIL_LOGIN_USED_KEY)}getEmail(){return rZ.W3mFrameStorage.get(x.W3mFrameConstants.EMAIL)}getUsername(){return rZ.W3mFrameStorage.get(x.W3mFrameConstants.SOCIAL_USERNAME)}async reload(){try{this.w3mFrame.initFrame(),await this.appEvent({type:x.W3mFrameConstants.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{U.W3mFrameHelpers.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();let t=await this.appEvent({type:x.W3mFrameConstants.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting email"),e}}async connectDevice(){try{return this.appEvent({type:x.W3mFrameConstants.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:x.W3mFrameConstants.APP_CONNECT_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting otp"),e}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};let e=await this.appEvent({type:x.W3mFrameConstants.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{let e=await this.appEvent({type:x.W3mFrameConstants.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return this.w3mFrame.initFrame(),this.appEvent({type:x.W3mFrameConstants.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting social redirect uri"),e}}async updateEmail(e){try{let t=await this.appEvent({type:x.W3mFrameConstants.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email"),e}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:x.W3mFrameConstants.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email primary otp"),e}}async updateEmailSecondaryOtp(e){try{let t=await this.appEvent({type:x.W3mFrameConstants.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(t.newEmail),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email secondary otp"),e}}async syncTheme(e){try{return this.appEvent({type:x.W3mFrameConstants.APP_SYNC_THEME,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing theme"),e}}async syncDappData(e){try{return this.appEvent({type:x.W3mFrameConstants.APP_SYNC_DAPP_DATA,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing dapp data"),e}}async getSmartAccountEnabledNetworks(){try{let e=await this.appEvent({type:x.W3mFrameConstants.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:x.W3mFrameConstants.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error setting preferred account"),e}}async connect(e){try{let t=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:t,preferredAccountType:e?.preferredAccountType});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async getUser(e){try{let t=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:x.W3mFrameConstants.APP_GET_USER,payload:{...e,chainId:t}});return this.user=r,r}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async connectSocial(e){try{this.w3mFrame.initFrame();let t=await this.appEvent({type:x.W3mFrameConstants.APP_CONNECT_SOCIAL,payload:{uri:e}});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting social"),e}}async getFarcasterUri(){try{return this.w3mFrame.initFrame(),await this.appEvent({type:x.W3mFrameConstants.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{let e=await this.appEvent({type:x.W3mFrameConstants.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork(e){try{let t=await this.appEvent({type:x.W3mFrameConstants.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(t.chainId),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error switching network"),e}}async disconnect(){try{let e=await this.appEvent({type:x.W3mFrameConstants.APP_SIGN_OUT});return this.deleteAuthLoginCache(),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){try{if(x.W3mFrameRpcConstants.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();this.rpcRequestHandler?.(e);let t=await this.appEvent({type:x.W3mFrameConstants.APP_RPC_REQUEST,payload:e});return this.rpcSuccessHandler?.(t,e),t}catch(t){throw this.rpcErrorHandler?.(t,e),this.w3mLogger?.logger.error({error:t},"Error requesting"),t}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===x.W3mFrameConstants.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===x.W3mFrameConstants.FRAME_IS_CONNECTED_ERROR&&e(),t.type!==x.W3mFrameConstants.FRAME_IS_CONNECTED_SUCCESS||t.payload.isConnected||e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===x.W3mFrameConstants.FRAME_GET_USER_SUCCESS&&e(t.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===x.W3mFrameConstants.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===x.W3mFrameConstants.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===x.W3mFrameConstants.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:x.W3mFrameRpcConstants.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(t=>{t.type===x.W3mFrameConstants.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(t.payload.smartAccountEnabledNetworks):t.type===x.W3mFrameConstants.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){try{this.openRpcRequests.forEach(({abortController:e,method:t})=>{x.W3mFrameRpcConstants.SAFE_RPC_METHODS.includes(t)||e.abort()}),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let t;function r(e){return e.replace("@w3m-app/","")}await this.w3mFrame.frameLoadPromise;let a=new AbortController,n=r(e.type);return[x.W3mFrameConstants.APP_CONNECT_EMAIL,x.W3mFrameConstants.APP_CONNECT_DEVICE,x.W3mFrameConstants.APP_CONNECT_OTP,x.W3mFrameConstants.APP_CONNECT_SOCIAL,x.W3mFrameConstants.APP_GET_SOCIAL_REDIRECT_URI].map(r).includes(n)&&(t=setTimeout(()=>{this.onTimeout?.(),a.abort()},3e4)),new Promise((r,s)=>{let i=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:i},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:i}),"RPC_REQUEST"===n&&(this.openRpcRequests=[...this.openRpcRequests,{...e.payload,abortController:a}]),a.signal.addEventListener("abort",()=>{"RPC_REQUEST"===n?s(Error("Request was aborted")):"GET_FARCASTER_URI"!==n&&s(Error("Something went wrong"))}),this.w3mFrame.events.registerFrameEventHandler(i,e=>{var a;return a=this.w3mLogger,void(e.id===i&&(a?.logger.info?.({framEvent:e,id:i},"Received frame response"),e.type===`@w3m-frame/${n}_SUCCESS`?(t&&clearTimeout(t),"payload"in e&&r(e.payload),r(void 0)):e.type===`@w3m-frame/${n}_ERROR`&&(t&&clearTimeout(t),"payload"in e&&s(Error(e.payload?.message||"An error occurred")),s(Error("An error occurred")))))},a.signal)})}setNewLastEmailLoginTime(){rZ.W3mFrameStorage.set(x.W3mFrameConstants.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){rZ.W3mFrameStorage.set(x.W3mFrameConstants.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&rZ.W3mFrameStorage.set(x.W3mFrameConstants.EMAIL,e),rZ.W3mFrameStorage.set(x.W3mFrameConstants.EMAIL_LOGIN_USED_KEY,"true"),rZ.W3mFrameStorage.delete(x.W3mFrameConstants.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){rZ.W3mFrameStorage.delete(x.W3mFrameConstants.EMAIL_LOGIN_USED_KEY),rZ.W3mFrameStorage.delete(x.W3mFrameConstants.EMAIL),rZ.W3mFrameStorage.delete(x.W3mFrameConstants.LAST_USED_CHAIN_KEY),rZ.W3mFrameStorage.delete(x.W3mFrameConstants.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&rZ.W3mFrameStorage.set(x.W3mFrameConstants.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){let e=rZ.W3mFrameStorage.get(x.W3mFrameConstants.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){rZ.W3mFrameStorage.set(x.W3mFrameConstants.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class rB{static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:a}){return rB.instance||(rB.instance=new rH({projectId:e,chainId:t,enableLogger:r,onTimeout:a})),rB.instance}}var rV=e.i(504627),rK=e.i(322521);let r$={validateCaipAddress(e){if(e.split(":")?.length!==3)throw Error("Invalid CAIP Address");return e},parseCaipAddress(e){let t=e.split(":");if(3!==t.length)throw Error(`Invalid CAIP-10 address: ${e}`);let[r,a,n]=t;if(!r||!a||!n)throw Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:r,chainId:a,address:n}},parseCaipNetworkId(e){let t=e.split(":");if(2!==t.length)throw Error(`Invalid CAIP-2 network id: ${e}`);let[r,a]=t;if(!r||!a)throw Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:r,chainId:a}}};var rq=e.i(754126),rY=e.i(148801),rz=e.i(499345),rG=e.i(732246),rJ=e.i(566582),rQ=e.i(812372);e.i(702649),e.i(607363);var rX=e.i(132006);e.i(824984);var r0=e.i(844696),r1=e.i(275431),r3=e.i(387127),r5=e.i(458229),r4=e.i(23720);function r2(e,t={}){let{key:r="fallback",name:a="Fallback",rank:n=!1,shouldThrow:s=r9,retryCount:i,retryDelay:o}=t;return({chain:t,pollingInterval:l=4e3,timeout:c,...d})=>{let p=e,h=()=>{},u=(0,r4.createTransport)({key:r,name:a,async request({method:e,params:r}){let a,n=async(i=0)=>{let o=p[i]({...d,chain:t,retryCount:0,timeout:c});try{let t=await o.request({method:e,params:r});return h({method:e,params:r,response:t,transport:o,status:"success"}),t}catch(l){if(h({error:l,method:e,params:r,transport:o,status:"error"}),s(l)||i===p.length-1||!(a??=p.slice(i+1).some(r=>{let{include:a,exclude:n}=r({chain:t}).config.methods||{};return a?a.includes(e):!n||!n.includes(e)})))throw l;return n(i+1)}};return n()},retryCount:i,retryDelay:o,type:"fallback"},{onResponse:e=>h=e,transports:p.map(e=>e({chain:t,retryCount:0}))});if(n){let e="object"==typeof n?n:{};!function({chain:e,interval:t=4e3,onTransports:r,ping:a,sampleCount:n=10,timeout:s=1e3,transports:i,weights:o={}}){let{stability:l=.7,latency:c=.3}=o,d=[],p=async()=>{let o=await Promise.all(i.map(async t=>{let r,n,i=t({chain:e,retryCount:0,timeout:s}),o=Date.now();try{await (a?a({transport:i}):i.request({method:"net_listening"})),n=1}catch{n=0}finally{r=Date.now()}return{latency:r-o,success:n}}));d.push(o),d.length>n&&d.shift();let h=Math.max(...d.map(e=>Math.max(...e.map(({latency:e})=>e))));r(i.map((e,t)=>{let r=d.map(e=>e[t].latency),a=r.reduce((e,t)=>e+t,0)/r.length,n=d.map(e=>e[t].success),s=n.reduce((e,t)=>e+t,0)/n.length;return 0===s?[0,t]:[c*(1-a/h)+l*s,t]}).sort((e,t)=>t[0]-e[0]).map(([,e])=>i[e])),await (0,r5.wait)(t),p()};p()}({chain:t,interval:e.interval??l,onTransports:e=>p=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:p,weights:e.weights})}return u}}function r9(e){return!!("code"in e&&"number"==typeof e.code&&(e.code===r3.TransactionRejectedRpcError.code||e.code===r3.UserRejectedRequestError.code||r1.ExecutionRevertedError.nodeMessage.test(e.message)||5e3===e.code))}var r6=e.i(878e3);d.ConstantsUtil.CONNECTOR_ID.COINBASE,d.ConstantsUtil.CONNECTOR_ID.COINBASE_SDK,d.ConstantsUtil.CONNECTOR_ID.SAFE,d.ConstantsUtil.CONNECTOR_ID.LEDGER,d.ConstantsUtil.CONNECTOR_ID.OKX,P.ConstantsUtil.METMASK_CONNECTOR_NAME,P.ConstantsUtil.TRUST_CONNECTOR_NAME,P.ConstantsUtil.SOLFLARE_CONNECTOR_NAME,P.ConstantsUtil.PHANTOM_CONNECTOR_NAME,P.ConstantsUtil.COIN98_CONNECTOR_NAME,P.ConstantsUtil.MAGIC_EDEN_CONNECTOR_NAME,P.ConstantsUtil.BACKPACK_CONNECTOR_NAME,P.ConstantsUtil.BITGET_CONNECTOR_NAME,P.ConstantsUtil.FRONTIER_CONNECTOR_NAME,P.ConstantsUtil.XVERSE_CONNECTOR_NAME,P.ConstantsUtil.LEATHER_CONNECTOR_NAME;let r8={1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",0xaa36a7:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",0x4e454152:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},r7={[d.ConstantsUtil.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[d.ConstantsUtil.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[d.ConstantsUtil.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[d.ConstantsUtil.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[d.ConstantsUtil.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ae={[d.ConstantsUtil.CONNECTOR_ID.INJECTED]:"Browser Wallet",[d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[d.ConstantsUtil.CONNECTOR_ID.COINBASE]:"Coinbase",[d.ConstantsUtil.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[d.ConstantsUtil.CONNECTOR_ID.LEDGER]:"Ledger",[d.ConstantsUtil.CONNECTOR_ID.SAFE]:"Safe"};function at(e,t){let r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",e),r.searchParams.set("projectId",t),r.toString()}d.ConstantsUtil.CONNECTOR_ID.INJECTED,d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT,d.ConstantsUtil.CONNECTOR_ID.EIP6963,d.ConstantsUtil.CONNECTOR_ID.AUTH;let ar=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],aa={extendRpcUrlWithProjectId(e,t){let r=!1;try{r="rpc.walletconnect.org"===new URL(e).host}catch(e){r=!1}if(r){let r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork:e=>"chainNamespace"in e&&"caipNetworkId"in e,getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:d.ConstantsUtil.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${d.ConstantsUtil.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,r){let a=e.rpcUrls?.default?.http?.[0];return ar.includes(t)?at(t,r):a||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:a}){let n=this.getChainNamespace(e),s=this.getCaipNetworkId(e),i=e.rpcUrls.default.http?.[0],o=this.getDefaultRpcUrl(e,s,r),l=e?.rpcUrls?.chainDefault?.http?.[0]||i,c=a?.[s]?.map(e=>e.url)||[],d=[...c,o],p=[...c];return l&&!p.includes(l)&&p.push(l),{...e,chainNamespace:n,caipNetworkId:s,assets:{imageId:r8[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:d},chainDefault:{http:p}}}},extendCaipNetworks:(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:a})=>e.map(e=>aa.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:a,projectId:r})),getViemTransport(e,t,r){let a=[];return r?.forEach(e=>{a.push((0,r6.http)(e.url,e.config))}),ar.includes(e.caipNetworkId)&&a.push((0,r6.http)(at(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),e?.rpcUrls?.default?.http?.forEach(e=>{a.push((0,r6.http)(e))}),r2(a)},extendWagmiTransports(e,t,r){if(ar.includes(e.caipNetworkId)){let a=this.getDefaultRpcUrl(e,e.caipNetworkId,t);return r2([r,(0,r6.http)(a)])}return r},getUnsupportedNetwork:e=>({id:e.split(":")[1],caipNetworkId:e,name:d.ConstantsUtil.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(e){let t=N.StorageUtil.getActiveCaipNetworkId(),r=v.ChainController.getAllRequestedCaipNetworks(),a=Array.from(v.ChainController.state.chains?.keys()||[]),n=t?.split(":")[0],s=!!n&&a.includes(n),i=r?.find(e=>e.caipNetworkId===t);return s&&!i&&t?this.getUnsupportedNetwork(t):i||e||r?.[0]}},an={createLogger(e,t="error"){let r=(0,rj.getDefaultLoggerOptions)({level:t}),{logger:a}=(0,rj.generatePlatformLogger)({opts:r});return a.error=(...t)=>{for(let r of t)if(r instanceof Error)return void e(r,...t);e(void 0,...t)},a}};var as=e.i(344048),ai=e.i(102617),ao=e.i(81962);let al={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};function ac(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}e.s(["WcConstantsUtil",0,al],785318);let ad=ac({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),ap=ac({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});ac({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),ac({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),ac({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});let ah={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},au={getMethodsByChainNamespace:e=>ah[e]||[],createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};let r={...e},a=new Set;if(t.methods&&Object.keys(t.methods).forEach(e=>a.add(e)),t.chains&&Object.keys(t.chains).forEach(e=>a.add(e)),t.events&&Object.keys(t.events).forEach(e=>a.add(e)),t.rpcMap&&Object.keys(t.rpcMap).forEach(e=>{let[t]=e.split(":");t&&a.add(t)}),a.forEach(e=>{r[e]||(r[e]=this.createDefaultNamespace(e))}),t.methods&&Object.entries(t.methods).forEach(([e,t])=>{r[e]&&(r[e].methods=t)}),t.chains&&Object.entries(t.chains).forEach(([e,t])=>{r[e]&&(r[e].chains=t)}),t.events&&Object.entries(t.events).forEach(([e,t])=>{r[e]&&(r[e].events=t)}),t.rpcMap){let e=new Set;Object.entries(t.rpcMap).forEach(([t,a])=>{let[n,s]=t.split(":");n&&s&&r[n]&&(r[n].rpcMap||(r[n].rpcMap={}),e.has(n)||(r[n].rpcMap={},e.add(n)),r[n].rpcMap[s]=a)})}return r},createNamespaces(e,t){let r=e.reduce((e,t)=>{let{id:r,chainNamespace:a,rpcUrls:n}=t,s=n.default.http[0];e[a]||(e[a]=this.createDefaultNamespace(a));let i=`${a}:${r}`,o=e[a];switch(o.chains.push(i),i){case ad.caipNetworkId:o.chains.push(ad.deprecatedCaipNetworkId);break;case ap.caipNetworkId:o.chains.push(ap.deprecatedCaipNetworkId)}return o?.rpcMap&&s&&(o.rpcMap[r]=s),e},{});return this.applyNamespaceOverrides(r,t)},resolveReownName:async e=>{let t=await rz.EnsController.resolveName(e),r=Object.values(t?.addresses)||[];return r[0]?.address||!1},getChainsFromNamespaces:(e={})=>Object.values(e).flatMap(e=>Array.from(new Set([...e.chains||[],...e.accounts.map(e=>{let[t,r]=e.split(":");return`${t}:${r}`})]))),isSessionEventData:e=>"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event};e.s(["DEFAULT_METHODS",0,ah,"WcHelpersUtil",0,au],666754),e.s([],965768),e.s([],915612);class am{constructor({provider:e,namespace:t}){this.id=d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT,this.name=ae[d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=r7[d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=v.ChainController.getCaipNetworks.bind(v.ChainController),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){let e=this.getCaipNetworks(),t=E.OptionsController.state.universalProviderConfigOverride,r=au.createNamespaces(e,t);await this.provider.connect({optionalNamespaces:r})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(e=>e.caipNetworkId);return ao.SIWXUtil.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:aC})}}let aC=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class ag{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=e=>v.ChainController.getCaipNetworks(e),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:d.ConstantsUtil.CONNECTOR_ID.AUTH,type:"AUTH",name:d.ConstantsUtil.CONNECTOR_NAMES.AUTH,provider:e,imageId:r7[d.ConstantsUtil.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(e=>!t.has(e.id)&&(t.add(e.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){y.AccountController.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let r=this.eventListeners.get(e);r&&r.forEach(e=>e(t))}async connectWalletConnect(e){let t=this.getWalletConnectConnector();return{clientId:(await t.connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:r}=e;if(!e.provider)return;let a="provider"in e.provider?e.provider.provider:e.provider;if("WALLET_CONNECT"===r)return void a.setDefaultChain(t.caipNetworkId);if(a&&"AUTH"===r){let e=y.AccountController.state.preferredAccountTypes?.[t.chainNamespace];await a.switchNetwork(t.caipNetworkId);let r=await a.getUser({chainId:t.caipNetworkId,preferredAccountType:e});this.emit("switchNetwork",r)}}getWalletConnectConnector(){let e=this.connectors.find(e=>e instanceof am);if(!e)throw Error("WalletConnectConnector not found");return e}}class a_ extends ag{setUniversalProvider(e){this.addConnector(new am({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{let e=this.getWalletConnectConnector();await e.disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let t=this.provider;return Promise.resolve({accounts:(t?.session?.namespaces?.[e]?.accounts?.map(e=>{let[,,t]=e.split(":");return t}).filter((e,t,r)=>r.indexOf(e)===t)||[]).map(t=>c.CoreHelperUtil.createAccount(e,t,"bip122"===e?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&C.ConstantsUtil.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(y.AccountController.state.balanceLoading&&e.chainId===v.ChainController.state.activeCaipNetwork?.id)return{balance:y.AccountController.state.balance||"0.00",symbol:y.AccountController.state.balanceSymbol||""};let t=(await y.AccountController.fetchTokenBalance()).find(t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:t?.quantity.numeric||"0.00",symbol:t?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:r,address:a}=e;if(!t)throw Error("UniversalAdapter:signMessage - provider is undefined");return{signature:v.ChainController.state.activeCaipNetwork?.chainNamespace===d.ConstantsUtil.CHAIN.SOLANA?(await t.request({method:"solana_signMessage",params:{message:as.default.encode(new TextEncoder().encode(r)),pubkey:a}},v.ChainController.state.activeCaipNetwork?.caipNetworkId)).signature:await t.request({method:"personal_sign",params:[r,a]},v.ChainController.state.activeCaipNetwork?.caipNetworkId)}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===d.ConstantsUtil.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,ai.toHex)(t.id)}]})}catch(e){if(e.code===al.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||e.code===al.ERROR_INVALID_CHAIN_ID||e.code===al.ERROR_CODE_DEFAULT||e?.data?.originalError?.code===al.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:(0,ai.toHex)(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch(e){throw Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){let e=this.connectors.find(e=>"WALLET_CONNECT"===e.type);return e?.provider}}class ay{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(e,t)=>{if(e){let r=v.ChainController.getNetworkData(e)?.requestedCaipNetworks?.find(e=>e.id===t);if(r)return r;let a=v.ChainController.getNetworkData(e)?.caipNetwork;return a||v.ChainController.getRequestedCaipNetworks(e).filter(t=>t.chainNamespace===e)?.[0]}return v.ChainController.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>v.ChainController.getCaipNetworks(e),this.getActiveChainNamespace=()=>v.ChainController.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{v.ChainController.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>v.ChainController.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>v.ChainController.state.activeChain!==e&&e?v.ChainController.getAccountProp("caipAddress",e):v.ChainController.state.activeCaipAddress,this.setClientId=e=>{rY.BlockchainApiController.setClientId(e)},this.getProvider=e=>S.getProvider(e),this.getProviderType=e=>S.getProviderId(e),this.getPreferredAccountType=e=>y.AccountController.state.preferredAccountTypes?.[e],this.setCaipAddress=(e,t)=>{y.AccountController.setCaipAddress(e,t)},this.setBalance=(e,t,r)=>{y.AccountController.setBalance(e,t,r)},this.setProfileName=(e,t)=>{y.AccountController.setProfileName(e,t)},this.setProfileImage=(e,t)=>{y.AccountController.setProfileImage(e,t)},this.setUser=(e,t)=>{y.AccountController.setUser(e,t),E.OptionsController.state.enableEmbedded&&rG.ModalController.close()},this.resetAccount=e=>{y.AccountController.resetAccount(e)},this.setCaipNetwork=e=>{v.ChainController.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{v.ChainController.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=(e,t)=>{y.AccountController.setAllAccounts(e,t),E.OptionsController.setHasMultipleAddresses(e?.length>1)},this.setStatus=(e,t)=>{y.AccountController.setStatus(e,t),m.ConnectorController.isConnected()?N.StorageUtil.setConnectionStatus("connected"):N.StorageUtil.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>v.ChainController.getAccountProp("address",e),this.setConnectors=e=>{let t=[...m.ConnectorController.state.allConnectors,...e];m.ConnectorController.setConnectors(t)},this.fetchIdentity=e=>rY.BlockchainApiController.fetchIdentity(e),this.getReownName=e=>rz.EnsController.getNamesForAddress(e),this.getConnectors=()=>m.ConnectorController.getConnectors(),this.getConnectorImage=e=>rq.AssetUtil.getConnectorImage(e),this.setConnectedWalletInfo=(e,t)=>{let r=S.getProviderId(t),a=e?{...e,type:r}:void 0;y.AccountController.setConnectedWalletInfo(a,t)},this.getIsConnectedState=()=>!!v.ChainController.state.activeCaipAddress,this.addAddressLabel=(e,t,r)=>{y.AccountController.addAddressLabel(e,t,r)},this.removeAddressLabel=(e,t)=>{y.AccountController.removeAddressLabel(e,t)},this.getAddress=e=>v.ChainController.state.activeChain!==e&&e?v.ChainController.getAccountProp("address",e):y.AccountController.state.address,this.setApprovedCaipNetworksData=e=>v.ChainController.setApprovedCaipNetworksData(e),this.resetNetwork=e=>{v.ChainController.resetNetwork(e)},this.addConnector=e=>{m.ConnectorController.addConnector(e)},this.resetWcConnection=()=>{u.ConnectionController.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{y.AccountController.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=(e,t)=>{y.AccountController.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=(e,t)=>{v.ChainController.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=(e,t)=>{y.AccountController.setPreferredAccountType(e,t)},this.setEIP6963Enabled=e=>{E.OptionsController.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{this.isOpen()?this.isTransactionStackEmpty()||this.redirect("ApproveTransaction"):this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,t){let r=e?.map(e=>e.namespace).filter(e=>!!e);return r?.length?[...new Set(r)]:[...new Set(t?.map(e=>e.chainNamespace))]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),_.PublicStateController.set({initialized:!0}),await this.syncExistingConnection()}sendInitializeEvent(e){let{...t}=e;delete t.adapters,delete t.universalProvider,g.EventsController.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(e=>e.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&w.ThemeController.setThemeMode(e.themeMode),e.themeVariables&&w.ThemeController.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw Error("ConnectionControllerClient and NetworkControllerClient must be set");v.ChainController.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&v.ChainController.setActiveCaipNetwork(t)}initializeConnectionController(e){u.ConnectionController.setWcBasic(e.basic??!1)}initializeConnectorController(){m.ConnectorController.initialize(this.chainNamespaces)}initializeOptionsController(e){E.OptionsController.setDebug(!1!==e.debug),E.OptionsController.setEnableWalletConnect(!1!==e.enableWalletConnect),E.OptionsController.setEnableWalletGuide(!1!==e.enableWalletGuide),E.OptionsController.setEnableWallets(!1!==e.enableWallets),E.OptionsController.setEIP6963Enabled(!1!==e.enableEIP6963),E.OptionsController.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),E.OptionsController.setEnableAuthLogger(!1!==e.enableAuthLogger),E.OptionsController.setCustomRpcUrls(e.customRpcUrls),E.OptionsController.setSdkVersion(e.sdkVersion),E.OptionsController.setProjectId(e.projectId),E.OptionsController.setEnableEmbedded(e.enableEmbedded),E.OptionsController.setAllWallets(e.allWallets),E.OptionsController.setIncludeWalletIds(e.includeWalletIds),E.OptionsController.setExcludeWalletIds(e.excludeWalletIds),E.OptionsController.setFeaturedWalletIds(e.featuredWalletIds),E.OptionsController.setTokens(e.tokens),E.OptionsController.setTermsConditionsUrl(e.termsConditionsUrl),E.OptionsController.setPrivacyPolicyUrl(e.privacyPolicyUrl),E.OptionsController.setCustomWallets(e.customWallets),E.OptionsController.setFeatures(e.features),E.OptionsController.setAllowUnsupportedChain(e.allowUnsupportedChain),E.OptionsController.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),E.OptionsController.setDefaultAccountTypes(e.defaultAccountTypes);let t=N.StorageUtil.getPreferredAccountTypes(),r={...E.OptionsController.state.defaultAccountTypes,...t};y.AccountController.setPreferredAccountTypes(r);let a=this.getDefaultMetaData();if(!e.metadata&&a&&(e.metadata=a),E.OptionsController.setMetadata(e.metadata),E.OptionsController.setDisableAppend(e.disableAppend),E.OptionsController.setEnableEmbedded(e.enableEmbedded),E.OptionsController.setSIWX(e.siwx),!e.projectId)return void f.AlertController.open(T.PROJECT_ID_NOT_CONFIGURED,"error");if(e.adapters?.find(e=>e.namespace===d.ConstantsUtil.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw Error("Cannot set both `siweConfig` and `siwx` options");E.OptionsController.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return"undefined"!=typeof window&&"undefined"!=typeof document?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let r=aa.getUnsupportedNetwork(`${t}:${e}`);v.ChainController.setActiveCaipNetwork(r)}}getDefaultNetwork(){return aa.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return aa.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return aa.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(t=>t.id===e.defaultNetwork?.id);return t?aa.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=v.ChainController.state.activeChain,t=this.getAdapter(e),r=this.getCaipNetwork(e)?.id;if(!t)throw Error("Adapter not found");let a=await t.connectWalletConnect(r);this.close(),this.setClientId(a?.clientId||null),N.StorageUtil.setConnectedNamespaces([...v.ChainController.state.chains.keys()]),this.chainNamespaces.forEach(e=>{m.ConnectorController.setConnectorId(P.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT,e)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:r,provider:a,chain:n,caipNetwork:s})=>{let i=v.ChainController.state.activeChain,o=n||i,l=this.getAdapter(o);if(n&&n!==i&&!s){let e=this.getCaipNetworks().find(e=>e.chainNamespace===n);e&&this.setCaipNetwork(e)}if(!l)throw Error("Adapter not found");let c=this.getCaipNetwork(o),d=await l.connect({id:e,info:t,type:r,provider:a,chainId:s?.id||c?.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]||c?.rpcUrls?.default?.http?.[0]});if(!d)return;N.StorageUtil.addConnectedNamespace(o),this.syncProvider({...d,chainNamespace:o});let{accounts:p}=await l.getAccounts({namespace:o,id:e});this.setAllAccounts(p,o),this.setStatus("connected",o)},reconnectExternal:async({id:e,info:t,type:r,provider:a})=>{let n=v.ChainController.state.activeChain,s=this.getAdapter(n);s?.reconnect&&(await s?.reconnect({id:e,info:t,type:r,provider:a,chainId:this.getCaipNetwork()?.id}),N.StorageUtil.addConnectedNamespace(n))},disconnect:async e=>{let t=e||v.ChainController.state.activeChain,r=this.getAdapter(t),a=S.getProvider(t),n=S.getProviderId(t);await r?.disconnect({provider:a,providerType:n}),N.StorageUtil.removeConnectedNamespace(t),S.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t)},checkInstalled:e=>e?e.some(e=>!!window.ethereum?.[String(e)]):!!window.ethereum,signMessage:async e=>{let t=this.getAdapter(v.ChainController.state.activeChain),r=await t?.signMessage({message:e,address:y.AccountController.state.address,provider:S.getProvider(v.ChainController.state.activeChain)});return r?.signature||""},sendTransaction:async e=>{if(e.chainNamespace===d.ConstantsUtil.CHAIN.EVM){let t=this.getAdapter(v.ChainController.state.activeChain),r=S.getProvider(v.ChainController.state.activeChain),a=await t?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:r});return a?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===d.ConstantsUtil.CHAIN.EVM){let t=this.getAdapter(v.ChainController.state.activeChain),r=S.getProvider(v.ChainController.state.activeChain),a=this.getCaipNetwork();if(!a)throw Error("CaipNetwork is undefined");let n=await t?.estimateGas({...e,provider:r,caipNetwork:a});return n?.gas||0n}return 0n},getEnsAvatar:async()=>{let e=this.getAdapter(v.ChainController.state.activeChain),t=await e?.getProfile({address:y.AccountController.state.address,chainId:Number(this.getCaipNetwork()?.id)});return t?.profileImage||!1},getEnsAddress:async e=>{let t=this.getAdapter(v.ChainController.state.activeChain),r=this.getCaipNetwork();if(!r)return!1;let a=await t?.getEnsAddress({name:e,caipNetwork:r});return a?.address||!1},writeContract:async e=>{let t=this.getAdapter(v.ChainController.state.activeChain),r=this.getCaipNetwork(),a=this.getCaipAddress(),n=S.getProvider(v.ChainController.state.activeChain);if(!r||!a)throw Error("CaipNetwork or CaipAddress is undefined");let s=await t?.writeContract({...e,caipNetwork:r,provider:n,caipAddress:a});return s?.hash},parseUnits:(e,t)=>{let r=this.getAdapter(v.ChainController.state.activeChain);return r?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{let r=this.getAdapter(v.ChainController.state.activeChain);return r?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{let t=this.getAdapter(v.ChainController.state.activeChain);return await t?.getCapabilities(e)},grantPermissions:async e=>{let t=this.getAdapter(v.ChainController.state.activeChain);return await t?.grantPermissions(e)},revokePermissions:async e=>{let t=this.getAdapter(v.ChainController.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{let t=this.getAdapter(v.ChainController.state.activeChain);return await t?.walletGetAssets(e)??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},u.ConnectionController.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(S.getProviderId(v.ChainController.state.activeChain)===P.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT){let e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let r=S.getProvider(t),a=S.getProviderId(t);if(e.chainNamespace===v.ChainController.state.activeChain){let n=this.getAdapter(t);await n?.switchNetwork({caipNetwork:e,provider:r,providerType:a})}else if(this.setCaipNetwork(e),a===P.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let r=this.getAddressByChainNamespace(t);r&&this.syncAccount({address:r,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(e=>Array.from(new Set([...e.chains||[],...e.accounts.map(e=>{let{chainId:t,chainNamespace:r}=r$.parseCaipAddress(e);return`${r}:${t}`})])))}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,r)=>{let a=e?.find(e=>e.namespace===r);return a?(a.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[r]=a):t[r]=new a_({namespace:r,networks:this.getCaipNetworks()}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){let t=this.getAdapter(e);t?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let r=N.StorageUtil.getConnectionStatus();"connected"===r?this.setStatus("connecting",e):("disconnected"===r&&N.StorageUtil.clearAddressCache(),this.setStatus(r,e)),t.on("switchNetwork",({address:t,chainId:r})=>{let a=this.getCaipNetworks().find(e=>e.id===r||e.caipNetworkId===r),n=v.ChainController.state.activeChain===e,s=v.ChainController.getAccountProp("address",e);if(a){let r=n&&t?t:s;r&&this.syncAccount({address:r,chainId:a.id,chainNamespace:e})}else this.setUnsupportedNetwork(r)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("pendingTransactions",()=>{let e=y.AccountController.state.address,t=v.ChainController.state.activeCaipNetwork;e&&t?.id&&this.updateNativeBalance(e,t.id,t.chainNamespace)}),t.on("accountChanged",({address:t,chainId:r})=>{let a=v.ChainController.state.activeChain===e;a&&r?this.syncAccount({address:t,chainId:r,chainNamespace:e}):a&&v.ChainController.state.activeCaipNetwork?.id?this.syncAccount({address:t,chainId:v.ChainController.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(t,r,e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{let t=m.ConnectorController.getConnectorId(e);switch(this.setStatus("connecting",e),t){case d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case d.ConstantsUtil.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),r=m.ConnectorController.getConnectorId(e),a=this.getCaipNetwork(e),n=m.ConnectorController.getConnectors(e).find(e=>e.id===r);try{if(!t||!n)throw Error(`Adapter or connector not found for namespace ${e}`);if(!a?.id)throw Error("CaipNetwork not found");let r=await t?.syncConnection({namespace:e,id:n.id,chainId:a.id,rpcUrl:a?.rpcUrls?.default?.http?.[0]});if(r){let a=await t?.getAccounts({namespace:e,id:n.id});a&&a.accounts.length>0?this.setAllAccounts(a.accounts,e):this.setAllAccounts([c.CoreHelperUtil.createAccount(e,r.address,"eoa")],e),this.syncProvider({...r,chainNamespace:e}),await this.syncAccount({...r,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch(t){this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async e=>{let t=this.getAdapter(e),r=this.universalProvider?.session?.namespaces?.[e]?.accounts||[],a=v.ChainController.state.activeCaipNetwork?.id,n=r.find(e=>{let{chainId:t}=r$.parseCaipAddress(e);return t===a?.toString()})||r[0];if(n){let r=r$.validateCaipAddress(n),{chainId:a,address:s}=r$.parseCaipAddress(r);if(S.setProviderId(e,P.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&v.ChainController.state.activeCaipNetwork&&t?.namespace!==d.ConstantsUtil.CHAIN.EVM){let r=t?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:v.ChainController.state.activeCaipNetwork});S.setProvider(e,r)}else S.setProvider(e,this.universalProvider);m.ConnectorController.setConnectorId(d.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT,e),N.StorageUtil.addConnectedNamespace(e),this.syncWalletConnectAccounts(e),await this.syncAccount({address:s,chainId:a,chainNamespace:e})}else this.setStatus("disconnected",e);await v.ChainController.setApprovedCaipNetworksData(e)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(e=>{let{address:t}=r$.parseCaipAddress(e);return t}).filter((e,t,r)=>r.indexOf(e)===t);t&&this.setAllAccounts(t.map(t=>c.CoreHelperUtil.createAccount(e,t,"bip122"===e?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:r,chainNamespace:a}){S.setProviderId(a,e),S.setProvider(a,t),m.ConnectorController.setConnectorId(r,a)}async syncAccount(e){let t=e.chainNamespace===v.ChainController.state.activeChain,r=v.ChainController.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:a,chainId:n,chainNamespace:s}=e,{chainId:i}=N.StorageUtil.getActiveNetworkProps(),o=n||i,l=v.ChainController.state.activeCaipNetwork?.name===d.ConstantsUtil.UNSUPPORTED_NETWORK_NAME,c=v.ChainController.getNetworkProp("supportsAllNetworks",s);if(this.setStatus("connected",s),(!l||c)&&o){let e=this.getCaipNetworks().find(e=>e.id.toString()===o.toString()),n=this.getCaipNetworks().find(e=>e.chainNamespace===s);if(!c&&!e&&!n){let t=this.getApprovedCaipNetworkIds()||[],r=t.find(e=>r$.parseCaipNetworkId(e)?.chainId===o.toString()),a=t.find(e=>r$.parseCaipNetworkId(e)?.chainNamespace===s);e=this.getCaipNetworks().find(e=>e.caipNetworkId===r),n=this.getCaipNetworks().find(e=>e.caipNetworkId===a||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===a)}let i=e||n;i?.chainNamespace===v.ChainController.state.activeChain?E.OptionsController.state.enableNetworkSwitch&&!E.OptionsController.state.allowUnsupportedChain&&v.ChainController.state.activeCaipNetwork?.name===d.ConstantsUtil.UNSUPPORTED_NETWORK_NAME?v.ChainController.showUnsupportedChainUI():this.setCaipNetwork(i):!t&&r&&this.setCaipNetworkOfNamespace(r,s),this.syncConnectedWalletInfo(s),b.HelpersUtil.isLowerCaseMatch(a,y.AccountController.state.address)||this.syncAccountInfo(a,i?.id,s),t?await this.syncBalance({address:a,chainId:i?.id,chainNamespace:s}):await this.syncBalance({address:a,chainId:r?.id,chainNamespace:s})}}async syncAccountInfo(e,t,r){let a=this.getCaipAddress(r),n=t||a?.split(":")[1];if(!n)return;let s=`${r}:${n}:${e}`;this.setCaipAddress(s,r),await this.syncIdentity({address:e,chainId:n,chainNamespace:r})}async syncReownName(e,t){try{let r=await this.getReownName(e);if(r[0]){let e=r[0];this.setProfileName(e.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=m.ConnectorController.getConnectorId(e),r=S.getProviderId(e);if(r===P.ConstantsUtil.CONNECTOR_TYPE_ANNOUNCED||r===P.ConstantsUtil.CONNECTOR_TYPE_INJECTED){if(t){let r=this.getConnectors().find(e=>e.id===t);if(r){let{info:t,name:a,imageUrl:n}=r,s=n||this.getConnectorImage(r);this.setConnectedWalletInfo({name:a,icon:s,...t},e)}}}else if(r===P.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT){let t=S.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t)if(t===d.ConstantsUtil.CONNECTOR_ID.COINBASE){let t=this.getConnectors().find(e=>e.id===d.ConstantsUtil.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(t)},e)}else this.setConnectedWalletInfo({name:t},e)}async syncBalance(e){rK.NetworkUtil.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(t=>t.id.toString()===e.chainId?.toString())&&e.chainId&&await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,t,r){let a=this.getAdapter(r),n=v.ChainController.getCaipNetworkByNamespace(r,t);if(a){let s=await a.getBalance({address:e,chainId:t,caipNetwork:n,tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,r)}}async initializeUniversalAdapter(){let e=an.createLogger((e,...t)=>{e&&this.handleAlertError(e),console.error(...t)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};E.OptionsController.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await rV.default.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{u.ConnectionController.setUri(e)}),this.universalProvider.on("connect",u.ConnectionController.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),u.ConnectionController.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.getCaipNetworks().find(t=>t.id==e),r=this.getCaipNetwork();t?r?.id!==t?.id&&this.setCaipNetwork(t):this.setUnsupportedNetwork(e)}),this.universalProvider.on("session_event",e=>{if(au.isSessionEventData(e)){let{name:t,data:r}=e.params.event;"accountsChanged"===t&&Array.isArray(r)&&c.CoreHelperUtil.isCaipAddress(r[0])&&this.syncAccount(r$.parseCaipAddress(r[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&c.CoreHelperUtil.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){g.EventsController.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let[t,r]=Object.entries(A).find(([,{message:t}])=>e.message.includes(t))??[],{message:a,alertErrorKey:n}=r??{};if(t&&a&&!this.reportedAlertErrors[t]){let e=T[n];e&&(f.AlertController.open(e,"error"),this.reportedAlertErrors[t]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;t&&(this.createClients(),e.namespace=t,e.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=e))}async open(e){return(await this.injectModalUi(),e?.uri&&u.ConnectionController.setUri(e.uri),e?.arguments&&e?.view==="Swap")?rG.ModalController.open({...e,data:{swap:e.arguments}}):rG.ModalController.open(e)}async close(){await this.injectModalUi(),rG.ModalController.close()}setLoading(e,t){rG.ModalController.setLoading(e,t)}async disconnect(e){await u.ConnectionController.disconnect(e)}getError(){return""}getChainId(){return v.ChainController.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.getCaipNetworks().find(t=>t.id===e.id);t?await v.ChainController.switchActiveNetwork(t):f.AlertController.open(T.SWITCH_NETWORK_NOT_FOUND,"error")}getWalletProvider(){return v.ChainController.state.activeChain?S.state.providers[v.ChainController.state.activeChain]:null}getWalletProviderType(){return S.getProviderId(v.ChainController.state.activeChain)}subscribeProviders(e){return S.subscribeProviders(e)}getThemeMode(){return w.ThemeController.state.themeMode}getThemeVariables(){return w.ThemeController.state.themeVariables}setThemeMode(e){w.ThemeController.setThemeMode(e),(0,r0.setColorTheme)(w.ThemeController.state.themeMode)}setTermsConditionsUrl(e){E.OptionsController.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){E.OptionsController.setPrivacyPolicyUrl(e)}setThemeVariables(e){w.ThemeController.setThemeVariables(e),(0,r0.setThemeVariables)(w.ThemeController.state.themeVariables)}subscribeTheme(e){return w.ThemeController.subscribe(e)}getWalletInfo(){return y.AccountController.state.connectedWalletInfo}getAccount(e){let t=m.ConnectorController.getAuthConnector(e),r=v.ChainController.getAccountData(e),a=v.ChainController.state.activeChain;if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:c.CoreHelperUtil.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:t?{user:r.user?{...r.user,username:N.StorageUtil.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:r.preferredAccountTypes?.[e||a],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let r=()=>{let r=this.getAccount(t);r&&e(r)};t?v.ChainController.subscribeChainProp("accountState",r,t):v.ChainController.subscribe(r),m.ConnectorController.subscribe(r)}subscribeNetwork(e){return v.ChainController.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return y.AccountController.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){y.AccountController.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){v.ChainController.subscribeKey("activeCaipNetwork",e)}getState(){return _.PublicStateController.state}subscribeState(e){return _.PublicStateController.subscribe(e)}showErrorMessage(e){rQ.SnackController.showError(e)}showSuccessMessage(e){rQ.SnackController.showSuccess(e)}getEvent(){return{...g.EventsController.state}}subscribeEvents(e){return g.EventsController.subscribe(e)}replace(e){rJ.RouterController.replace(e)}redirect(e){rJ.RouterController.push(e)}popTransactionStack(e){rJ.RouterController.popTransactionStack(e)}isOpen(){return rG.ModalController.state.open}isTransactionStackEmpty(){return 0===rJ.RouterController.state.transactionStack.length}isTransactionShouldReplaceView(){return rJ.RouterController.state.transactionStack[rJ.RouterController.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){E.OptionsController.setFeatures(e)}updateOptions(e){let t={...E.OptionsController.state||{},...e};E.OptionsController.setOptions(t)}setConnectMethodsOrder(e){E.OptionsController.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){E.OptionsController.setWalletFeaturesOrder(e)}setCollapseWallets(e){E.OptionsController.setCollapseWallets(e)}setSocialsOrder(e){E.OptionsController.setSocialsOrder(e)}getConnectMethodsOrder(){return rX.WalletUtil.getConnectOrderMethod(E.OptionsController.state.features,m.ConnectorController.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);let r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(e=>e.id===r.id)||v.ChainController.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(e=>e.id===t)&&v.ChainController.removeNetwork(e,t)}}let af=!1;class av extends ay{setupAuthConnectorListeners(e){e.onRpcRequest(t=>{U.W3mFrameHelpers.checkIfRequestExists(t)?U.W3mFrameHelpers.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(x.W3mFrameRpcConstants.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(x.W3mFrameRpcConstants.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))}),e.onRpcSuccess((e,t)=>{let r=U.W3mFrameHelpers.checkIfRequestIsSafe(t),a=y.AccountController.state.address,n=v.ChainController.state.activeCaipNetwork;!r&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(),a&&n?.id&&this.updateNativeBalance(a,n.id,n.chainNamespace))}),e.onNotConnected(()=>{let e=v.ChainController.state.activeChain;m.ConnectorController.getConnectorId(e)===d.ConstantsUtil.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,e),this.setLoading(!1,e))}),e.onConnect(async t=>{let r=v.ChainController.state.activeChain,a=r===d.ConstantsUtil.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,n=t.preferredAccountType||y.AccountController.state.preferredAccountTypes?.[r]||E.OptionsController.state.defaultAccountTypes[r];b.HelpersUtil.isLowerCaseMatch(t.address,y.AccountController.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:r}),this.setCaipAddress(a,r),this.setUser({...y.AccountController.state.user||{},...t},r),this.setSmartAccountDeployed(!!t.smartAccountDeployed,r),this.setPreferredAccountType(n,r);let s=t.accounts?.map(e=>c.CoreHelperUtil.createAccount(r,e.address,e.type||y.AccountController.state.preferredAccountTypes?.[r]||E.OptionsController.state.defaultAccountTypes[r]));this.setAllAccounts(s||[c.CoreHelperUtil.createAccount(r,t.address,t.preferredAccountType||n)],r),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,r)}),e.onSocialConnected(({userName:e})=>{this.setUser({...y.AccountController.state.user||{},username:e},v.ChainController.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(e=>{this.setSmartAccountEnabledNetworks(e,v.ChainController.state.activeChain)}),e.onSetPreferredAccount(({address:e,type:t})=>{e&&this.setPreferredAccountType(t,v.ChainController.state.activeChain)})}async syncAuthConnector(e,t){let r=d.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!r)return;this.setLoading(!0,t);let a=e.getLoginEmailUsed();this.setLoading(a,t),a&&this.setStatus("connecting",t);let n=e.getEmail(),s=e.getUsername();this.setUser({...y.AccountController.state?.user||{},username:s,email:n},v.ChainController.state.activeChain),this.setupAuthConnectorListeners(e);let{isConnected:i}=await e.isConnected(),o=w.ThemeController.getSnapshot(),l=E.OptionsController.getSnapshot();e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:o.themeMode,themeVariables:o.themeVariables,w3mThemeVariables:(0,p.getW3mThemeVariables)(o.themeVariables,o.themeMode)}),t&&r&&(i&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:d.ConstantsUtil.CONNECTOR_ID.AUTH,info:{name:d.ConstantsUtil.CONNECTOR_ID.AUTH},type:P.ConstantsUtil.CONNECTOR_TYPE_AUTH,provider:e,chainId:v.ChainController.state.activeCaipNetwork?.id,chain:t}),this.setStatus("connected",t)):m.ConnectorController.getConnectorId(t)===d.ConstantsUtil.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),N.StorageUtil.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!c.CoreHelperUtil.isTelegram())return;let t=N.StorageUtil.getTelegramSocialProvider();if(!t||"undefined"==typeof window||"undefined"==typeof document)return;let r=new URL(window.location.href).searchParams.get("result_uri");if(!r)return;y.AccountController.setSocialProvider(t,e),await this.authProvider?.init();let a=m.ConnectorController.getAuthConnector();t&&a&&(this.setLoading(!0,e),await a.provider.connectSocial(r),await u.ConnectionController.connectExternal(a,a.chain),N.StorageUtil.setConnectedSocialProvider(t),N.StorageUtil.removeTelegramSocialProvider(),g.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{let e=new URL(window.location.href);e.searchParams.delete("result_uri"),window.history.replaceState({},document.title,e.toString())}catch(e){console.error("tma social login failed",e)}}createAuthProvider(e){if(!d.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;let t=this.options?.features?.email===void 0?C.ConstantsUtil.DEFAULT_FEATURES.email:this.options?.features?.email,r=this.options?.features?.socials?this.options?.features?.socials?.length>0:C.ConstantsUtil.DEFAULT_FEATURES.socials;!this.authProvider&&this.options?.projectId&&(t||r)&&(this.authProvider=rB.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,onTimeout:()=>{f.AlertController.open(T.SOCIALS_TIMEOUT,"error")}}),_.PublicStateController.subscribeOpen(e=>{!e&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}),e===d.ConstantsUtil.CHAIN.EVM&&y.AccountController.state.preferredAccountTypes?.eip155&&this.authProvider.setPreferredAccount(y.AccountController.state.preferredAccountTypes?.eip155),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&h.ApiController.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;let t=v.ChainController.state.activeChain,r=e.chainNamespace,a=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===v.ChainController.state.activeChain&&a){let t=this.getAdapter(r),a=S.getProvider(r),n=S.getProviderId(r);await t?.switchNetwork({caipNetwork:e,provider:a,providerType:n}),this.setCaipNetwork(e)}else{let n=S.getProviderId(t)===P.ConstantsUtil.CONNECTOR_TYPE_AUTH,s=S.getProviderId(r),i=s===P.ConstantsUtil.CONNECTOR_TYPE_AUTH,o=d.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((n||i)&&o)try{v.ChainController.state.activeChain=e.chainNamespace,await this.connectionControllerClient?.connectExternal?.({id:d.ConstantsUtil.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:P.ConstantsUtil.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch(a){let t=this.getAdapter(r);await t?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:s})}else s===P.ConstantsUtil.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),a&&this.syncAccount({address:a,chainId:e.id,chainNamespace:r}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:t,chainNamespace:r}){let a=`${r}:${t}`,n=this.caipNetworks?.find(e=>e.caipNetworkId===a);if(r!==d.ConstantsUtil.CHAIN.EVM||n?.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{let{name:n,avatar:s}=await this.fetchIdentity({address:e,caipNetworkId:a});if(this.setProfileName(n,r),this.setProfileImage(s,r),!n){let a=this.getAdapter(r),n=await a?.getProfile({address:e,chainId:Number(t)});n?.profileName?(this.setProfileName(n.profileName,r),n.profileImage&&this.setProfileImage(n.profileImage,r)):(await this.syncReownName(e,r),this.setProfileImage(null,r))}}catch{await this.syncReownName(e,r),1!==t&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){let t=S.getProviderId(e);if(t===P.ConstantsUtil.CONNECTOR_TYPE_AUTH){let r=this.authProvider;if(r){let a=N.StorageUtil.getConnectedSocialProvider()??"email",n=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:n,social:a},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!af&&c.CoreHelperUtil.isClient()){let t={...C.ConstantsUtil.DEFAULT_FEATURES,...this.options.features},r=[];if((t.email||t.socials&&t.socials.length)&&r.push(e.A(222158)),t.email&&r.push(e.A(471775)),t.socials&&r.push(e.A(476495)),t.swaps&&r.push(e.A(172620)),t.send&&r.push(e.A(191428)),t.receive&&r.push(e.A(315274)),t.onramp&&r.push(e.A(938316)),t.history&&r.push(e.A(239178)),await Promise.all([...r,e.A(959171),e.A(335881)]),!document.querySelector("w3m-modal")){let e=document.createElement("w3m-modal");E.OptionsController.state.disableAppend||E.OptionsController.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",e)}af=!0}}}function aE(e){return new av({...e,sdkVersion:c.CoreHelperUtil.generateSdkVersion(e.adapters??[],"html","1.7.3")})}e.s(["createAppKit",()=>aE],342888),e.i(342888),e.i(915612),e.i(785318),e.i(666754),e.i(965768),e.s(["DEFAULT_METHODS",0,ah,"WcConstantsUtil",0,al,"WcHelpersUtil",0,au],662484),e.i(662484),e.s(["AccountController",()=>y.AccountController,"AppKit",()=>av,"CoreHelperUtil",()=>c.CoreHelperUtil,"DEFAULT_METHODS",0,ah,"WcConstantsUtil",0,al,"WcHelpersUtil",0,au,"createAppKit",()=>aE],402045)}]);