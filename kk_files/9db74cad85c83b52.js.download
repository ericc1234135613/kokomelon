(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,974725,421307,817397,304861,616375,121816,e=>{"use strict";var t,s,a,i,r=e.i(167207),l=e.i(293965),n=e.i(234651),o=e.i(828597),c=e.i(497339),d=e.i(793037),u=e.i(854769),m=e.i(750306),g=e.i(101240),x=e.i(819256),h=e.i(670481),p=e.i(541534),f=e.i(723382),N=e.i(903279),j=e.i(807757),b=e.i(874896),_=e.i(498364),v=e.i(715669),T=e.i(263867),y=e.i(694164),S=e.i(288199);e.i(383179);var w=e.i(527713),E=e.i(250812),I=e.i(285303);let L=[{id:"LINEAR",name:"linear"},{id:"LOG",name:"logarithmic"}],C=({id:e})=>{let t=(0,h.useMediaQuery)({query:"(min-width:768px)"}),s=(0,h.useMediaQuery)({query:"(max-width:500px)"}),a=(0,c.useTranslations)(),i=[14,30,90,180,365,730],[l,n]=d.useState(i[t?2:3]),[o,C]=d.useState(y.ChartScale.LINEAR),{data:P,isLoading:k}=g.trpc.publicVeve.getFloorPriceTimeseries.useQuery({id:e,dateLimit:(0,E.getStartDate)(l)},{staleTime:6e5,trpc:{context:{skipBatch:!0}},keepPreviousData:!0}),D=P?.map(e=>({...e,humanDate:e.date.slice(0,10),humanDateMonth:e.date.slice(0,7)}))||[];return P?.length===0?(0,r.jsxs)(x.Card,{className:"border border-secondary px-3 sm:px-5",children:[(0,r.jsx)(x.CardHeader,{className:"py-1 pl-2",children:(0,r.jsx)(x.CardTitle,{children:(0,r.jsx)(w.T,{type:w.TextType.PRIMARY,children:`${a("floorPrice")}`})})}),(0,r.jsx)(w.T,{className:"flex justify-center pb-4",type:w.TextType.SECONDARY,children:a("noFloorPriceData")})]}):(0,r.jsxs)(x.Card,{className:"border border-secondary px-1 sm:px-5",children:[(0,r.jsx)(x.CardDescription,{className:"sr-only",children:"This chart shows the floor price over time with current OMI and USD values."}),(0,r.jsxs)(x.CardHeader,{className:"flex w-full flex-col justify-between py-1 pl-2 max-md:gap-4 sm:pl-0 md:flex-row md:items-center",children:[(0,r.jsxs)(x.CardTitle,{className:"flex flex-1 gap-2 max-md:justify-between md:flex-col",children:[(0,r.jsx)(w.T,{className:"ext-sm font-thin uppercase",type:w.TextType.SECONDARY,children:a("floorPrice")}),P&&(0,r.jsx)("div",{className:"max-md:mr-2 max-md:text-right md:w-fit",children:(0,r.jsx)(v.OmiUsdPriceDisplay,{usdPrice:P[P.length-1].price,className:"text-base font-thin tabular-nums"})})]}),(0,r.jsx)("div",{className:"flex w-fit flex-1 flex-row flex-wrap justify-center gap-2",children:i.map(e=>(0,r.jsx)("button",{type:"button",className:(0,u.twJoin)("rounded-full border border-secondary px-4 py-1 text-sm transition-colors",e===l?"bg-white !text-black hover:bg-gray-outline hover:!text-white":"bg-black text-white hover:bg-white hover:text-black"),onClick:()=>n(e),children:(0,r.jsx)(w.T,{children:0!=e?a((0,E.formatDateSpan)(e)):a("allTime")})},e))}),(0,r.jsx)("div",{className:"flex w-full flex-1 justify-end max-md:mr-2",children:(0,r.jsx)(m.LoadingSwap,{isLoading:k&&!D,width:"118px",height:"40px",children:(0,r.jsx)(T.Select,{items:L.map(e=>({id:e.id,name:a(e.name)})),onSelect:e=>{C(e.id)}})})})]}),(0,r.jsx)("div",{className:"h-72 w-full overflow-hidden sm:h-96 sm:px-2",children:(0,r.jsx)(I.LoadingChartWrapper,{isLoading:k,children:(0,r.jsx)(N.ResponsiveContainer,{width:"100%",height:"100%",children:(0,r.jsxs)(f.ComposedChart,{data:D,margin:{left:-15,bottom:10},children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"10%",stopColor:"#6b7280",stopOpacity:.8}),(0,r.jsx)("stop",{offset:"90%",stopColor:"#6b7280",stopOpacity:.1})]})}),(0,r.jsx)(b.XAxis,{dy:5,height:40,dataKey:30==l||60==l?"humanDate":"humanDateMonth",angle:0,interval:(()=>{if(30===l||60===l)return"preserveStart";if(s){let e=D.length;return e<=2?0:Math.floor(e/2)}let e=Math.min(8,[...new Set(D.map(e=>e.humanDateMonth))].length);return Math.max(0,Math.floor(D.length/e))})(),tickLine:!1,tick:{fontSize:12},className:"text-secondary",stroke:"#9ca3af"}),(0,r.jsx)(_.YAxis,{tickFormatter:e=>(0,S.prettyFormatNumber)(e),scale:o==y.ChartScale.LINEAR?"auto":"log",domain:[o==y.ChartScale.LINEAR?0:"auto","auto"],tickLine:!1,tick:{fontSize:12},className:"text-secondary",stroke:"#9ca3af"}),(0,r.jsx)(j.Tooltip,{content:(0,r.jsx)(R,{})}),(0,r.jsx)(p.Area,{type:"linear",dataKey:"price",dot:!1,fill:"url(#areaGradient)",stroke:"#fff",strokeWidth:1,strokeLinejoin:"miter",strokeLinecap:"round"})]})})})})]})},R=({active:e,payload:t})=>{let s=(0,c.useTranslations)();return e&&t&&t.length?(0,r.jsxs)("div",{className:"flex flex-col overflow-hidden rounded-lg border border-white/10 bg-background px-6 py-4",children:[(0,r.jsx)(w.T,{type:w.TextType.PRIMARY,className:"label",children:t[0].payload.date.split("T")[0]}),(0,r.jsxs)(w.T,{className:"value",children:[(0,r.jsxs)("span",{className:"text-secondary",children:[" ",s("floorPrice"),":"]}),(0,r.jsxs)("span",{className:"text-primary",children:[" ",(0,S.formatCurrency)(t[0].value)]})]})]}):null};var P=e.i(426370),k=e.i(986202),D=e.i(761922);e.i(473508);var M=e.i(761449),A=e.i(604829),O=e.i(835349),F=e.i(593744),V=e.i(271148),z=e.i(971431),G=e.i(174625),U=e.i(609447),B=e.i(549374),K=e.i(699222);let H=({id:e})=>{let t=(0,c.useTranslations)(),{debouncedSearch:s}=(0,B.useDebouncedSearchParam)("search"),[a,i]=(0,K.useSortingWithParams)([{id:"created_at",desc:!0}],"marketplace-nft-element"),{data:n,fetchNextPage:o,hasNextPage:u,isLoading:m,isFetchingNextPage:x}=g.trpc.publicVeve.getElementNfts.useInfiniteQuery({element_id:e,limit:100,sort:a[0].id,direction:a[0].desc?G.DIRECTION.DESC:G.DIRECTION.ASC,search:s},{keepPreviousData:!0,getNextPageParam:(e,t)=>{if(!(e.length<100))return t?t.length+1:1}}),h=(0,k.useReactTable)({columns:(0,d.useMemo)(()=>[{header:t("issueNum"),accessorKey:"nft_issue",cell:({row:{original:e}})=>(0,r.jsxs)(P.Typography,{children:["#",e.nft_issue]})},{header:t("pnl"),accessorKey:"pnl",cell:({row:{original:e}})=>{let t=(0,F.round)(100*Number(e.pnl),2);return(0,r.jsx)(l.PercentageIndicator,{value:t})}},{header:t("txType"),accessorKey:"created_at",cell:({row:{original:e}})=>(0,r.jsx)(l.ColumnDataCell,{classNames:{title:"text-base"},title:(0,V.getReadableTxVeveType)(e.type,t),content:(0,O.formatDate)(new Date(e.created_at))})},{header:t("owner"),accessorKey:"wallet",cell:({row:{original:e}})=>(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(M.WalletText,{id:e.username??e.wallet,name:e.username??(0,A.truncate)(e.wallet)??""})})},{header:()=>(0,r.jsx)(z.NumberHeaderCell,{children:t("floorPrice")}),accessorKey:"price",cell:({row:{original:e}})=>{let t=Number(e.price??0);return(0,r.jsx)("div",{className:"flex flex-col items-end text-right",children:0===t?(0,r.jsx)(P.Typography,{gray:!0,children:"N/A"}):(0,r.jsx)(v.OmiUsdPriceDisplay,{usdPrice:t})})}}],[t]),data:(0,d.useMemo)(()=>n?.pages.flat()??[],[n]),getCoreRowModel:(0,D.getCoreRowModel)(),getFilteredRowModel:(0,D.getFilteredRowModel)(),onSortingChange:i,enableSortingRemoval:!1,state:{sorting:a},manualSorting:!0,manualFiltering:!0});return(0,r.jsx)(U.VirtualizedTable,{keyExtractor:(e,t)=>e.wallet+e.username+e.created_at+t,table:h,isLoading:m,hasNextPage:u,isFetchingNextPage:x,fetchNextPage:o,skeletonRows:25})};var W=e.i(211089),$=e.i(810629),Q=e.i(505679),J=e.i(984680),Y=e.i(514519),q=e.i(755178);let X=({id:e})=>{let t=(0,c.useTranslations)(),s=(0,q.useWindowWidth)(),[a,i]=(0,K.useSortingWithParams)([{id:"created_at",desc:!0}],"marketplace-transactions"),{debouncedSearch:n}=(0,B.useDebouncedSearchParam)("search"),{data:o,hasNextPage:u,fetchNextPage:m,isLoading:x,isFetchingNextPage:h}=g.trpc.publicVeve.getVeveTransactions.useInfiniteQuery({id:e,limit:50,globalSearch:n||"",txType:null,price:null},{getNextPageParam:(e,t)=>{if(!(e.length<50))if(t)return t.length+1;else return 1},refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,staleTime:3e4,retry:!1,keepPreviousData:!0}),{user:p}=(0,Y.useAuth)(),f=(0,k.useReactTable)({columns:(0,d.useMemo)(()=>[{size:(0,Q.getResponsiveSize)({default:180,sm:300},s),header:t("nft"),accessorKey:"nft_issue",cell:({row:{original:e}})=>{let t=e.element_type===y.ElementType.COMIC_COVER?W.APP_ROUTES.COLLECTIONS_COMIC:W.APP_ROUTES.COLLECTIONS_COLLECTIBLE;return(0,r.jsx)($.CollectibleLinkDataCell,{href:`${t}/${e.nft_id}`,imageUrl:e.image_url??void 0,name:e.name,rarity:e.rarity,edition:e.nft_issue?`#${e.nft_issue}`:void 0})}},{header:t("txType"),accessorKey:"created_at",cell:({row:{original:e}})=>(0,r.jsx)(l.ColumnDataCell,{title:(0,V.getReadableTxVeveType)(e.veve_type,t),content:(0,O.formatDate)(new Date(e.created_at))})},{size:200,header:t("users"),accessorKey:"users",enableSorting:!1,cell:({row:{original:e}})=>(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)(P.Typography,{variant:"sm",gray:!0,children:[t("from"),":"]}),(0,r.jsx)(J.UserLink,{username:e.seller_username??"",sellerAddress:e.seller_address??"",variant:"base"})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)(P.Typography,{variant:"sm",gray:!0,children:[t("to"),":"]}),(0,r.jsx)(J.UserLink,{username:e.buyer_username??"",sellerAddress:e.buyer_address??"",variant:"base"})]})]})},{header:()=>(0,r.jsx)(z.NumberHeaderCell,{children:t("price")}),accessorKey:"price",cell:({row:{original:e}})=>{let t=Number(e.price??0);return(0,r.jsx)("div",{className:"flex flex-col items-end text-right",children:0===t?(0,r.jsx)(P.Typography,{variant:"lg",gray:!0,children:"N/A"}):(0,r.jsx)(v.OmiUsdPriceDisplay,{usdPrice:t})})}}],[t,p,s]),data:(0,d.useMemo)(()=>o?.pages.flat()??[],[o]),getCoreRowModel:(0,D.getCoreRowModel)(),getSortedRowModel:(0,D.getSortedRowModel)(),onSortingChange:i,enableSortingRemoval:!1,state:{sorting:a,globalFilter:n||"",columnVisibility:{element_type:!1}},manualFiltering:!0});return(0,r.jsx)(U.VirtualizedTable,{keyExtractor:e=>e.element_id+e.nft_id+e.created_at,table:f,isLoading:x,hasNextPage:u,isFetchingNextPage:h,fetchNextPage:m,skeletonRows:25})};function Z({id:e}){let t=(0,c.useTranslations)(),[s,a]=(0,d.useState)("transactions"),{search:i,setSearch:l}=(0,B.useDebouncedSearchParam)("search"),m=[{label:t("transactions"),key:"transactions",component:(0,r.jsx)(X,{id:e})},{label:"NFTs",key:"nfts",component:(0,r.jsx)(H,{id:e})}];return(0,r.jsxs)("div",{className:"space-y-12",children:[(0,r.jsx)(C,{id:e}),(0,r.jsxs)(o.Tabs,{defaultValue:"transactions",onValueChange:e=>{a(e)},children:[(0,r.jsxs)(o.TabsList,{className:"size-full grow justify-between max-sm:mb-4 max-sm:flex-wrap max-sm:gap-2",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(P.Typography,{variant:"2xl",className:"font-thin !capitalize",children:s}),(0,r.jsx)(n.SearchInput,{classNames:{input:"w-fit text-sm"},placeholder:t("searchForEdition"),onChange:e=>l(e.target.value),value:i})]}),(0,r.jsx)("div",{className:"flex gap-1  sm:gap-4",children:m.map(e=>(0,r.jsx)(o.TabsTrigger,{value:e.key,asChild:!0,classNames:{trigger:"max-sm:!text-left max-sm:text-xs !capitalize"},children:(0,r.jsx)("div",{className:(0,u.twJoin)("rounded-full border border-secondary px-4 py-1 text-sm duration-200",s===e.key?"bg-white !text-black hover:bg-gray-outline hover:!text-white":"bg-black text-white hover:bg-white hover:text-black"),children:e.label},e.key)},e.key))})]}),m.map(e=>(0,r.jsx)(o.TabsContent,{value:e.key,children:e.component},e.key))]})]})}(t={}).TRANSACTIONS="transactions",t.NFTs="nfts",e.s(["AnalyticsTables",()=>Z],974725);var ee=e.i(819182),et=e.i(302747),es=e.i(618011);function ea(){let e=(0,d.useRef)(null),{data:t,isFetching:s,isFetched:a}=(0,es.useGetNftInfo)(),i=t?.description||"",[l,n]=(0,d.useState)(!1);return s&&!a?(0,r.jsx)(et.Skeleton,{className:"h-[82px] w-full rounded-lg"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{"aria-hidden":"true",ref:e,className:"pointer-events-none invisible absolute top-[-9999px] text-pretty font-thin leading-relaxed",children:i}),(0,r.jsx)("div",{onClick:()=>{n(!l)},className:(0,u.twJoin)("cursor-pointer overflow-hidden text-pretty font-thin leading-relaxed transition-all",l?"line-clamp-none":"line-clamp-4"),children:i})]})}var ei=e.i(459425),er=e.i(546526),el=e.i(331118),en=e.i(546780);let eo=e=>{let{variant:t="blue",disabled:s=!1,children:a,className:i,nftToSellData:l}=e,n=(0,c.useTranslations)(),{updateParams:o}=(0,el.useMarketplaceParams)(),{goCreateListing:d}=(0,er.useMarketplace)();return(0,r.jsx)(ei.Button,{variant:t,onClick:function(){d(l),o(en.MARKETPLACE_ROUTES.OWNED,en.MARKETPLACE_ACTIONS.CREATE_LISTING,l.nft_id)},className:i,disabled:s||!1,children:a||n("sellForOmi")})};var ec=e.i(729068),ed=e.i(779957),eu=e.i(320773);function em(e){let{limit:t,globalFilter:s}=e||{},a=(0,ec.useParams)(),{user:i,ready:r}=(0,Y.useAuth)(),{role:l}=(0,eu.useUserMetadata)(),{smartAccount:n}=(0,ed.useWalletContext)(),o="VERIFIED"===l,c=a?.id,u=n?.address,m=g.trpc.verifiedVeve.getUserOwnedElementDetails.useInfiniteQuery({elementId:c??"",wallet:u,limit:t||10,globalFilter:s||null},{enabled:!!i&&!!o&&!!r&&!!u&&!!c,getNextPageParam:e=>e.nextCursor,refetchInterval:1e4,staleTime:1e4}),x=m.isFetching||!i||!o||!r||!u||!c,h=(0,d.useMemo)(()=>m.data?.pages.flatMap(e=>e.items)||[],[m.data]),p=(0,d.useMemo)(()=>m.data?.pages[0]?.totalCount||0,[m.data]);return{...m,data:h,totalCount:p,isFetching:x}}var eg=e.i(869081),ex=e.i(219998);let eh=()=>{let e=(0,c.useTranslations)(),{user:t}=(0,Y.useAuth)(),{data:s,isFetching:a,isFetched:i}=em(),{data:l,isFetching:n,isFetched:o}=(0,es.useGetNftInfo)(),u=l?.is_listable_in_stackr,m=s.find(e=>e.listing_status===eg.ListingStatusV2.LISTED),g=(0,d.useMemo)(()=>s.filter(e=>null===e.listing_status||"DELISTED"===e.listing_status),[s]);return t&&a&&!i||n&&!o?(0,r.jsx)(et.Skeleton,{className:"max-h-[50px] w-full flex-1 rounded-lg"}):m?.veve_listing_status==="OPEN"||g.length>0&&g[0]?.veve_listing_status==="OPEN"?null:u?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ei.Button,{variant:"gray",className:"flex-1 text-nowrap uppercase md:hidden",onClick:()=>{let e=document.getElementById("tabs");e&&e.scrollIntoView({behavior:"smooth"})},children:e("scrollDown")}),1===g.length&&(0,r.jsx)(eo,{className:"flex-1 text-nowrap py-2 uppercase",nftToSellData:g[0],size:"longAndBigOnMobile"})]}):(0,r.jsx)(ex.Link,{href:`${W.EXTERNAL_ROUTES.VEVE_COLLECTION_BASE_URL}/${l?.id}`,target:"_blank",rel:"noreferrer",children:(0,r.jsx)(ei.Button,{variant:"gray",className:"w-full uppercase",children:e("availableOnVeve")})})};var ep=e.i(813568),ef=e.i(853854),eN=e.i(136397);let ej=()=>{let{data:e,imageUrl:t}=(0,es.useGetNftInfo)(),[s,a]=(0,d.useState)(!1),i=(0,ef.getReadableRarity)(e?.rarity),l=eN.rarityGradientMap[i];return t?(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-lg p-[2px] max-sm:max-h-[516px] lg:h-[550px] lg:w-[452px] 2xl:h-[516px]",children:[(!s||!t)&&(0,r.jsx)(et.Skeleton,{className:"absolute inset-0 z-20 h-[452px] w-full rounded-lg lg:h-[516px] lg:w-[452px]"}),(0,r.jsx)("span",{className:(0,u.twJoin)("absolute inset-[-1000%] animate-[spin_7s_linear_infinite] opacity-50",l)}),(0,r.jsx)("div",{className:"relative z-10 flex size-full items-center justify-center overflow-hidden rounded-lg border-0 bg-main backdrop-blur-md",children:(0,r.jsx)(ep.default,{priority:!0,onLoadingComplete:()=>a(!0),src:t,alt:"NFT Image",className:"size-full max-h-[500px] min-w-full rounded-lg object-contain p-6 lg:size-[500px]",unoptimized:!0,width:0,height:0})})]}):(0,r.jsx)(et.Skeleton,{className:"h-[452px] w-full rounded-lg lg:h-[516px] lg:w-[452px]"})};var eb=e.i(208196);function e_(){let{data:e,isFetching:t,isFetched:s}=(0,es.useGetNftInfo)();return t&&!s?(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(et.Skeleton,{className:"h-[36px] w-full rounded-lg"}),(0,r.jsx)(et.Skeleton,{className:"h-[24px] w-full rounded-lg"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex flex-row items-center justify-between gap-4",children:(0,r.jsx)(P.Typography,{variant:"display3",children:e?.name})}),(0,r.jsx)("div",{className:"flex flex-row items-center justify-between gap-4 text-right",children:e?.rarity&&(0,r.jsx)(eb.RarityBadge,{size:"sm",rarity:(0,ef.getReadableRarity)(e.rarity)})})]})}var ev=e.i(388531),eT=e.i(647751);function ey(){let{data:e,isFetching:t,isFetched:s}=(0,es.useGetNftInfo)(),a=Number(e?.in_circulation)*Number(e?.floor_market_price),i=Number(e?.stackr_floor_price)??0,l={market_cap:a>0?"$ "+(0,F.abbervateHugeNumber)(a,{digits:0}):"N/A",in_circulation:(0,F.abbervateHugeNumber)(e?.in_circulation??0,{digits:0}),editions_burnt:(0,F.abbervateHugeNumber)(e?.editions_burnt??0,{digits:0}),release_date:e?.drop_date?(0,O.formatDate)(new Date(e.drop_date)):"N/A",series:e?.series_name,...e?.licensor_name&&{licensor:e.licensor_name}};return t&&!s?(0,r.jsx)(et.Skeleton,{className:"h-[308px] w-full rounded-lg"}):(0,r.jsxs)("div",{className:"font-thin lg:h-[308px]",children:[(0,r.jsx)("h3",{className:"pb-3 text-left text-sm font-thin uppercase max-xl:hidden",children:"Metadata"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(eS,{title:"Veve Floor Price",value:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(eT.OmiUsdConverter,{usdPrice:Number(e?.floor_market_price),format:e=>(0,F.abbervateHugeNumber)(e,{digits:0})})," ","OMI",e?.floor_market_price&&(0,r.jsxs)(P.Typography,{gray:!0,children:["($",(0,F.abbervateHugeNumber)(Number(e?.floor_market_price),{digits:2}),")"]})]})}),(0,r.jsx)(eS,{title:"StackR Floor Price",value:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[i>0?(0,ev.formatNumber)(i,0)+" OMI":"N/A",e?.stackr_floor_price&&Number(e?.stackr_floor_price)>0&&(0,r.jsxs)(P.Typography,{gray:!0,children:["($",(0,r.jsx)(eT.OmiUsdConverter,{omiPrice:Number(e?.stackr_floor_price)}),")"]})]})}),Object.entries(l).map(([e,t])=>(0,r.jsx)(eS,{title:e?.replace(/_/g," ").replace(/\b\w/g,e=>e),value:t},e))]})]})}let eS=({title:e,value:t})=>(0,r.jsxs)("div",{className:"flex flex-row justify-between gap-4",children:[(0,r.jsx)(P.Typography,{className:"text-nowrap capitalize text-white/75",children:e}),(0,r.jsx)(P.Typography,{className:"max-w-[300px] truncate text-nowrap font-medium sm:text-right",children:t})]});var ew=e.i(26426),eE=e.i(358623),eI=e.i(577836);function eL({id:e}){let{user:t}=(0,Y.useAuth)(),{data:s,isFetching:a,isFetched:i}=(0,es.useGetNftInfo)(),{data:l,isFetching:n}=g.trpc.publicVeve.getElementTopHolders.useQuery({id:e,limit:5}),o=(0,c.useTranslations)(),d=l?.length??0;return n||a&&!i?(0,r.jsx)(et.Skeleton,{className:"h-[308px] w-full rounded-lg"}):0!==d||n?(0,r.jsxs)("div",{className:"font-thin lg:h-[308px]",children:[(0,r.jsx)("h3",{className:"pb-3 text-left text-sm font-thin uppercase max-xl:hidden",children:o("topHolders")}),(0,r.jsx)("div",{className:(0,u.twJoin)("max-lg:space-y-3 lg:flex lg:h-[276px] lg:flex-col gap-y-3",d>4&&"lg:justify-between"),children:l?.slice(0,5).map((e,a)=>(0,r.jsxs)(ex.Link,{href:`${W.APP_ROUTES.PUBLIC_PROFILE}/${e.username??e.id}`,className:"group flex flex-row justify-between gap-1",children:[(0,r.jsxs)("span",{className:"flex items-center gap-2 capitalize text-white/75",children:[(0,r.jsx)(P.Typography,{className:"tabular-nums",children:a+1}),(0,r.jsxs)(ew.Avatar,{className:"mx-2 size-10 rounded-full",children:[(0,r.jsx)(ew.AvatarImage,{className:"",src:e.user_image??""}),(0,r.jsx)(ew.AvatarFallback,{className:"bg-gray",children:(0,r.jsx)(eI.UserFallbackIcon,{className:"size-10 min-w-10 text-secondary"})})]}),(0,r.jsx)(P.Typography,{variant:"base",className:"max-w-[120px] truncate duration-200 group-hover:text-white",children:t&&e.username?e.username:(0,eE.formatAddress)(e.id)})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 font-medium md:text-base",children:[(0,r.jsx)(P.Typography,{className:"tabular-nums",children:e.issues_owned}),(0,r.jsxs)(P.Typography,{gray:!0,className:"min-w-20 tabular-nums",children:["(",!isNaN(s?.in_circulation??0)&&s?.in_circulation&&s?.in_circulation>0&&(e.issues_owned/s?.in_circulation*100).toFixed(2)+"%",")"]})]})]},e.id))})]}):null}var eC=((s=eC||{}).METADATA="metadata",s.TOP_HOLDERS="top-holders",s);function eR({id:e}){let t=(0,h.useMediaQuery)({query:"(max-width: 1400px)"}),s=(0,c.useTranslations)(),[a,i]=(0,d.useState)("metadata"),{isFetching:l,isFetched:n}=(0,es.useGetNftInfo)(),{data:m,isFetching:x}=g.trpc.publicVeve.getElementTopHolders.useQuery({id:e,limit:5}),p=m?.length&&m.length>0&&!x;return t&&(x||l&&!n)?(0,r.jsx)(et.Skeleton,{className:"my-10 h-[288px] w-full rounded-lg delay-200 lg:h-[320px] 2xl:h-[288px]"}):(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("div",{className:"mt-7 grid gap-5 lg:gap-10",children:(0,r.jsxs)(o.Tabs,{value:a,onValueChange:e=>i(e),children:[(0,r.jsxs)(o.TabsList,{className:"mb-5 flex w-full flex-row items-center justify-between gap-2 p-0",children:[(0,r.jsx)(ei.Button,{variant:"metadata"===a?"gray":"outline",size:"sm",asChild:!0,className:"flex-1",children:(0,r.jsx)(o.TabsTrigger,{value:"metadata",classNames:{trigger:(0,u.twJoin)("text-white text-base uppercase flex-1","metadata"===a?"font-medium":"opacity-75")},children:s("metadata")})}),p&&(0,r.jsx)(ei.Button,{variant:"top-holders"===a?"gray":"outline",size:"sm",asChild:!0,className:"flex-1",children:(0,r.jsx)(o.TabsTrigger,{value:"top-holders",classNames:{trigger:(0,u.twJoin)("text-white text-base uppercase w-full","top-holders"===a?"font-medium":"opacity-75")},children:s("topHolders")})})]}),(0,r.jsx)(o.TabsContent,{value:"metadata",children:(0,r.jsx)(ey,{})}),(0,r.jsx)(o.TabsContent,{value:"top-holders",children:(0,r.jsx)(eL,{id:e})})]})}):(0,r.jsxs)("div",{className:(0,u.twJoin)("mt-7 grid gap-5 lg:gap-10",x||p?"xl:grid-cols-2":""),children:[(0,r.jsx)(ey,{}),(0,r.jsx)(eL,{id:e})]})})}function eP({id:e}){return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-5 rounded-xl py-5 lg:grid-cols-[452px_auto] lg:gap-10",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,r.jsx)(ej,{}),(0,r.jsx)(eh,{})]}),(0,r.jsxs)("div",{className:"z-10 px-1 max-md:mt-5 lg:px-5",children:[(0,r.jsx)(e_,{}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(ea,{})}),(0,r.jsx)(ee.ClientOnly,{children:(0,r.jsx)(eR,{id:e})})]})]})}e.s(["NftInfoCard",()=>eP],421307);var ek=e.i(544370),eD=((a={}).EDITION="edition",a.CURRENT_PRICE="current_price",a.CREATED_AT="created_at",a.USERNAME="username",a.FLOOR_PRICE="floor_price",a);let eM=e=>{let t=(0,ec.useParams)(),s=t?.id,a=e?.limit||50,i=ek.trpc.publicVeve.getElementListings_v2.useInfiniteQuery({elementId:s||"",globalFilter:e?.globalFilter||null,sortBy:e?.sortBy||void 0,sortDirection:e?.sortDirection||void 0,limit:a?.toString()},{getNextPageParam:(e,t)=>{if(!(e.totalCount<=t.length*a))return t.length*a},refetchOnWindowFocus:!1,keepPreviousData:!0,staleTime:1e4}),r=i.data?.pages[0]?.totalCount||0,l=i.isLoading||!s;return{...i,totalCount:r,isLoading:l}};e.s(["LISTINGS_TABLE_SORT_BY_OPTIONS",()=>eD,"useGetMarketplaceListings",0,eM],817397);var eA=e.i(546501),eO=e.i(524442),eF=e.i(839390);let eV=e=>{let{variant:t="blue",size:s="sm",disabled:a=!1,children:i,className:l="rounded-full text-nowrap md:text-sm text-xs",listingData:n}=e,o=(0,c.useTranslations)(),[u,m]=(0,d.useState)(!1),{isInactive:g}=(0,eA.useMarketplaceStatus)(),{updateParams:x}=(0,el.useMarketplaceParams)();(0,d.useEffect)(()=>{let e=()=>{let e=localStorage.getItem(`loading-lock-${n?.edition}`),t=localStorage.getItem(`lockEndTime-${n?.edition}`),s=new Date().getTime();e&&s<Number(e)||t&&s<Number(t)?m(!0):m(!1)};e();let t=setInterval(e,15e3);return()=>clearInterval(t)},[n?.edition]);let{goBuy:h}=(0,er.useMarketplace)();return(0,r.jsx)(ei.Button,{variant:t,size:s,disabled:a||u||g,onClick:()=>{n?.nft_id&&(h(n),x(en.MARKETPLACE_ROUTES.LISTINGS,en.MARKETPLACE_ACTIONS.BUY,n.nft_id))},className:l,children:i||o("buyNow")})};var ez=e.i(355481);let eG=e=>{let{variant:t="blue",size:s="sm",disabled:a=!1,children:i,className:l="text-nowrap md:text-sm text-xs",removalData:n}=e,o=(0,c.useTranslations)(),{profile:d}=(0,ez.useProfile)(),{goRemoveListing:u}=(0,er.useMarketplace)(),{isInactive:m}=(0,eA.useMarketplaceStatus)(),{updateParams:g}=(0,el.useMarketplaceParams)();return(0,r.jsx)(ei.Button,{variant:t,size:s,onClick:()=>{n.seller_id===d?.user_id&&(u(n),g(null,en.MARKETPLACE_ACTIONS.REMOVE_LISTING,null,n.listing_id))},className:l,disabled:a||m,children:i||o("Remove Listing")})};var eU=((i=eU||{}).PENDING="pending",i.LOGIN="login",i.BUY="buy",i.REMOVE="remove",i.LOADING="loading",i.HIDDEN="hidden",i);function eB({smartAccount:e,listingData:t,veveUserId:s,user:a,authorised:i,login:l,isBuyActive:n,isFetching:o,isItemForcePending:u}){let m=(0,c.useTranslations)(),g=(0,d.useCallback)(()=>{let r=[eg.ListingStatusV2.LISTING,eg.ListingStatusV2.DELISTING];return u(t.nft_id)||r.includes(t.listing_status)?"pending":i&&null===a?"login":t.listing_status===eg.ListingStatusV2.LISTED&&s!==t.seller_id&&null!==a?e?"buy":"loading":e&&s===t.seller_id&&t.listing_status===eg.ListingStatusV2.LISTED?"remove":"hidden"},[i,u,t.listing_status,t.nft_id,t.seller_id,e,a,s])();return"hidden"===g?null:"loading"===g?(0,r.jsx)(et.Skeleton,{className:"h-[32px] w-[77px] rounded-lg"}):"login"===g?(0,r.jsx)(ei.Button,{variant:"blue",size:"sm",onClick:l,children:m("Login to purchase")}):"pending"===g?(0,r.jsx)(ei.Button,{variant:"disabled",size:"sm",className:"text-nowrap text-xs md:text-sm",children:m("Pending")}):"buy"===g?(0,r.jsx)(eV,{listingData:t,disabled:!n||o||!e||u(t.nft_id),className:"",children:m("Buy now")}):"remove"===g?(0,r.jsx)(eG,{removalData:t,disabled:u(t.nft_id)}):null}e.s(["MarketplaceListingTable",0,()=>{let{smartAccount:e,authorised:t}=(0,ed.useWalletContext)(),{goBuy:s,goRemoveListing:a}=(0,er.useMarketplace)(),{debouncedSearch:i,setSearch:o,search:u}=(0,B.useDebouncedSearchParam)(),[x,h]=(0,K.useSortingWithParams)([{id:eD.CURRENT_PRICE,desc:!1}],"marketplace-listing"),{data:p,isLoading:f,hasNextPage:N,isFetchingNextPage:j,fetchNextPage:b,totalCount:_}=eM({limit:50,globalFilter:i||"",sortBy:x[0]?.id,sortDirection:x[0]?.desc?"DESC":"ASC"}),{authenticated:T,user:y,login:S}=(0,Y.useAuth)(),{tokenData:w}=(0,eO.useTokenUSDPrice)(),{isActive:E,isInactive:I}=(0,eA.useMarketplaceStatus)(),{action:L,nftId:C,listingId:R,removeAction:P}=(0,el.useMarketplaceParams)(),{isItemForcePending:O}=(0,eF.useForcePending)(),{isActive:V}=((e,t)=>{let[s,a]=(0,d.useState)(!1),i=(0,d.useMemo)(()=>new Date((void 0)??"2024-12-19T17:00:00Z").getTime(),[void 0]);return(0,d.useEffect)(()=>{let e=setInterval(()=>{new Date().getTime()>=i?a(!0):a(!1)},(void 0)??2e3);return()=>clearInterval(e)},[void 0,i]),{isActive:s,showDateToHuman:e=>e.toLocaleDateString(void 0,{day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}})(),{data:G}=g.trpc.authedVeve.getUserMetadata.useQuery(void 0,{enabled:T}),H=G?.veve_user_id||"",W=(0,d.useMemo)(()=>p&&_>0?p.pages[0].items.reduce((e,t)=>Number(t.current_price)<Number(e)?t.current_price:e,p.pages[0].items[0].current_price):"",[p,_]),$=(0,d.useMemo)(()=>({smartAccount:e,VEVE_USER_ID:H,user:y,authorised:t,login:S,isBuyActive:V,isLoading:f,tokenData:w,currentLowestPrice:W,isItemForcePending:O}),[e,H,y,t,S,V,f,w,W,O]),Q=(0,c.useTranslations)(),J=(0,d.useMemo)(()=>p?.pages.flatMap(e=>e.items)||[],[p?.pages]),q=(0,k.useReactTable)({data:J,columns:(0,d.useMemo)(()=>[{header:Q("Edition"),accessorKey:eD.EDITION,enableSorting:!0,cell:({row:{original:e}})=>(0,r.jsxs)("p",{className:"flex items-center px-2 md:px-0",children:["#",e.edition]})},{header:Q("Owner"),accessorKey:eD.USERNAME,enableSorting:!0,cell:({row:{original:e}})=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ep.default,{src:e.user_image||"/avatar-default.jpg",alt:"UserImage",width:30,height:30,className:"size-8 rounded-full"}),(0,r.jsx)(M.WalletText,{id:e.username??e.seller_id,name:e.username?String((0,A.truncate)(e.username)):String((0,A.truncate)(e.seller_id))})]})},{header:Q("Listed Time"),accessorKey:eD.CREATED_AT,enableSorting:!0,cell:({row:{original:e}})=>(0,r.jsx)(M.TransactionInfoCell,{date:new Date(e.created_at)})},{header:()=>(0,r.jsx)(z.NumberHeaderCell,{children:Q("Floor Difference")}),accessorKey:eD.FLOOR_PRICE,enableSorting:!0,cell:({row:{original:e}})=>{let{currentLowestPrice:t}=$,s=`${(0,F.abbervateHugeNumber)((Number(e.current_price)/Number(t)-1)*100)}%`;return(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)(l.ColumnDataCell,{classNames:{content:"!text-base"},title:"",content:s})})}},{header:()=>(0,r.jsx)(z.NumberHeaderCell,{children:Q("Listing Price")}),accessorKey:eD.CURRENT_PRICE,enableSorting:!0,cell:({row:{original:e}})=>(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)(v.OmiUsdPriceDisplay,{className:"text-base",omiPrice:Number(e.current_price),format:{usdPrice:e=>(0,F.abbervateHugeNumber)(e,{digits:2}),omiPrice:e=>(0,F.abbervateHugeNumber)(e,{digits:0})}})})},{id:"actions",enableSorting:!1,cell:({row:{original:e}})=>(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(eB,{isItemForcePending:$.isItemForcePending,listingData:e,smartAccount:$.smartAccount,veveUserId:$.VEVE_USER_ID,user:$.user,authorised:$.authorised,login:$.login,isBuyActive:$.isBuyActive,isFetching:$.isLoading})})}],[Q,$]),getCoreRowModel:(0,D.getCoreRowModel)(),getSortedRowModel:(0,D.getSortedRowModel)(),onSortingChange:h,onGlobalFilterChange:o,enableSortingRemoval:!1,manualSorting:!0,state:{globalFilter:u,sorting:x}});return(0,d.useEffect)(()=>{if(I)return;let e=null!==C&&J.some(e=>e.nft_id===C),t=L===en.MARKETPLACE_ACTIONS.BUY&&e&&E,a=J.find(e=>e.nft_id===C);t&&a&&(s(a),P())},[J,C,I]),(0,d.useEffect)(()=>{if(I)return;let e=L===en.MARKETPLACE_ACTIONS.REMOVE_LISTING&&!!R,t=J.find(e=>e.listing_id===R);e&&t&&(a(t),P())},[R,J,I]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.LoadingSwap,{isLoading:f&&!J,width:"292px",height:"40px",children:(0,r.jsx)(n.SearchInput,{classNames:{input:"w-64 text-sm"},placeholder:Q("Filter by edition"),onChange:e=>o(e.target.value),value:u})}),(0,r.jsx)(U.VirtualizedTable,{keyExtractor:e=>e.nft_id+e.created_at,table:q,isLoading:f&&!J.length,hasNextPage:N,isFetchingNextPage:j,fetchNextPage:b,estimateSize:60,skeletonRows:25})]})}],304861);let eK={src:e.i(445536).default,width:40,height:40,blurWidth:0,blurHeight:0};var eH=e.i(975157),eW=e.i(199877),eW=eW,e$=e.i(42108),eQ=e.i(446100),eJ=e.i(519544);function eY(){let e=(0,c.useTranslations)(),{smartAccount:t}=(0,ed.useWalletContext)(),{data:s,isComic:a}=(0,es.useGetNftInfo)(),{data:i}=function(){let e=(0,ec.useParams)(),{user:t,ready:s}=(0,Y.useAuth)(),{role:a}=(0,eu.useUserMetadata)(),{smartAccount:i}=(0,ed.useWalletContext)(),r=e?.id;return{...ek.trpc.verifiedVeve.getTransferingElements.useQuery({elementId:r||"",wallet:i?.address||"0x"},{enabled:!!r&&(!!t||"VERIFIED"===a||!!s),keepPreviousData:!0,refetchInterval:1e4,staleTime:1e4})}}(),{error:l,goCreateListing:o,goRemoveListing:u}=(0,er.useMarketplace)(),{debouncedSearch:g,setSearch:x,search:h}=(0,B.useDebouncedSearchParam)(),{action:p,nftId:f,listingId:N,removeAction:j}=(0,el.useMarketplaceParams)(),{data:b,isFetching:_,isFetched:v,hasNextPage:T,fetchNextPage:y,isFetchingNextPage:S}=em({globalFilter:g||""}),w=_&&!v,[E,I]=(0,K.useSortingWithParams)([{id:"edition",desc:!1}],"owned"),{isItemForcePending:L}=(0,eF.useForcePending)(),C=!!s?.is_listable_in_stackr;(0,d.useEffect)(()=>{if(p!==en.MARKETPLACE_ACTIONS.CREATE_LISTING||!f||!b?.length)return;let e=b.find(e=>e.nft_id===f&&e.listing_status!==eg.ListingStatusV2.LISTED);e&&(o(e),j())},[b,f,p]),(0,d.useEffect)(()=>{if(p!==en.MARKETPLACE_ACTIONS.REMOVE_LISTING||!f||!b?.length)return;let e=b.find(e=>e.nft_id===f&&e.listing_status===eg.ListingStatusV2.LISTED&&e.listing_id===N);e&&(u({nft_id:e.nft_id,edition:e.edition,listing_id:e.listing_id,current_price:e.current_price,username:e.username,seller_id:e.owner_id}),j())},[b,f,N,p]);let R=(0,d.useMemo)(()=>b?.some(e=>e.listing_status===eg.ListingStatusV2.LISTED)??!1,[b]),A=(0,d.useMemo)(()=>[...b||[],...(i||[]).map(e=>({nft_id:e.nft_id,element_id:e.element_id,edition:e.edition,listing_status:eg.ListingStatusV2.TRANSFERRING}))],[b,i]),O=(0,d.useMemo)(()=>({smartAccount:t,isComic:a,isListableOnStackr:C,isItemForcePending:L,ownedIds:new Set(b?.map(e=>e.nft_id)||[]),error:l}),[t,a,C,L,b,l]),F=(0,k.useReactTable)({data:A,columns:(0,d.useMemo)(()=>[{header:e("Edition"),accessorKey:"edition",cell:({row:{original:e}})=>(0,r.jsxs)("p",{className:"flex items-center",children:["#",e.edition]})},{header:e("Owner"),accessorKey:"username",cell:({row:{original:t}})=>t.listing_status===eg.ListingStatusV2.TRANSFERRING?(0,r.jsx)(P.Typography,{className:"uppercase",variant:"sm",gray:!0,children:e("transferring ownership")}):(0,r.jsxs)("div",{className:"flex items-center gap-2 uppercase text-[#94A3B8]",children:[(0,r.jsx)(ep.default,{src:t.user_image||eK,alt:"UserImage",width:30,height:30,className:"size-8 rounded-full",unoptimized:!0,loading:"lazy"}),(0,r.jsx)(M.WalletText,{className:"!text-blue",id:t.username,name:t.username?String(t.username):String(O.smartAccount.wallet)})]})},{header:e("Listing Price"),accessorKey:"listing_status",size:200,cell:({row:{original:t}})=>t.errors&&t.errors.length>0?(0,r.jsxs)("button",{type:"button",onClick:()=>O.error(t.errors?.map(e=>e.message??"Unknown error")??[""],{title:e("Error occured"),text:e("Error details"),buttonText:e("Close")}),className:"mx-auto flex items-center gap-2 text-red-500",children:[(0,r.jsx)(eW.default,{className:"size-10 animate-pulse"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"text-left text-sm",children:e("Error occured")}),(0,r.jsx)("li",{className:"text-left text-xs text-white",children:e("Click to see details")})]})]}):t.listing_status===eg.ListingStatusV2.LISTED&&t.current_price?(0,r.jsxs)("div",{className:"flex items-center gap-2 text-nowrap text-sm font-semibold",children:[(0,r.jsx)("h5",{className:"text-[#72A4EB]",children:"Listing price:"}),(0,eH.prettifyQuote)(Number((0,eQ.formatUnits)(BigInt(t.current_price),18)),0)," OMI"]}):void 0},{header:"",id:"actions",cell:({row:{original:t}})=>{let s=new Date(t.updated_at).getTime()+3e5>new Date().getTime();return t.listing_status===eg.ListingStatusV2.LISTED&&t.listing_id?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(eG,{removalData:{nft_id:t.nft_id,edition:t.edition,listing_id:t.listing_id,current_price:t.current_price,username:t.username,seller_id:t.owner_id},disabled:O.isItemForcePending(t.nft_id)})}):t.listing_status===eg.ListingStatusV2.LISTING||t.listing_status===eg.ListingStatusV2.DELISTING||t.listing_status===eg.ListingStatusV2.SETTLING||t.listing_status===eg.ListingStatusV2.SETTLED&&t.is_seller&&s?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(P.Typography,{className:"uppercase",variant:"sm",gray:!0,children:e(t.listing_status===eg.ListingStatusV2.SETTLING?"Selling":"Pending")})}):s||t.listing_status===eg.ListingStatusV2.TRANSFERRING?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(eJ.Tooltip,{content:e("waitToSellDescription"),trigger:(0,r.jsx)(P.Typography,{variant:"sm",gray:!0,className:"uppercase",children:e("Wait to sell")})})}):O.isListableOnStackr&&"NONE"===t.veve_listing_status?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(eo,{disabled:O.isItemForcePending(t.nft_id),nftToSellData:t,className:"relative h-8",children:e("Sell for OMI")})}):"OPEN"===t.veve_listing_status?(0,r.jsx)(e$.default,{href:`${W.EXTERNAL_ROUTES.VEVE_COLLECTION_BASE_URL}/${O.isComic?"comic/":""}${t.nft_id}`,target:"_blank",rel:"noreferrer noopener",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(ei.Button,{variant:"secondaryBlue",size:"sm",className:"text-nowrap text-xs md:text-sm",children:e("Listed on Veve")})})}):(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("span",{className:"text-base opacity-75",children:e("On Veve")})})}}],[e,O]),getCoreRowModel:(0,D.getCoreRowModel)(),getSortedRowModel:(0,D.getSortedRowModel)(),onSortingChange:I,onGlobalFilterChange:x,enableSortingRemoval:!1,manualFiltering:!0,state:{sorting:E,globalFilter:h,columnVisibility:{listing_price:R}}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.LoadingSwap,{isLoading:w,width:"292px",height:"40px",children:(0,r.jsx)(n.SearchInput,{classNames:{input:"w-64 text-sm"},placeholder:e("Filter by edition"),onChange:e=>x(e.target.value),value:h})}),(0,r.jsx)(ee.ClientOnly,{children:(0,r.jsx)(U.VirtualizedTable,{keyExtractor:e=>`${e.nft_id}-${e.updated_at}`,table:F,isLoading:w&&!A.length,hasNextPage:T,isFetchingNextPage:S,fetchNextPage:y,estimateSize:60,skeletonRows:25})})]})}e.s(["MarketplaceOwnedTable",()=>eY],616375);var eq=e.i(917919),eX=e.i(173172),eZ=e.i(464884);function e0({item:e}){let t=(0,c.useTranslations)(),s={error:[t("CANCELLED"),t("REJECTED"),t("BOUGHT REJECTED")],success:[t("SUCCESS"),t("LISTING SUCCESS")]},a=({title:e,address:a,errorMessage:i})=>(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("span",{className:"flex flex-col gap-0.5 uppercase",children:[(0,r.jsx)("p",{className:(0,u.twMerge)("uppercase",s.error.includes(e)&&"text-red-500",s.success.includes(e)?"text-green-400":"text-blue-400"),children:t(e)}),(0,r.jsx)("p",{className:"text-xs text-white",children:i||a&&(0,A.truncate)(a)||""})]})}),i=({actionLabel:e,statusMessage:s,isSeller:a,fundsReleaseId:i})=>(0,r.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,r.jsx)("span",{className:(0,u.twMerge)("uppercase",a?"text-red-400":"text-green-400"),children:e}),s&&(0,r.jsx)("span",{className:"text-xs text-gray-400",children:s}),i&&(0,r.jsxs)(ex.Link,{className:"group flex items-center gap-1.5 text-xs text-gray-400 duration-300 hover:text-white",href:`https://basescan.org/tx/${i}`,target:"_blank",rel:"noopener noreferrer",children:[t("Transfer completed")," ",(0,r.jsx)(eZ.ExternalLink,{className:"size-3"})]})]}),l={[eg.ListingStatusV2.LISTED]:()=>(0,r.jsx)(a,{title:"LISTED",errorMessage:e.error_message}),[eg.ListingStatusV2.DELISTED]:()=>(0,r.jsx)(a,{title:"DELISTED",address:e.seller_id,errorMessage:e.error_message}),[eg.ListingStatusV2.LISTING]:()=>(0,r.jsx)(a,{title:"LISTING",address:e.seller_id,errorMessage:e.error_message}),[eg.ListingStatusV2.DELISTING]:()=>(0,r.jsx)(a,{title:"DELISTING",address:e.seller_id,errorMessage:e.error_message}),[eg.ListingStatusV2.SETTLING]:()=>(0,r.jsx)(i,{actionLabel:e.is_seller?t("Selling"):t("Buying"),statusMessage:"MARKET_STACKR"===e.transaction_type?t("Locked on Veve for transfer"):"NFT_TRANSFER"===e.transaction_type?t("Transferring Ownership on Veve"):t("Settlement initiated"),isSeller:e.is_seller}),[eg.ListingStatusV2.SETTLED]:()=>(0,r.jsx)(i,{actionLabel:e.is_seller?t("Sold"):t("Bought"),isSeller:e.is_seller,fundsReleaseId:e.funds_release_id})};return l[e.listing_status]?.()||null}var e1=e.i(209128);let e2=(0,eX.default)(()=>e.A(561827).then(e=>e.ListingHistoryModal),{loadableGenerated:{modules:[325711]},ssr:!1});function e4(){let e=(0,c.useTranslations)(),{debouncedSearch:t,setSearch:s,search:a}=(0,B.useDebouncedSearchParam)(),{smartAccount:i}=(0,ed.useWalletContext)(),{data:l,isFetching:o,isFetched:m}=(e=>{let{smartAccount:t}=(0,ed.useWalletContext)(),s=(0,ec.useParams)(),a=s?.id,i=g.trpc.publicVeve.getListingsInProgressStatuses.useQuery({elementId:a,wallet:t?.address||"0x",globalFilter:e?.globalFilter||null},{enabled:!!a,keepPreviousData:!0,refetchInterval:5e3}),r=i.data?.map(e=>({...e,current_price:(0,e1.formatEther)(BigInt(e.current_price))})),l=i.isFetching||!t?.address||!a;return{recentActivityData:r,...i,isFetching:l}})({globalFilter:t||""}),x=o&&!m||!i,[h,p]=(0,K.useSortingWithParams)([{id:"event_created_at",desc:!0}],"recent-activity"),[f,N]=(0,d.useState)(""),j=(0,k.useReactTable)({data:(0,d.useMemo)(()=>l||[],[l]),columns:(0,d.useMemo)(()=>[{size:150,header:e("Edition"),accessorKey:"edition",cell:({row:{original:e}})=>(0,r.jsxs)("p",{className:"flex items-center",children:["#",e.edition]})},{size:100,header:e("Progress"),accessorKey:"listing_status",cell:({row:{original:e}})=>{let{percentage:t,color:s}=function(e){let{listing_status:t,error_message:s,funds_release_id:a,transaction_type:i}=e;if(s)return{percentage:"0%",color:"text-red-500"};switch(t){case eg.ListingStatusV2.LISTING:return{percentage:"30%",color:"text-white"};case eg.ListingStatusV2.LISTED:return{percentage:"100%",color:"text-green-400"};case eg.ListingStatusV2.SETTLING:if("MARKET_STACKR"===i)return{percentage:"50%",color:"text-white"};if("NFT_TRANSFER"===i)return{percentage:"75%",color:"text-blue-400"};return{percentage:"10%",color:"text-white"};case eg.ListingStatusV2.SETTLED:if(!a)return{percentage:"90%",color:"text-blue-400"};return{percentage:"100%",color:"text-green-400"};case eg.ListingStatusV2.DELISTING:return{percentage:"50%",color:"text-white"};case eg.ListingStatusV2.DELISTED:return{percentage:"100%",color:"text-green-400"};case eg.ListingStatusV2.FAILED:default:return{percentage:"0%",color:"text-red-500"}}}({...e});return(0,r.jsx)("div",{className:(0,u.twJoin)("text-base",s),children:t})}},{size:150,header:e("Timestamp"),accessorKey:"event_created_at",cell:({row:{original:e}})=>(0,r.jsx)(M.TransactionInfoCell,{date:new Date(e.updated_at)})},{size:200,header:e("Action"),accessorKey:"action",cell:({row:{original:e}})=>(0,r.jsx)(e0,{item:e})},{size:120,header:e("Listing Price"),accessorKey:"current_price",meta:{headerClassName:"justify-end"},cell:({row:{original:e}})=>{let t=(0,eE.normalizeOldPrices)(e.current_price);return(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)(v.OmiUsdPriceDisplay,{omiPrice:Number(t)})})}},{size:140,header:e("Processing Details"),id:"processing_details",cell:({row:{original:t}})=>(0,r.jsx)(ei.Button,{size:"sm",disabled:t.listing_status===eg.ListingStatusV2.SETTLING,variant:"blue",onClick:()=>N(t.listing_id),children:e("History")})}],[e,N]),getCoreRowModel:(0,D.getCoreRowModel)(),getSortedRowModel:(0,D.getSortedRowModel)(),onSortingChange:p,state:{sorting:h}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.SearchInput,{classNames:{input:"w-64 text-sm"},placeholder:e("Filter by edition"),onChange:e=>s(e.target.value),value:a}),(0,r.jsx)(ee.ClientOnly,{children:(0,r.jsxs)("div",{className:"mt-4 overflow-x-auto",children:[(0,r.jsx)(eq.ReactTable,{table:j,customNoDataMessage:e("noRecentActivity"),bodyClassName:"border border-[#4F4E4E] rounded-xl overflow-hidden",headClassName:"px-4 py-2 text-left text-sm font-medium text-white text-nowrap",cellClassName:"px-4 text-sm h-[68px]",isLoading:x,showLoadingOverlay:x,skeletonRows:25}),f&&(0,r.jsx)(e2,{listingId:f,onClose:()=>N("")})]})})]})}e.s(["RecentActivityTable",()=>e4],121816)}]);